

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>rampart.utils &mdash; Rampart 0.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/hacks.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Rampart 0.1.0 documentation" href="index.html"/>
        <link rel="next" title="The rampart-sql module" href="sqltoc.html"/>
        <link rel="prev" title="Introduction to Rampart" href="rampart-main.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Rampart
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="rampart-main.html">Rampart JavaScript</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Rampart Utility Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#printf">printf</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sprintf">sprintf</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bprintf">bprintf</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fopen">fopen</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fclose">fclose</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fprintf">fprintf</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fseek">fseek</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rewind">rewind</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ftell">ftell</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fflush">fflush</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fread">fread</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fwrite">fwrite</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hexify">hexify</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dehexify">dehexify</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stringtobuffer">stringToBuffer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#buffertostring">bufferToString</a></li>
<li class="toctree-l2"><a class="reference internal" href="#objecttoquery">objectToQuery</a></li>
<li class="toctree-l2"><a class="reference internal" href="#querytoobject">queryToObject</a></li>
<li class="toctree-l2"><a class="reference internal" href="#readfile">readFile</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trim">trim</a></li>
<li class="toctree-l2"><a class="reference internal" href="#readline">readLine</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stat">stat</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lstat">lstat</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exec">exec</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shell">shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kill">kill</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getcwd">getcwd</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chdir">chdir</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mkdir">mkdir</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rmdir">rmdir</a></li>
<li class="toctree-l2"><a class="reference internal" href="#readdir">readdir</a></li>
<li class="toctree-l2"><a class="reference internal" href="#copyfile">copyFile</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rmfile">rmFile</a></li>
<li class="toctree-l2"><a class="reference internal" href="#link">link</a></li>
<li class="toctree-l2"><a class="reference internal" href="#symlink">symlink</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chmod">chmod</a></li>
<li class="toctree-l2"><a class="reference internal" href="#realpath">realPath</a></li>
<li class="toctree-l2"><a class="reference internal" href="#touch">touch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rename">rename</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sleep">sleep</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gettype">getType</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sqltoc.html">The rampart-sql module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-server.html">The rampart-server module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-html.html">The rampart-html module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-crypto.html">The rampart-crypto module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-curl.html">The rampart-curl module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-lmdb.html">The rampart-lmdb module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-redis.html">The rampart-redis module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-robots.html">The rampart-robots module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-cmark.html">The rampart-cmark module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Rampart</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>rampart.utils</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/rampart-utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rampart-utils">
<h1>rampart.utils<a class="headerlink" href="#rampart-utils" title="Permalink to this headline">Â¶</a></h1>
<p>Utility functions are provided by the global <code class="docutils literal notranslate"><span class="pre">rampart.utils</span></code> <span class="green">Object</span>.
These functions bring file io and other functionality to Duktape JavaScript.</p>
<p><a class="reference internal" href="#fprintf">fprintf</a> (), <a class="reference internal" href="#fseek">fseek</a>(), <a class="reference internal" href="#rewind">rewind</a>(), <a class="reference internal" href="#ftell">ftell</a>(), <a class="reference internal" href="#fflush">fflush</a>(),
<a class="reference internal" href="#fread">fread</a>() and <a class="reference internal" href="#fwrite">fwrite</a>() take a filehandle, which may be obtained
using <a class="reference internal" href="#fopen">fopen</a>(), or by using one of the following:</p>
<dl class="simple">
<dt>rampart.utils.stdin:</dt><dd><p>A handle that corresponds to the UNIX standard in stream.</p>
</dd>
<dt>rampart.utils.stdout:</dt><dd><p>A handle that corresponds to the UNIX standard out stream.</p>
</dd>
<dt>rampart.utils.stderr:</dt><dd><p>A handle that corresponds to the Unix standard error stream.</p>
</dd>
<dt>rampart.utils.accessLog:</dt><dd><p>A handle that corresponds to the <code class="docutils literal notranslate"><span class="pre">accessLog</span></code> file option in <code class="docutils literal notranslate"><span class="pre">server.start()</span></code> for the
<code class="docutils literal notranslate"><span class="pre">rampart-server</span></code> module.  If not specified, or not loaded, same as
<code class="docutils literal notranslate"><span class="pre">rampart.utils.stdout</span></code>.</p>
</dd>
<dt>rampart.utils.errorLog:</dt><dd><p>A handle that corresponds to the <code class="docutils literal notranslate"><span class="pre">errorLog</span></code> file option in <code class="docutils literal notranslate"><span class="pre">server.start()</span></code> for the
<code class="docutils literal notranslate"><span class="pre">rampart-server</span></code> module.  If not specified, or not loaded, same as
<code class="docutils literal notranslate"><span class="pre">rampart.utils.stderr</span></code>.</p>
</dd>
</dl>
<div class="section" id="printf">
<h2>printf<a class="headerlink" href="#printf" title="Permalink to this headline">Â¶</a></h2>
<p>Print a formatted string to stdout.  Provides C-like
<a class="reference external" href="https://man7.org/linux/man-pages/man3/printf.3.html">printf(3)</a>
functionality in JavaScript.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="nx">fmt</span><span class="p">,</span> <span class="p">...)</span>
</pre></div>
</div>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Number</span>. The length in bytes of the printed string.</p>
</dd>
</dl>
<p>Standard formats:  Most of the normal flags and formats are respected.
See standard formats and flags from
<a class="reference external" href="https://man7.org/linux/man-pages/man3/printf.3.html">printf(3)</a>.</p>
<p>Extended (non-standard) formats:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">%s</span></code> - corresponding argument is treated as a <span class="green">String</span>
(converted/coerced if necessary; <span class="green">Objects</span> are converted the
same as for <code class="docutils literal notranslate"><span class="pre">%J</span></code> and <span class="green">Buffers</span>
are printed as is).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%S</span></code> - same as <code class="docutils literal notranslate"><span class="pre">%s</span></code> except an error is thrown if the corresponding argument is
not a <span class="green">String</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%J</span></code> - print <span class="green">Object</span> as JSON.  An optional width (i.e.
<code class="docutils literal notranslate"><span class="pre">printf(&quot;%4J&quot;,</span> <span class="pre">obj);</span></code>) may be given which will print with new lines and
indentation of the specified amount. Thus <code class="docutils literal notranslate"><span class="pre">printf(&quot;%4J&quot;,</span> <span class="pre">obj);</span></code> is
equivalent to <code class="docutils literal notranslate"><span class="pre">printf(&quot;%s&quot;,</span> <span class="pre">JSON.stringify(obj,</span> <span class="pre">null,</span> <span class="pre">4)</span> <span class="pre">);</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%B</span></code> - print contents of a <span class="green">Buffer</span> or <span class="green">String</span> as
base64.</p>
<blockquote>
<div><ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">!</span></code> flag present, it decodes a <span class="green">Buffer</span> or
<span class="green">String</span> containing base64 (throws an error if not valid
base64).</p></li>
<li><p>If a width is given (e.g. <code class="docutils literal notranslate"><span class="pre">%80B</span></code>), a newline will be printed
after every <code class="docutils literal notranslate"><span class="pre">width</span></code> characters.</p></li>
<li><p>If the <code class="docutils literal notranslate"><span class="pre">-</span></code> flag is present and <code class="docutils literal notranslate"><span class="pre">!</span></code> is not present, the output
will be a modified url safe base64 (using <code class="docutils literal notranslate"><span class="pre">-</span></code> and <code class="docutils literal notranslate"><span class="pre">_</span></code> in place
of <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">/</span></code>).</p></li>
<li><p>If the <code class="docutils literal notranslate"><span class="pre">0</span></code> flag is given (e.g. <code class="docutils literal notranslate"><span class="pre">%0B</span></code> or <code class="docutils literal notranslate"><span class="pre">%-080B</span></code>), and <code class="docutils literal notranslate"><span class="pre">!</span></code>
is not present, the output will not be padded with <code class="docutils literal notranslate"><span class="pre">=</span></code> characters.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">%U</span></code> - url encode (or if <code class="docutils literal notranslate"><span class="pre">!</span></code> flag present, decode) a <span class="green">String</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%H</span></code> - html encode (or if <code class="docutils literal notranslate"><span class="pre">!</span></code> flag present, decode) a <span class="green">String</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%P</span></code> - pretty print a <span class="green">String</span> or <span class="green">Buffer</span>.  Expects
text with white space.  Format is <code class="docutils literal notranslate"><span class="pre">%[!][-][i][.w]P</span></code> where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">i</span></code> is the optional level of indentation.  Each output line will be indented
by this amount.  Default is <code class="docutils literal notranslate"><span class="pre">0</span></code>.  If <code class="docutils literal notranslate"><span class="pre">0</span></code>, the indent level for
each paragraph will match the indentation of the first line of the corresponding
paragraph in the input text (number of spaces at beginning of the paragraph).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-</span></code> when used with the <code class="docutils literal notranslate"><span class="pre">!</span></code> flag optionally sets indentation to 0
on all lines regardless of <code class="docutils literal notranslate"><span class="pre">i</span></code> or leading white space on first line.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.w</span></code> where <code class="docutils literal notranslate"><span class="pre">w</span></code> is the optional length of each line (default <code class="docutils literal notranslate"><span class="pre">80</span></code> if not
specified).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">!</span></code> specifies, if present, that newlines are not converted to spaces (but text
after newlines is still indented).  In all cases, a double newline
(â\n\nâ) is considered a separator of paragraphs and is respected.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">%w</span></code> - a shortcut format for <code class="docutils literal notranslate"><span class="pre">%!-.wP</span></code> - where <code class="docutils literal notranslate"><span class="pre">w</span></code> is effectively unlimited.
Remove all leading white space from each line and donât wrap lines.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%C</span></code> - like <code class="docutils literal notranslate"><span class="pre">%c</span></code> but prints multi-byte character.  Example:</p>
<p><code class="docutils literal notranslate"><span class="pre">rampart.utils.printf(&quot;%C&quot;,</span> <span class="pre">0xf09f9983);</span></code> prints <code class="docutils literal notranslate"><span class="pre">ð</span></code>.</p>
<p>Requires a number, 1-4 bytes (<code class="docutils literal notranslate"><span class="pre">0</span></code>-<code class="docutils literal notranslate"><span class="pre">4294967295</span></code>, or <code class="docutils literal notranslate"><span class="pre">0x0</span></code>-<code class="docutils literal notranslate"><span class="pre">0xffffffff</span></code>).</p>
</li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">uenc</span> <span class="o">=</span> <span class="s2">&quot;a+url+encoded+string.+%27%23%24%3f%27&quot;</span><span class="p">;</span>

<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;Encoded: %s\nDecoded: %!U\n&quot;</span><span class="p">,</span> <span class="nx">uenc</span><span class="p">,</span> <span class="nx">uenc</span><span class="p">);</span>

<span class="cm">/* expected output:</span>
<span class="cm">Encoded: a+url+encoded+string.+%27%23%24%3f%27</span>
<span class="cm">Decoded: a url encoded string. &#39;#$?&#39;</span>
<span class="cm">*/</span>

<span class="kd">var</span> <span class="nx">getty</span> <span class="o">=</span> <span class="s2">&quot;Four score and seven years ago our fathers\n&quot;</span> <span class="o">+</span>
         <span class="s2">&quot;brought forth on this continent, a new nation,\n&quot;</span> <span class="o">+</span>
         <span class="s2">&quot;conceived in Liberty, and dedicated to the proposition\n&quot;</span> <span class="o">+</span>
         <span class="s2">&quot;that all men are created equal.&quot;</span>

<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;%5.40P\n&quot;</span><span class="p">,</span> <span class="nx">getty</span><span class="p">);</span>
<span class="cm">/* or</span>
<span class="cm">     rampart.utils.printf(&quot;%*.*P\n&quot;, 5, 40, getty);</span>
<span class="cm">*/</span>

<span class="cm">/* expected output:</span>
<span class="cm">     Four score and seven years ago our</span>
<span class="cm">     fathers brought forth on this</span>
<span class="cm">     continent, a new nation, conceived</span>
<span class="cm">     in Liberty, and dedicated to the</span>
<span class="cm">     proposition that all men are</span>
<span class="cm">     created equal.</span>
<span class="cm">*/</span>

 <span class="kd">var</span> <span class="nx">html</span> <span class="o">=</span>
 <span class="s2">&quot;&lt;html&gt;\n&quot;</span><span class="o">+</span>
 <span class="s2">&quot;  &lt;body&gt;\n&quot;</span><span class="o">+</span>
 <span class="s2">&quot;    &lt;div&gt;\n&quot;</span><span class="o">+</span>
 <span class="s2">&quot;      content\n&quot;</span><span class="o">+</span>
 <span class="s2">&quot;    &lt;/div&gt;\n&quot;</span><span class="o">+</span>
 <span class="s2">&quot;  &lt;/body&gt;\n&quot;</span><span class="o">+</span>
 <span class="s2">&quot;&lt;/html&gt;\n&quot;</span><span class="o">+</span>

 <span class="cm">/* remove leading white space */</span>
 <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;%!-.1000P&quot;</span><span class="p">,</span> <span class="nx">html</span><span class="p">);</span>

 <span class="cm">/* expected output</span>
<span class="cm"> &lt;html&gt;</span>
<span class="cm"> &lt;body&gt;</span>
<span class="cm"> &lt;div&gt;</span>
<span class="cm"> content</span>
<span class="cm"> &lt;/div&gt;</span>
<span class="cm"> &lt;/body&gt;</span>
<span class="cm"> &lt;/html&gt;</span>
<span class="cm"> */</span>
</pre></div>
</div>
</div>
<div class="section" id="sprintf">
<h2>sprintf<a class="headerlink" href="#sprintf" title="Permalink to this headline">Â¶</a></h2>
<p>Same as <code class="docutils literal notranslate"><span class="pre">printf()</span></code> except a <span class="green">String</span> is returned</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">String</span>. The formatted string.</p>
</dd>
</dl>
</div>
<div class="section" id="bprintf">
<h2>bprintf<a class="headerlink" href="#bprintf" title="Permalink to this headline">Â¶</a></h2>
<p>Same as <code class="docutils literal notranslate"><span class="pre">sprintf()</span></code> except a <span class="green">Buffer</span> is returned.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Buffer</span>.  The formatted string as a <span class="green">Buffer</span>.</p>
</dd>
</dl>
</div>
<div class="section" id="fopen">
<h2>fopen<a class="headerlink" href="#fopen" title="Permalink to this headline">Â¶</a></h2>
<p>Open a filehandle for use with <a class="reference internal" href="#fprintf">fprintf</a>(), <a class="reference internal" href="#fclose">fclose</a>(), <a class="reference internal" href="#fseek">fseek</a>(),
<a class="reference internal" href="#rewind">rewind</a>(), <a class="reference internal" href="#ftell">ftell</a>(), <a class="reference internal" href="#fflush">fflush</a>() <a class="reference internal" href="#fread">fread</a>() and <a class="reference internal" href="#fwrite">fwrite</a>().</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Object</span>. The opened filehandle.</p>
</dd>
</dl>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">fopen</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">mode</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">filename</span></code> is a <span class="green">String</span> containing the file to be opened and mode is
a <span class="green">String</span> (one of the following):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;r&quot;</span></code> - Open text file for reading.  The stream is positioned at the
beginning of the file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;r+&quot;</span></code> - Open for reading and writing.  The stream is positioned at the
beginning of the file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code> - Truncate file to zero length or create text file for writing.
The stream is positioned at the beginning of the file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;w+&quot;</span></code> - Open for reading and writing.  The file is created if it does
not exist, otherwise it is truncated.  The stream is positioned at the
beginning of the file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code> - Open for appending (writing at end of file).  The file is
created if it does not exist.  The stream is positioned at the end of the
file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;a+&quot;</span></code> - Open for reading and appending (writing at end of file).  The
file is created if it does not exist.  The initial file position for reading
is at the beginning of the file, but output is always appended to the end of the
file.</p></li>
</ul>
</div>
<div class="section" id="fclose">
<h2>fclose<a class="headerlink" href="#fclose" title="Permalink to this headline">Â¶</a></h2>
<p>Close a previously opened handle <span class="green">Object</span> opened with <a class="reference internal" href="#fopen">fopen</a>().</p>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">fopen</span><span class="p">(</span><span class="s2">&quot;/tmp/out.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">);</span>
<span class="p">...</span>
<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">fclose</span><span class="p">(</span><span class="nx">handle</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="fprintf">
<h2>fprintf<a class="headerlink" href="#fprintf" title="Permalink to this headline">Â¶</a></h2>
<p>Same as <code class="docutils literal notranslate"><span class="pre">printf()</span></code> except output is sent to the file provided by
a <span class="green">String</span> or filehandle <span class="green">Object</span> opened and returned from <a class="reference internal" href="#fopen">fopen</a>().</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">filename</span> <span class="o">=</span> <span class="s2">&quot;/home/user/myfile.txt&quot;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">output</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">fopen</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">mode</span><span class="p">);</span>
<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">fprintf</span><span class="p">(</span><span class="nx">output</span><span class="p">,</span> <span class="nx">fmt</span><span class="p">,</span> <span class="p">...);</span>
<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">fclose</span><span class="p">(</span><span class="nx">output</span><span class="p">);</span>

<span class="cm">/* or */</span>

<span class="kd">var</span> <span class="nx">output</span> <span class="o">=</span> <span class="nx">filename</span><span class="p">;</span>
<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">fprintf</span><span class="p">(</span><span class="nx">output</span><span class="p">,</span> <span class="p">[,</span> <span class="nx">append</span><span class="p">],</span> <span class="nx">fmt</span><span class="p">,</span> <span class="p">...);</span>
<span class="cm">/* file is automatically closed after function returns */</span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">output</span></code> may be a <span class="green">String</span> (a filename), or an <span class="green">Object</span> returned from <a class="reference internal" href="#fopen">fopen</a>().</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fmt</span></code> is a <span class="green">String</span>, a <a class="reference internal" href="#printf">printf</a>() format.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">append</span></code> is an optional <span class="green">Boolean</span> - if <code class="docutils literal notranslate"><span class="pre">true</span></code> append instead of
overwrite an existing file.</p></li>
</ul>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Number</span>. The length in bytes of the printed string.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">fopen</span><span class="p">(</span><span class="s2">&quot;/tmp/out.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">);</span>
<span class="nx">fprintf</span><span class="p">(</span><span class="nx">handle</span><span class="p">,</span> <span class="s2">&quot;A number: %d\n&quot;</span><span class="p">,</span> <span class="mi">123</span><span class="p">);</span>
<span class="nx">fclose</span><span class="p">(</span><span class="nx">handle</span><span class="p">);</span>

<span class="cm">/* OR */</span>

<span class="nx">fprintf</span><span class="p">(</span><span class="s2">&quot;/tmp/out.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;A number: %d\n&quot;</span><span class="p">,</span> <span class="mi">456</span><span class="p">);</span> <span class="cm">/* implicit fclose */</span>
</pre></div>
</div>
</div>
<div class="section" id="fseek">
<h2>fseek<a class="headerlink" href="#fseek" title="Permalink to this headline">Â¶</a></h2>
<p>Set file position for file operations.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">fseek</span><span class="p">(</span><span class="nx">handle</span><span class="p">,</span> <span class="nx">offset</span><span class="p">,</span> <span class="nx">whence</span><span class="p">);</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 20%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>handle</p></td>
<td><p><span class="green">Object</span></p></td>
<td><p>A handle opened with <a class="reference internal" href="#fopen">fopen</a>()</p></td>
</tr>
<tr class="row-odd"><td><p>offset</p></td>
<td><p><span class="green">Number</span></p></td>
<td><p>offset in bytes from whence</p></td>
</tr>
<tr class="row-even"><td rowspan="3"><p>whence</p></td>
<td rowspan="3"><p><span class="green">String</span></p></td>
<td><p>âseek_setâ - measure offset from start of file</p></td>
</tr>
<tr class="row-odd"><td><p>âseek_curâ - measure offset from current position</p></td>
</tr>
<tr class="row-even"><td><p>âseek_endâ - measure offset from end of file.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Return Value:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">undefined</span></code></p>
</dd>
</dl>
<p>Example</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">globalize</span><span class="p">(</span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">,</span>
  <span class="p">[</span><span class="s2">&quot;fopen&quot;</span><span class="p">,</span><span class="s2">&quot;printf&quot;</span><span class="p">,</span><span class="s2">&quot;fprintf&quot;</span><span class="p">,</span><span class="s2">&quot;fseek&quot;</span><span class="p">,</span><span class="s2">&quot;fread&quot;</span><span class="p">]);</span>

<span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">fopen</span><span class="p">(</span><span class="s2">&quot;/tmp/out.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">);</span>

<span class="nx">fprintf</span><span class="p">(</span><span class="nx">handle</span><span class="p">,</span> <span class="s2">&quot;123def&quot;</span><span class="p">);</span>

<span class="nx">fseek</span><span class="p">(</span><span class="nx">handle</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;seek_set&quot;</span><span class="p">);</span>

<span class="nx">fprintf</span><span class="p">(</span><span class="nx">handle</span><span class="p">,</span> <span class="s2">&quot;abc&quot;</span><span class="p">);</span>

<span class="nx">fseek</span><span class="p">(</span><span class="nx">handle</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;seek_set&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">out</span><span class="o">=</span><span class="nx">fread</span><span class="p">(</span><span class="nx">handle</span><span class="p">);</span>

<span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;%s&quot;</span><span class="p">,</span> <span class="nx">out</span><span class="p">);</span>
<span class="cm">/* expect output: &quot;abcdef&quot; */</span>

<span class="nx">fclose</span><span class="p">(</span><span class="nx">handle</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="rewind">
<h2>rewind<a class="headerlink" href="#rewind" title="Permalink to this headline">Â¶</a></h2>
<p>Set the file position to the beginning of the file.  It is equivalent to:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">fseek</span><span class="p">(</span><span class="nx">handle</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;seek_set&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rewind</span><span class="p">(</span><span class="nx">handle</span><span class="p">);</span>
</pre></div>
</div>
<dl class="simple">
<dt>Return Value:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">undefined</span></code></p>
</dd>
</dl>
</div>
<div class="section" id="ftell">
<h2>ftell<a class="headerlink" href="#ftell" title="Permalink to this headline">Â¶</a></h2>
<p>Obtain the current value of the file position for the handle opened with
<a class="reference internal" href="#fopen">fopen</a>().</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">pos</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ftell</span><span class="p">(</span><span class="nx">handle</span><span class="p">);</span>
</pre></div>
</div>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Number</span>. Current position of <code class="docutils literal notranslate"><span class="pre">handle</span></code>.</p>
</dd>
</dl>
</div>
<div class="section" id="fflush">
<h2>fflush<a class="headerlink" href="#fflush" title="Permalink to this headline">Â¶</a></h2>
<p>For output file handles opened with <a class="reference internal" href="#fopen">fopen</a>(), or for
<code class="docutils literal notranslate"><span class="pre">stdout</span></code>/<code class="docutils literal notranslate"><span class="pre">stderr</span></code>/<code class="docutils literal notranslate"><span class="pre">accessLog</span></code>/<code class="docutils literal notranslate"><span class="pre">errorLog</span></code>, <code class="docutils literal notranslate"><span class="pre">fflush()</span></code> forces a
write of buffered data.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">fflush</span><span class="p">(</span><span class="nx">handle</span><span class="p">);</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="cm">/* normally a flush happens automatically</span>
<span class="cm">   when a &#39;\n&#39; is printed.  Since we are using</span>
<span class="cm">   &#39;\r&#39;, flush manually                        */</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;doing #%d\r&quot;</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
   <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">fflush</span><span class="p">(</span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">stdout</span><span class="p">);</span>
   <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;blast off!!!\n&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="fread">
<h2>fread<a class="headerlink" href="#fread" title="Permalink to this headline">Â¶</a></h2>
<p>Read data from a handle opened with <a class="reference internal" href="#fopen">fopen</a>() or <code class="docutils literal notranslate"><span class="pre">stdin</span></code>.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">fread</span><span class="p">(</span><span class="nx">handle</span> <span class="p">[,</span> <span class="nx">chunk_size</span> <span class="p">[,</span> <span class="nx">max_size</span><span class="p">]]);</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 21%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>handle</p></td>
<td><p><span class="green">Object</span></p></td>
<td><p>A handle opened with <a class="reference internal" href="#fopen">fopen</a>()</p></td>
</tr>
<tr class="row-odd"><td><p>chunk_size</p></td>
<td><p><span class="green">Number</span></p></td>
<td><p>Initial size of return <span class="green">Buffer</span> and number
of bytes to read at a time. If the total number of
bytes read is greater, the buffer grows as needed.
If total bytes read is less, the returned buffer
will be reduced in size to match. Default is 4096
if not specified.</p></td>
</tr>
<tr class="row-even"><td><p>max_size</p></td>
<td><p><span class="green">Number</span></p></td>
<td><p>Maximum number of bytes to read.  Unlimited if
not specified.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Buffer</span>. Contents set to the read bytes.</p>
</dd>
</dl>
</div>
<div class="section" id="fwrite">
<h2>fwrite<a class="headerlink" href="#fwrite" title="Permalink to this headline">Â¶</a></h2>
<p>Write data to handle opened with <a class="reference internal" href="#fopen">fopen</a>() or <code class="docutils literal notranslate"><span class="pre">stdout</span></code>/<code class="docutils literal notranslate"><span class="pre">stderr</span></code>.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">nbytes</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">fwrite</span><span class="p">(</span><span class="nx">handle</span><span class="p">,</span> <span class="nx">data</span> <span class="p">[,</span> <span class="nx">max_bytes</span><span class="p">]);</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 21%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>handle</p></td>
<td><p><span class="green">Object</span></p></td>
<td><p>A handle opened with <a class="reference internal" href="#fopen">fopen</a>()</p></td>
</tr>
<tr class="row-odd"><td><p>data</p></td>
<td><p><span class="green">Buffer</span>/
<span class="green">String</span></p></td>
<td><p>The data to be written.</p></td>
</tr>
<tr class="row-even"><td><p>max_bytes</p></td>
<td><p><span class="green">Number</span></p></td>
<td><p>Maximum number of bytes to write. <span class="green">Buffer</span>/
<span class="green">String</span> length if not specified.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Number</span>. Number of bytes written.</p>
</dd>
</dl>
</div>
<div class="section" id="hexify">
<h2>hexify<a class="headerlink" href="#hexify" title="Permalink to this headline">Â¶</a></h2>
<p>Convert data to a hex string.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hexstring</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hexify</span><span class="p">(</span><span class="nx">data</span> <span class="p">[,</span> <span class="nx">upper</span><span class="p">]);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">data</span></code> is the string of bytes (<span class="green">String</span> or <span class="green">Buffer</span>)
to be converted and <code class="docutils literal notranslate"><span class="pre">upper</span></code> is an optional <span class="green">Boolean</span>, which if
<code class="docutils literal notranslate"><span class="pre">true</span></code> prints using upper-case <code class="docutils literal notranslate"><span class="pre">A-F</span></code>.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">String</span>. Each byte in data is converted to its two character hex representation.</p>
</dd>
</dl>
<p>Example:  See <a class="reference internal" href="#dehexify">dehexify</a> below.</p>
</div>
<div class="section" id="dehexify">
<h2>dehexify<a class="headerlink" href="#dehexify" title="Permalink to this headline">Â¶</a></h2>
<p>Convert a hex string to a string of bytes.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">dehexify</span><span class="p">(</span><span class="nx">hexstring</span><span class="p">);</span>
</pre></div>
</div>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Buffer</span>.  Each two character hex representation converted to a
byte in the binary string.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">globalize</span><span class="p">(</span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">s</span><span class="o">=</span><span class="nx">sprintf</span><span class="p">(</span><span class="s2">&quot;%c%c%c%c&quot;</span><span class="p">,</span><span class="mh">0xF0</span><span class="p">,</span> <span class="mh">0x9F</span><span class="p">,</span> <span class="mh">0x98</span><span class="p">,</span> <span class="mh">0x8A</span><span class="p">);</span>

<span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;0x%s\n&quot;</span><span class="p">,</span> <span class="nx">hexify</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">);</span>
<span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;%s\n&quot;</span><span class="p">,</span> <span class="nx">dehexify</span><span class="p">(</span><span class="nx">hexify</span><span class="p">(</span><span class="nx">s</span><span class="p">))</span> <span class="p">);</span>

<span class="cm">/* expected output:</span>
<span class="cm">0xf09f988a</span>
<span class="cm">ð</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="stringtobuffer">
<h2>stringToBuffer<a class="headerlink" href="#stringtobuffer" title="Permalink to this headline">Â¶</a></h2>
<p>Performs a byte-for-byte copy of <span class="green">String</span> into a <span class="green">Buffer</span>.
Also convert one <span class="green">Buffer</span> to a <span class="green">Buffer</span> of another type.
See <code class="docutils literal notranslate"><span class="pre">duk_to_buffer()</span></code> in the
<a class="reference external" href="https://wiki.duktape.org/howtobuffers2x#string-to-buffer-conversion">Duktape documentation</a></p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">buf</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">stringToBuffer</span><span class="p">(</span><span class="nx">data</span> <span class="p">[,</span> <span class="nx">buftype</span> <span class="p">]);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">data</span></code> is a <span class="green">String</span> or <span class="green">Buffer</span> and <code class="docutils literal notranslate"><span class="pre">buftype</span></code> is one of the following
<span class="green">Strings</span>:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;fixed&quot;</span></code> - returned <span class="green">Buffer</span> is a âfixedâ <span class="green">Buffer</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;dynamic&quot;</span></code> - returned <span class="green">Buffer</span> is a âdynamicâ <span class="green">Buffer</span>.</p></li>
</ul>
</div></blockquote>
<p>If no <code class="docutils literal notranslate"><span class="pre">buftype</span></code> is given and <code class="docutils literal notranslate"><span class="pre">data</span></code> is a <span class="green">Buffer</span>, the same type of <span class="green">Buffer</span>
is returned.  If no <code class="docutils literal notranslate"><span class="pre">buftype</span></code> is given and <code class="docutils literal notranslate"><span class="pre">data</span></code> is a <span class="green">String</span>, a âfixedâ
<span class="green">Buffer</span> is returned.</p>
<p>See <a class="reference external" href="https://wiki.duktape.org/howtobuffers2x">Duktape documentation</a> for
more information on different types of <span class="green">Buffers</span>.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Buffer</span>.  Contents of <span class="green">String</span>/<span class="green">Buffer</span> copied to a new <span class="green">Buffer</span> <span class="green">Object</span>.</p>
</dd>
</dl>
</div>
<div class="section" id="buffertostring">
<h2>bufferToString<a class="headerlink" href="#buffertostring" title="Permalink to this headline">Â¶</a></h2>
<p>Performs a 1:1 copy of the contents of a <span class="green">Buffer</span> to a <span class="green">String</span>.</p>
<p>See <code class="docutils literal notranslate"><span class="pre">duk_buffer_to_string()</span></code> in the
<a class="reference external" href="https://wiki.duktape.org/howtobuffers2x#buffer-to-string-conversion">Duktape documentation</a></p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">bufferToString</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</pre></div>
</div>
<p>Where data is a <span class="green">Buffer</span> <span class="green">Object</span>.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">String</span>.  Contents of <span class="green">Buffer</span> copied to a new <span class="green">String</span>.</p>
</dd>
</dl>
</div>
<div class="section" id="objecttoquery">
<h2>objectToQuery<a class="headerlink" href="#objecttoquery" title="Permalink to this headline">Â¶</a></h2>
<p>Convert an <span class="green">Object</span> of key/value pairs to a <span class="green">String</span> suitable for use as a query
string in an HTTP request.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">qs</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">objectToQuery</span><span class="p">(</span><span class="nx">kvObj</span> <span class="p">[,</span> <span class="nx">arrayOpt</span><span class="p">]);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">kvObj</span></code> is an <span class="green">Object</span> containing the key/value pairs and <code class="docutils literal notranslate"><span class="pre">arrayOpt</span></code>
controls how <span class="green">Array</span> values are treated, and is
one of the following:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">repeat</span></code> - default value if not specified.  Repeat the key in the
query string with each value from the array.  Example:
<code class="docutils literal notranslate"><span class="pre">{key1:</span> <span class="pre">[&quot;val1&quot;,</span> <span class="pre">&quot;val2&quot;]}</span></code> becomes <code class="docutils literal notranslate"><span class="pre">key1=val1&amp;key1=val2</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bracket</span></code> - similar to repeat, except url encoded <code class="docutils literal notranslate"><span class="pre">[]</span></code> is appended
to the keys.  Example: <code class="docutils literal notranslate"><span class="pre">{key1:</span> <span class="pre">[&quot;val1&quot;,</span> <span class="pre">&quot;val2&quot;]}</span></code> becomes
<code class="docutils literal notranslate"><span class="pre">key1%5B%5D=val1&amp;key1%5B%5D=val2</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">comma</span></code> - One key with corresponding values separated by a <code class="docutils literal notranslate"><span class="pre">,</span></code>
(comma).  Example: <code class="docutils literal notranslate"><span class="pre">{key1:</span> <span class="pre">[&quot;val1&quot;,</span> <span class="pre">&quot;val2&quot;]}</span></code> becomes
<code class="docutils literal notranslate"><span class="pre">key1=val1,val2</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">json</span></code> - encode array as JSON.  Example:
<code class="docutils literal notranslate"><span class="pre">{key1:</span> <span class="pre">[&quot;val1&quot;,</span> <span class="pre">&quot;val2&quot;]}</span></code> becomes
<code class="docutils literal notranslate"><span class="pre">key1=%5b%22val1%22%2c%22val2%22%5d</span></code>.</p></li>
</ul>
</div></blockquote>
<p>Note that the values <code class="docutils literal notranslate"><span class="pre">null</span></code> and <code class="docutils literal notranslate"><span class="pre">undefined</span></code> will be translated as the
<span class="green">Strings</span> <code class="docutils literal notranslate"><span class="pre">&quot;null&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;undefined&quot;</span></code> respectively.  Also values which
themselves are <span class="green">Objects</span> will be converted to JSON.</p>
</div>
<div class="section" id="querytoobject">
<h2>queryToObject<a class="headerlink" href="#querytoobject" title="Permalink to this headline">Â¶</a></h2>
<p>Convert a query string to an <span class="green">Object</span>.  Reverses the process, with caveats, of
<a class="reference internal" href="#objecttoquery">objectToQuery</a>().</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">kvObj</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">queryToObject</span><span class="p">(</span><span class="nx">qs</span><span class="p">);</span>
</pre></div>
</div>
<p>Caveats:</p>
<ul class="simple">
<li><p>All primitive values will be converted to <span class="green">Strings</span>.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">repeat</span></code> or <code class="docutils literal notranslate"><span class="pre">bracket</span></code> was used to create the
query string, all values will be returned as strings (even if an <span class="green">Array</span> of
<span class="green">Numbers</span> was given to <a class="reference internal" href="#objecttoquery">objectToQuery</a>().</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">comma</span></code> was used to create the query string, no separation of comma
separated values will occur and the entire value will be returned as a <span class="green">String</span>.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">json</span></code> was used, numeric values will be preserved as <span class="green">Numbers</span>.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">obj</span><span class="o">=</span> <span class="p">{</span>
  <span class="nx">key1</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nx">key2</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span>
  <span class="nx">key3</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;val1&quot;</span><span class="p">,</span><span class="s2">&quot;val2&quot;</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;repeat&quot;</span><span class="p">,</span> <span class="s2">&quot;bracket&quot;</span><span class="p">,</span> <span class="s2">&quot;comma&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span> <span class="p">];</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="mi">4</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">qs</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">objectToQuery</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">type</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
    <span class="kd">var</span> <span class="nx">qsobj</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">queryToObject</span><span class="p">(</span><span class="nx">qs</span><span class="p">);</span>
    <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;qToO(\n     &#39;%s&#39;\n    ) = \n%s\n&quot;</span><span class="p">,</span> <span class="nx">qs</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">qsobj</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="mi">3</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/* expected output:</span>
<span class="cm">qToO(</span>
<span class="cm">     &#39;key1=null&amp;key2=1&amp;key2=2&amp;key2=3&amp;key3=val1&amp;key3=val2&#39;</span>
<span class="cm">    ) =</span>
<span class="cm">{</span>
<span class="cm">   &quot;key1&quot;: &quot;null&quot;,</span>
<span class="cm">   &quot;key2&quot;: [</span>
<span class="cm">      &quot;1&quot;,</span>
<span class="cm">      &quot;2&quot;,</span>
<span class="cm">      &quot;3&quot;</span>
<span class="cm">   ],</span>
<span class="cm">   &quot;key3&quot;: [</span>
<span class="cm">      &quot;val1&quot;,</span>
<span class="cm">      &quot;val2&quot;</span>
<span class="cm">   ]</span>
<span class="cm">}</span>
<span class="cm">qToO(</span>

<span class="cm">&#39;key1=null&amp;key2%5B%5D=1&amp;key2%5B%5D=2&amp;key2%5B%5D=3&amp;key3%5B%5D=val1&amp;key3%5B%5D=val2&#39;</span>
<span class="cm">    ) =</span>
<span class="cm">{</span>
<span class="cm">   &quot;key1&quot;: &quot;null&quot;,</span>
<span class="cm">   &quot;key2&quot;: [</span>
<span class="cm">      &quot;1&quot;,</span>
<span class="cm">      &quot;2&quot;,</span>
<span class="cm">      &quot;3&quot;</span>
<span class="cm">   ],</span>
<span class="cm">   &quot;key3&quot;: [</span>
<span class="cm">      &quot;val1&quot;,</span>
<span class="cm">      &quot;val2&quot;</span>
<span class="cm">   ]</span>
<span class="cm">}</span>
<span class="cm">qToO(</span>
<span class="cm">     &#39;key1=null&amp;key2=1,2,3&amp;key3=val1,val2&#39;</span>
<span class="cm">    ) =</span>
<span class="cm">{</span>
<span class="cm">   &quot;key1&quot;: &quot;null&quot;,</span>
<span class="cm">   &quot;key2&quot;: &quot;1,2,3&quot;,</span>
<span class="cm">   &quot;key3&quot;: &quot;val1,val2&quot;</span>
<span class="cm">}</span>
<span class="cm">qToO(</span>
<span class="cm">     &#39;key1=null&amp;key2=%5b1%2c2%2c3%5d&amp;key3=%5b%22val1%22%2c%22val2%22%5d&#39;</span>
<span class="cm">    ) =</span>
<span class="cm">{</span>
<span class="cm">   &quot;key1&quot;: &quot;null&quot;,</span>
<span class="cm">   &quot;key2&quot;: [</span>
<span class="cm">      1,</span>
<span class="cm">      2,</span>
<span class="cm">      3</span>
<span class="cm">   ],</span>
<span class="cm">   &quot;key3&quot;: [</span>
<span class="cm">      &quot;val1&quot;,</span>
<span class="cm">      &quot;val2&quot;</span>
<span class="cm">   ]</span>
<span class="cm">}</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="readfile">
<h2>readFile<a class="headerlink" href="#readfile" title="Permalink to this headline">Â¶</a></h2>
<p>Read the contents of a file.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">contents</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">readFile</span><span class="p">({</span>
   <span class="nx">file</span><span class="o">:</span> <span class="nx">filename</span>
   <span class="p">[,</span> <span class="nx">offset</span><span class="o">:</span> <span class="nx">offsetPos</span><span class="p">]</span>
   <span class="p">[,</span> <span class="nx">length</span><span class="o">:</span> <span class="nx">rLength</span><span class="p">]</span>
   <span class="p">[,</span> <span class="nx">retString</span><span class="o">:</span> <span class="nx">return_str</span><span class="p">]</span>
<span class="p">});</span>

<span class="cm">/* or */</span>

<span class="kd">var</span> <span class="nx">contents</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">filename</span> <span class="p">[,</span> <span class="nx">offsetPos</span> <span class="p">[,</span> <span class="nx">rLength</span><span class="p">]]</span> <span class="p">[,</span> <span class="nx">return_str</span><span class="p">]);</span>
</pre></div>
</div>
<p>Where values <code class="docutils literal notranslate"><span class="pre">filename</span></code> and optional values
<code class="docutils literal notranslate"><span class="pre">offsetPos</span></code>, <code class="docutils literal notranslate"><span class="pre">rLength</span></code> and/or <code class="docutils literal notranslate"><span class="pre">return_str</span></code> are:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 19%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>filename</p></td>
<td><p><span class="green">String</span></p></td>
<td><p>Path to the file to be read</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>offsetPos</p></td>
<td rowspan="2"><p><span class="green">Number</span></p></td>
<td><p>If positive, start position to read from beginning of file.</p></td>
</tr>
<tr class="row-even"><td><p>If negative, start position to read from end of file.</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>rLength</p></td>
<td rowspan="2"><p><span class="green">Number</span></p></td>
<td><p>If greater than zero, amount in bytes to be read.</p></td>
</tr>
<tr class="row-even"><td><p>If 0 or negative, position from end of file to stop reading.</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>return_str</p></td>
<td rowspan="2"><p><span class="green">Boolean</span></p></td>
<td><p>If not set, or <code class="docutils literal notranslate"><span class="pre">false</span></code>, return a <span class="green">Buffer</span>.</p></td>
</tr>
<tr class="row-even"><td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code>, return contents as a <span class="green">String</span>.
May be truncated if the file contains null characters.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Buffer</span> or <span class="green">String</span>.  The contents of the file.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">fprintf</span><span class="p">(</span><span class="s2">&quot;/tmp/file.txt&quot;</span><span class="p">,</span><span class="s2">&quot;This is a text file\n&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">txt</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">readFile</span><span class="p">({</span>
   <span class="nx">filename</span><span class="o">:</span>  <span class="s2">&quot;/tmp/file.txt&quot;</span><span class="p">,</span>
   <span class="nx">offset</span><span class="o">:</span>    <span class="mi">10</span><span class="p">,</span>
   <span class="nx">length</span><span class="o">:</span>    <span class="o">-</span><span class="mi">6</span><span class="p">,</span>
   <span class="nx">retString</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">});</span>

<span class="cm">/* or var txt = rampart.utils.readFile(&quot;/tmp/file.txt&quot;, 10, -6, true); */</span>

<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;&#39;%s&#39;\n&quot;</span><span class="p">,</span> <span class="nx">txt</span><span class="p">);</span>

<span class="cm">/* expected output:</span>
<span class="cm">&#39;text&#39;</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="trim">
<h2>trim<a class="headerlink" href="#trim" title="Permalink to this headline">Â¶</a></h2>
<p>Remove whitespace characters from beginning and end of a <span class="green">String</span>.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">trimmed</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">str</span></code> is a <span class="green">String</span>.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">String</span>. <code class="docutils literal notranslate"><span class="pre">str</span></code> with whitespace removed from beginning and end.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="s2">&quot;\n a line of text \n&quot;</span><span class="p">;</span>
<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;&#39;%s&#39;&quot;</span><span class="p">,</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">str</span><span class="p">));</span>
<span class="cm">/* expected output:</span>
<span class="cm">&#39;a line of text&#39;</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="readline">
<h2>readLine<a class="headerlink" href="#readline" title="Permalink to this headline">Â¶</a></h2>
<p>Read a text file line-by-line.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">rl</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">readLine</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">line</span><span class="o">=</span><span class="nx">rl</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">file</span></code> is a <span class="green">String</span> (name of file to be read) and return <span class="green">Object</span>
contains the property <code class="docutils literal notranslate"><span class="pre">next</span></code>, a <span class="green">Function</span> to retrieve and return the next
line of text in the file.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Object</span>.  Property <code class="docutils literal notranslate"><span class="pre">next</span></code> of the return <span class="green">Object</span> is a
<span class="green">Function</span> which retrieves and returns the next line of text in
the file.  After the last line of <code class="docutils literal notranslate"><span class="pre">file</span></code> is returned, subsequent calls
to <code class="docutils literal notranslate"><span class="pre">next</span></code> will return <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">rl</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">readLine</span><span class="p">(</span><span class="s2">&quot;./myfile.txt&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">line</span><span class="p">,</span> <span class="nx">firstline</span><span class="p">,</span> <span class="nx">lastline</span><span class="p">;</span>

<span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">line</span><span class="o">=</span><span class="nx">rl</span><span class="p">.</span><span class="nx">next</span><span class="p">())</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span>
        <span class="nx">firstline</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">line</span><span class="p">);</span>
    <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
    <span class="nx">lastline</span> <span class="o">=</span> <span class="nx">line</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;%s\n%s\n&quot;</span><span class="p">,</span> <span class="nx">firstline</span><span class="p">,</span> <span class="nx">lastline</span><span class="p">);</span>

<span class="cm">/* expected output: first and last line of file &quot;./myfile.txt&quot; */</span>
</pre></div>
</div>
</div>
<div class="section" id="stat">
<h2>stat<a class="headerlink" href="#stat" title="Permalink to this headline">Â¶</a></h2>
<p>Return information on a file.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">st</span> <span class="o">=</span> <span class="nx">stat</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">file</span></code> is a <span class="green">String</span> (name of file).</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Boolean</span>/<span class="green">Object</span>. <code class="docutils literal notranslate"><span class="pre">false</span></code> if file does not exist.  Otherwise an <span class="green">Object</span> with the following
properties:</p>
</dd>
</dl>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;dev&quot;</span><span class="o">:</span>               <span class="nb">Number</span><span class="p">,</span>
   <span class="s2">&quot;ino&quot;</span><span class="o">:</span>               <span class="nb">Number</span><span class="p">,</span>
   <span class="s2">&quot;mode&quot;</span><span class="o">:</span>              <span class="nb">Number</span><span class="p">,</span>
   <span class="s2">&quot;nlink&quot;</span><span class="o">:</span>             <span class="nb">Number</span><span class="p">,</span>
   <span class="s2">&quot;uid&quot;</span><span class="o">:</span>               <span class="nb">Number</span><span class="p">,</span>
   <span class="s2">&quot;gid&quot;</span><span class="o">:</span>               <span class="nb">Number</span><span class="p">,</span>
   <span class="s2">&quot;rdev&quot;</span><span class="o">:</span>              <span class="nb">Number</span><span class="p">,</span>
   <span class="s2">&quot;size&quot;</span><span class="o">:</span>              <span class="nb">Number</span><span class="p">,</span>
   <span class="s2">&quot;blksize&quot;</span><span class="o">:</span>           <span class="nb">Number</span><span class="p">,</span>
   <span class="s2">&quot;blocks&quot;</span><span class="o">:</span>            <span class="nb">Number</span><span class="p">,</span>
   <span class="s2">&quot;atime&quot;</span><span class="o">:</span>             <span class="nb">Date</span><span class="p">,</span>
   <span class="s2">&quot;mtime&quot;</span><span class="o">:</span>             <span class="nb">Date</span><span class="p">,</span>
   <span class="s2">&quot;ctime&quot;</span><span class="o">:</span>             <span class="nb">Date</span><span class="p">,</span>
   <span class="s2">&quot;isBlockDevice&quot;</span><span class="o">:</span>     <span class="nb">Boolean</span><span class="p">,</span>
   <span class="s2">&quot;isCharacterDevice&quot;</span><span class="o">:</span> <span class="nb">Boolean</span><span class="p">,</span>
   <span class="s2">&quot;isDirectory&quot;</span><span class="o">:</span>       <span class="nb">Boolean</span><span class="p">,</span>
   <span class="s2">&quot;isFIFO&quot;</span><span class="o">:</span>            <span class="nb">Boolean</span><span class="p">,</span>
   <span class="s2">&quot;isFile&quot;</span><span class="o">:</span>            <span class="nb">Boolean</span><span class="p">,</span>
   <span class="s2">&quot;isSocket&quot;</span><span class="o">:</span>          <span class="nb">Boolean</span>
<span class="p">}</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://man7.org/linux/man-pages/man2/stat.2.html">stat (2)</a> for the
meaning of each property.  The <code class="docutils literal notranslate"><span class="pre">is*()</span></code> functions return <code class="docutils literal notranslate"><span class="pre">true</span></code> if the
corresponding file property is true.</p>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">st</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">stat</span><span class="p">(</span><span class="s2">&quot;/tmp/file.txt&quot;</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="nx">st</span><span class="p">)</span> <span class="p">{</span>
   <span class="cm">/* print file mode as octal number */</span>
   <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;%o\n&quot;</span><span class="p">,</span> <span class="nx">st</span><span class="p">.</span><span class="nx">mode</span> <span class="o">&amp;</span> <span class="mi">0777</span><span class="p">)</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;file /tmp.file.txt does not exist&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="cm">/* expected output: 644 */</span>
</pre></div>
</div>
</div>
<div class="section" id="lstat">
<h2>lstat<a class="headerlink" href="#lstat" title="Permalink to this headline">Â¶</a></h2>
<p>Same as <a class="reference internal" href="#stat">stat</a>() except if <code class="docutils literal notranslate"><span class="pre">file</span></code> is a link, return information about the link itself.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p>Same as <a class="reference internal" href="#stat">stat</a>() with the addition of the property/function
<code class="docutils literal notranslate"><span class="pre">isSymbolicLink()</span></code> to test whether the file is a symbolic link.</p>
</dd>
</dl>
</div>
<div class="section" id="exec">
<h2>exec<a class="headerlink" href="#exec" title="Permalink to this headline">Â¶</a></h2>
<p>Run an executable file.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">command</span> <span class="p">[,</span> <span class="nx">options</span><span class="p">]</span> <span class="p">[,</span><span class="nx">arg1</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">,</span> <span class="p">...,</span> <span class="nx">argn</span><span class="p">]</span> <span class="p">);</span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">command</span></code> - <span class="green">String</span>. An absolute path to an executable or the name of
an executable that may be found in the current <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code> - <span class="green">Object</span>. Containing the following properties:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code> - <span class="green">Number</span>: Maximum amount of time in milliseconds before
the process is automatically killed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">killSignal</span></code> - <span class="green">Number</span>. If timeout is reached, use this signal</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">background</span></code> - <span class="green">Boolean</span>.  Whether to execute detached and return
immediately.  <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> below will be set to <code class="docutils literal notranslate"><span class="pre">null</span></code>.  Any <code class="docutils literal notranslate"><span class="pre">timeout</span></code>
value is ignored.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stdin</span></code> - <span class="green">String</span> or <span class="green">Buffer</span>. If specified, the content is piped to the
command as stdin.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">argn</span></code> - <span class="green">String</span>/<span class="green">Number</span>/<span class="green">Object</span>/<span class="green">Boolean</span>/<span class="green">Null</span> - Arguments to be passed to
<code class="docutils literal notranslate"><span class="pre">command</span></code>.  Non-Strings are converted to a <span class="green">String</span> (e.g. âtrueâ, ânullâ,
â42â or for <span class="green">Object</span>, the equivalent of <code class="docutils literal notranslate"><span class="pre">JSON.stringify(obj)</span></code>).</p></li>
</ul>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Object</span>.  Properties as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stdout</span></code> - <span class="green">String</span>. Output of command if <code class="docutils literal notranslate"><span class="pre">background</span></code> is not set <code class="docutils literal notranslate"><span class="pre">false</span></code>.
Otherwise <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stderr</span></code> - <span class="green">String</span>. stderr output of command if <code class="docutils literal notranslate"><span class="pre">background</span></code> is not set <code class="docutils literal notranslate"><span class="pre">false</span></code>.
Otherwise <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exitStatus</span></code> - <span class="green">Number</span>.  The returned exit status of the command.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timedOut</span></code> - <span class="green">Boolean</span>.  Set true if the program was killed after
<code class="docutils literal notranslate"><span class="pre">timeout</span></code> milliseconds has elapsed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pid</span></code> - <span class="green">Number</span>. Process id of the executed command.</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="shell">
<h2>shell<a class="headerlink" href="#shell" title="Permalink to this headline">Â¶</a></h2>
<p>Execute <span class="green">String</span> in a bash shell. Equivalent to
<code class="docutils literal notranslate"><span class="pre">rampart.utils.exec(&quot;bash&quot;,</span> <span class="pre">&quot;-c&quot;,</span> <span class="pre">shellcmd);</span></code>.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">shell</span><span class="p">(</span><span class="nx">shellcmd</span><span class="p">[,</span> <span class="nx">options</span><span class="p">]);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">shellcmd</span></code> is a <span class="green">String</span> containing the command and arguments to be
passed to bash and <code class="docutils literal notranslate"><span class="pre">options</span></code> are the same as specified for <a class="reference internal" href="#exec">exec</a>.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p>Same as <a class="reference internal" href="#exec">exec</a>().</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">shell</span><span class="p">(</span><span class="s1">&#39;echo -n &quot;hello&quot;; echo &quot;hi&quot; 1&gt;&amp;2;&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">ret</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">3</span><span class="p">));</span>

<span class="cm">/* expected output:</span>
<span class="cm">{</span>
<span class="cm">   &quot;stdout&quot;: &quot;hello&quot;,</span>
<span class="cm">   &quot;stderr&quot;: &quot;hi\n&quot;,</span>
<span class="cm">   &quot;timedOut&quot;: false,</span>
<span class="cm">   &quot;exitStatus&quot;: 0,</span>
<span class="cm">   &quot;pid&quot;: 24658</span>
<span class="cm">}</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="kill">
<h2>kill<a class="headerlink" href="#kill" title="Permalink to this headline">Â¶</a></h2>
<p>Terminate a process or send a signal.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">kill</span><span class="p">(</span><span class="nx">pid</span> <span class="p">[,</span> <span class="nx">signal</span><span class="p">]);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">pid</span></code> is a <span class="green">Number</span>, the process id of process to be sent a signal and
<code class="docutils literal notranslate"><span class="pre">signal</span></code> is a <span class="green">Number</span>, the signal to send.  If <code class="docutils literal notranslate"><span class="pre">signal</span></code> is not specified,
<code class="docutils literal notranslate"><span class="pre">15</span></code> (<code class="docutils literal notranslate"><span class="pre">SIGTERM</span></code>) is used.  See manual page for kill(1) for a list of
signals, which may vary by platform.  Setting <code class="docutils literal notranslate"><span class="pre">signal</span></code> to <code class="docutils literal notranslate"><span class="pre">0</span></code> sends no
signal, but checks for the existence of the process identified by <code class="docutils literal notranslate"><span class="pre">pid</span></code>.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Boolean</span>.  <code class="docutils literal notranslate"><span class="pre">true</span></code> if the signal was successfully sent.  <code class="docutils literal notranslate"><span class="pre">false</span></code> if there was
an error or process does not exist.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="s2">&quot;sleep&quot;</span><span class="p">,</span> <span class="s2">&quot;100&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">background</span><span class="o">:</span><span class="kc">true</span><span class="p">});</span>
<span class="kd">var</span> <span class="nx">pid</span><span class="o">=</span><span class="nx">ret</span><span class="p">.</span><span class="nx">pid</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">kill</span><span class="p">(</span><span class="nx">pid</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;process is still running&quot;</span><span class="p">);</span>
    <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">kill</span><span class="p">(</span><span class="nx">pid</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">kill</span><span class="p">(</span><span class="nx">pid</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span>
       <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;and now is dead&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;not running&quot;</span><span class="p">);</span>
<span class="cm">/* expected output:</span>
<span class="cm">   process is still running</span>
<span class="cm">   and now is dead</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="getcwd">
<h2>getcwd<a class="headerlink" href="#getcwd" title="Permalink to this headline">Â¶</a></h2>
<p>Return the current working directory as a <span class="green">String</span>.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">getcwd</span><span class="p">();</span>
</pre></div>
</div>
<dl class="simple">
<dt>Return Value:</dt><dd><p>A <span class="green">String</span>, the current working directory of the script.</p>
</dd>
</dl>
</div>
<div class="section" id="chdir">
<h2>chdir<a class="headerlink" href="#chdir" title="Permalink to this headline">Â¶</a></h2>
<p>Change the current working directory.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">chdir</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">path</span></code> is a <span class="green">String</span>, the location of the new working
directory.  This command throws an error if it fails to change to the
specified directory.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">undefined</span></code>.</p>
</dd>
</dl>
</div>
<div class="section" id="mkdir">
<h2>mkdir<a class="headerlink" href="#mkdir" title="Permalink to this headline">Â¶</a></h2>
<p>Create a directory.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">mkdir</span><span class="p">(</span><span class="nx">path</span> <span class="p">[,</span> <span class="nx">mode</span><span class="p">]);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">path</span></code> is a <span class="green">String</span>, the directory to be created and <code class="docutils literal notranslate"><span class="pre">mode</span></code> is a
<span class="green">Number</span> or <span class="green">String</span>, the octal permissions mode. Any parent directories which
do not exist will also be created.  Throws error if lacking permissions or
if another error was encountered.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">mode</span></code> is normally given as an octal.  As such it can be, e.g.,
<code class="docutils literal notranslate"><span class="pre">0755</span></code> (octal number) or <code class="docutils literal notranslate"><span class="pre">&quot;755&quot;</span></code> (<span class="green">String</span> representation of an octal
number), but <code class="docutils literal notranslate"><span class="pre">755</span></code>, as a decimal number may not work as intended.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">undefined</span></code>.</p>
</dd>
</dl>
</div>
<div class="section" id="rmdir">
<h2>rmdir<a class="headerlink" href="#rmdir" title="Permalink to this headline">Â¶</a></h2>
<p>Remove an empty directory.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">rmdir</span><span class="p">(</span><span class="nx">path</span> <span class="p">[,</span> <span class="nx">recurse</span><span class="p">]);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">path</span></code> is a <span class="green">String</span>, the directory to be removed and <code class="docutils literal notranslate"><span class="pre">recurse</span></code> is an
optional <span class="green">Boolean</span>, which if <code class="docutils literal notranslate"><span class="pre">true</span></code>, parent directories explicitly present in
<code class="docutils literal notranslate"><span class="pre">path</span></code> will also be removed.  Throws an error if the directory cannot be
removed (.e.g., not empty or lacking permission).</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">undefined</span></code>.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="cm">/* make the following directories in the</span>
<span class="cm">   current working directory             */</span>
<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">mkdir</span><span class="p">(</span><span class="s2">&quot;p1/p2/p3&quot;</span><span class="p">,</span><span class="mi">0755</span><span class="p">);</span>

<span class="cm">/* remove the directories recursively */</span>
<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">rmdir</span><span class="p">(</span><span class="s2">&quot;p1/p2/p3&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="readdir">
<h2>readdir<a class="headerlink" href="#readdir" title="Permalink to this headline">Â¶</a></h2>
<p>Get listing of directory files.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">readdir</span><span class="p">(</span><span class="nx">path</span> <span class="p">[,</span> <span class="nx">showhidden</span><span class="p">]);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">path</span></code> is a <span class="green">String</span>, the directory whose content will be listed and
<code class="docutils literal notranslate"><span class="pre">showhidden</span></code> is a <span class="green">Boolean</span>, which if <code class="docutils literal notranslate"><span class="pre">true</span></code>, files or directories
beginning with <code class="docutils literal notranslate"><span class="pre">.</span></code> (hidden files) will be included in the return value.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><span class="green">Array</span>.  An <span class="green">Array</span> of <span class="green">Strings</span>, each filename in the directory.</p>
</dd>
</dl>
</div>
<div class="section" id="copyfile">
<h2>copyFile<a class="headerlink" href="#copyfile" title="Permalink to this headline">Â¶</a></h2>
<p>Make a copy of a file.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">copyFile</span><span class="p">({</span><span class="nx">src</span><span class="o">:</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">dest</span><span class="o">:</span> <span class="nx">destination</span> <span class="p">[,</span> <span class="nx">overwrite</span><span class="o">:</span> <span class="nx">overWrite</span><span class="p">]});</span>

<span class="cm">/* or */</span>

<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">copyFile</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">destination</span> <span class="p">[,</span> <span class="nx">overWrite</span><span class="p">]);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">source</span></code> is a <span class="green">String</span>, the file to be copied, <code class="docutils literal notranslate"><span class="pre">destination</span></code> is a
<span class="green">String</span>, the name of the target file and optional <code class="docutils literal notranslate"><span class="pre">overWrite</span></code> is a <span class="green">Boolean</span>
which if <code class="docutils literal notranslate"><span class="pre">true</span></code> will overwrite <code class="docutils literal notranslate"><span class="pre">destination</span></code> if it exists.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">undefined</span></code>.</p>
</dd>
</dl>
</div>
<div class="section" id="rmfile">
<h2>rmFile<a class="headerlink" href="#rmfile" title="Permalink to this headline">Â¶</a></h2>
<p>Delete a file.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">rmFile</span><span class="p">(</span><span class="nx">filename</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">filename</span></code> is a <span class="green">String</span>, the name of the file to be removed.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">undefined</span></code>.</p>
</dd>
</dl>
</div>
<div class="section" id="link">
<h2>link<a class="headerlink" href="#link" title="Permalink to this headline">Â¶</a></h2>
<p>Create a hard link.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">link</span><span class="p">({</span><span class="nx">src</span><span class="o">:</span> <span class="nx">sourceName</span><span class="p">,</span> <span class="nx">target</span><span class="o">:</span> <span class="nx">targetName</span><span class="p">});</span>

<span class="cm">/* or */</span>

<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">link</span><span class="p">(</span><span class="nx">sourceName</span><span class="p">,</span> <span class="nx">targetName</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">sourceName</span></code> is the existing file and <code class="docutils literal notranslate"><span class="pre">targetName</span></code> is the name of
the to-be-created link.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">undefined</span></code>.</p>
</dd>
</dl>
</div>
<div class="section" id="symlink">
<h2>symlink<a class="headerlink" href="#symlink" title="Permalink to this headline">Â¶</a></h2>
<p>Create a soft (symbolic) link.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">symlink</span><span class="p">({</span><span class="nx">src</span><span class="o">:</span> <span class="nx">sourceName</span><span class="p">,</span> <span class="nx">target</span><span class="o">:</span> <span class="nx">targetName</span><span class="p">});</span>

<span class="cm">/* or */</span>

<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">symlink</span><span class="p">(</span><span class="nx">sourceName</span><span class="p">,</span> <span class="nx">targetName</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">sourceName</span></code> is the existing file and <code class="docutils literal notranslate"><span class="pre">targetName</span></code> is the name of
the to-be-created symlink.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">undefined</span></code>.</p>
</dd>
</dl>
</div>
<div class="section" id="chmod">
<h2>chmod<a class="headerlink" href="#chmod" title="Permalink to this headline">Â¶</a></h2>
<p>Change the file mode bits of a file or directory.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">chmod</span><span class="p">(</span><span class="nx">path</span> <span class="p">[,</span> <span class="nx">mode</span><span class="p">]);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">path</span></code> is a <span class="green">String</span>, the file or directory upon which to be operated
and <code class="docutils literal notranslate"><span class="pre">mode</span></code> is a <span class="green">Number</span> or <span class="green">String</span>, the octal permissions mode.  Any parent
directories which do not exist will also be created.  Throws error if
lacking permissions or if another error was encountered.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">mode</span></code> is normally given as an octal.  As such it can be, e.g.,
<code class="docutils literal notranslate"><span class="pre">0755</span></code> (octal number) or <code class="docutils literal notranslate"><span class="pre">&quot;755&quot;</span></code> (<span class="green">String</span> representation of an octal
number), but <code class="docutils literal notranslate"><span class="pre">755</span></code>, as a decimal number may not work as intended.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">undefined</span></code>.</p>
</dd>
</dl>
</div>
<div class="section" id="realpath">
<h2>realPath<a class="headerlink" href="#realpath" title="Permalink to this headline">Â¶</a></h2>
<p>Find the canonical form of a file system path.  The path or file must exist.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">realPath</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">path</span></code> is a <span class="green">String</span>, not necessarily in canonical form.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p>A <span class="green">String</span>, the canonical form of the path.</p>
</dd>
</dl>
</div>
<div class="section" id="touch">
<h2>touch<a class="headerlink" href="#touch" title="Permalink to this headline">Â¶</a></h2>
<p>Create an empty file, or update the access timestamp of an existing file.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">touch</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>

<span class="cm">/* or */</span>

<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">touch</span><span class="p">({</span>
   <span class="nx">path</span><span class="o">:</span> <span class="nx">file</span>
   <span class="p">[,</span> <span class="nx">nocreate</span><span class="o">:</span> <span class="nx">noCreate</span><span class="p">]</span>
   <span class="p">[,</span> <span class="nx">setaccess</span><span class="o">:</span> <span class="nx">setAccess</span><span class="p">]</span>
   <span class="p">[,</span> <span class="nx">setmodify</span><span class="o">:</span> <span class="nx">setModify</span><span class="p">]</span>
   <span class="p">[,</span> <span class="nx">reference</span><span class="o">:</span> <span class="nx">referenceFile</span><span class="p">]</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">file</span></code> is a <span class="green">String</span>, the name of the file upon which to operate,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">noCreate</span></code> is a <span class="green">Boolean</span> (default <code class="docutils literal notranslate"><span class="pre">false</span></code>) which, if <code class="docutils literal notranslate"><span class="pre">true</span></code>
will only update the timestamp, and will not create a non-existing
<code class="docutils literal notranslate"><span class="pre">file</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setAccess</span></code> is a <span class="green">Boolean</span> (default <code class="docutils literal notranslate"><span class="pre">true</span></code>).  Whether to update
access timestamp of file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setModify</span></code> is a <span class="green">Boolean</span> (default <code class="docutils literal notranslate"><span class="pre">true</span></code>).  Whether to update
modification timestamp of file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">referenceFile</span></code> is a <span class="green">String</span>.  If specified, the named fileâs access and
modification timestamps will be used rather than the current time/date.</p></li>
</ul>
<dl class="simple">
<dt>Return Value:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">undefined</span></code>.</p>
</dd>
</dl>
</div>
<div class="section" id="rename">
<h2>rename<a class="headerlink" href="#rename" title="Permalink to this headline">Â¶</a></h2>
<p>Rename or move a file.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">rename</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">destination</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">source</span></code> is a <span class="green">String</span>, the file to be renamed or moved, <code class="docutils literal notranslate"><span class="pre">destination</span></code> is a
<span class="green">String</span>, the name of the target file.</p>
<dl class="simple">
<dt>Return Value:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">undefined</span></code>.</p>
</dd>
</dl>
</div>
<div class="section" id="sleep">
<h2>sleep<a class="headerlink" href="#sleep" title="Permalink to this headline">Â¶</a></h2>
<p>Pause execution for specified number of seconds.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">sleep</span><span class="p">(</span><span class="nx">seconds</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">seconds</span></code> is a <span class="green">Number</span>.  Seconds may be a fraction of seconds.
Internally <a class="reference external" href="https://man7.org/linux/man-pages//man2/nanosleep.2.html">nanosleep</a>
is used.</p>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="cm">/* wait 1.5 seconds */</span>
<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">sleep</span><span class="p">(</span><span class="mf">1.5</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="gettype">
<h2>getType<a class="headerlink" href="#gettype" title="Permalink to this headline">Â¶</a></h2>
<p>Get the type of variable. A simplified but more specific version of
<code class="docutils literal notranslate"><span class="pre">typeof</span></code>.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">getType</span><span class="p">(</span><span class="nx">myvar</span><span class="p">);</span>
</pre></div>
</div>
<dl class="simple">
<dt>Return Value:</dt><dd><p>A <span class="green">String</span>, one of <code class="docutils literal notranslate"><span class="pre">String</span></code>, <code class="docutils literal notranslate"><span class="pre">Array</span></code>, <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Function</span></code>,
<code class="docutils literal notranslate"><span class="pre">Boolean</span></code>, <code class="docutils literal notranslate"><span class="pre">Buffer</span></code> (any buffer type), <code class="docutils literal notranslate"><span class="pre">Nan</span></code>, <code class="docutils literal notranslate"><span class="pre">Null</span></code>, <code class="docutils literal notranslate"><span class="pre">Undefined</span></code>,
<code class="docutils literal notranslate"><span class="pre">Date</span></code> or <code class="docutils literal notranslate"><span class="pre">Object</span></code>.</p>
</dd>
</dl>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sqltoc.html" class="btn btn-neutral float-right" title="The rampart-sql module" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rampart-main.html" class="btn btn-neutral" title="Introduction to Rampart" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Moat Crossing Systems.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> and â¤ï¸  using a custom <a href="https://github.com/LinxiFan/Sphinx-theme">theme</a> based on <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>