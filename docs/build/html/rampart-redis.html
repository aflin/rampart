

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The rampart-redis module &mdash; Rampart 0.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/hacks.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Rampart 0.1.0 documentation" href="index.html"/>
        <link rel="next" title="The rampart-robots module" href="rampart-robots.html"/>
        <link rel="prev" title="The rampart-lmdb module" href="rampart-lmdb.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Rampart
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="rampart-main.html">Rampart JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-utils.html">Rampart Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="sqltoc.html">The rampart-sql module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-server.html">The rampart-server module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-html.html">The rampart-html module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-crypto.html">The rampart-crypto module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-curl.html">The rampart-curl module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-lmdb.html">The rampart-lmdb module</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The rampart-redis module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#preface">Preface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#license">License</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-does-it-do">What does it do?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-does-it-work">How does it work?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#loading-and-using-the-module">Loading and Using the Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#loading">Loading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#main-function">Main Function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#init">init()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#client-functions">Client Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#client-commands">Client Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#shortcut-commands">Shortcut Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#async-commands">_async Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#format">format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xread-block-async">xread_block_async</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xread-auto-async">xread_auto_async</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#supported-commands">Supported Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#return-values-from-supported-commands">Return Values from Supported Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#unsupported-commands">Unsupported Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#proxy-objects">Proxy Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creation">Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#caveats">Caveats</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rampart-robots.html">The rampart-robots module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-cmark.html">The rampart-cmark module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Rampart</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>The rampart-redis module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/rampart-redis.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-rampart-redis-module">
<h1>The rampart-redis module<a class="headerlink" href="#the-rampart-redis-module" title="Permalink to this headline">¶</a></h1>
<div class="section" id="preface">
<h2>Preface<a class="headerlink" href="#preface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="license">
<h3>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h3>
<p>The rampart-redis module is released under the MIT license.</p>
</div>
<div class="section" id="what-does-it-do">
<h3>What does it do?<a class="headerlink" href="#what-does-it-do" title="Permalink to this headline">¶</a></h3>
<p>The rampart-redis module provides a client interface from Rampart to an
existing Redis server.</p>
</div>
<div class="section" id="how-does-it-work">
<h3>How does it work?<a class="headerlink" href="#how-does-it-work" title="Permalink to this headline">¶</a></h3>
<p>The rampart-redis module connects to an existing Redis server and allows
commands to be sent, and responses to be retrieved from Redis.  For most
operations, commands and replies are syncronous, meaning that the module
waits for a return value from Redis and provides it to the script before
moving on.  However, any command may be optionally run asyncronously. If so,
the command will be sent immediately to the server with the reply from the
server handled in Rampart’s event loop.</p>
<p>Note: Unlike Redis modules in other frameworks (e.g., Node), a separate
connection is maintained for syncronous and asyncronous requests from a
single handle.  However, only one asyncronous request can be active at a
time per handle.</p>
</div>
</div>
<div class="section" id="loading-and-using-the-module">
<h2>Loading and Using the Module<a class="headerlink" href="#loading-and-using-the-module" title="Permalink to this headline">¶</a></h2>
<div class="section" id="loading">
<h3>Loading<a class="headerlink" href="#loading" title="Permalink to this headline">¶</a></h3>
<p>Loading the module is a simple matter of using the <code class="docutils literal notranslate"><span class="pre">require()</span></code> function:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;rampart-redis&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="main-function">
<h2>Main Function<a class="headerlink" href="#main-function" title="Permalink to this headline">¶</a></h2>
<p>The rampart-redis module exports a single constructor function <a class="reference internal" href="#init">init()</a>
which may be used to establish a connection with a redis server.</p>
<div class="section" id="init">
<h3>init()<a class="headerlink" href="#init" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;rampart-redis&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">rcl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">redis</span><span class="p">.</span><span class="nx">init</span><span class="p">([</span><span class="nx">ip</span><span class="p">,</span> <span class="p">][</span><span class="nx">port</span><span class="p">,</span> <span class="p">][</span><span class="nx">timeout</span><span class="p">]);</span>

<span class="cm">/* or */</span>

<span class="kd">var</span> <span class="nx">rcl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">redis</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code> is an <span class="green">Object</span> with the optional properties
<code class="docutils literal notranslate"><span class="pre">ip</span></code>, <code class="docutils literal notranslate"><span class="pre">port</span></code> and/or <code class="docutils literal notranslate"><span class="pre">timeout</span></code> as described below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ip</span></code> is a <span class="green">String</span>, the ip address of the Redis server.  The
default if not specified is <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">port</span></code> is a <span class="green">Number</span>, the port number of the Redis server.  The
default if not specified is <code class="docutils literal notranslate"><span class="pre">6379</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code> is a <span class="green">Number</span>, the amount of time to wait for redis to
reply to a syncronous request for data in seconds.  The default is <code class="docutils literal notranslate"><span class="pre">-1</span></code>,
which means to wait forever.</p></li>
</ul>
<dl class="simple">
<dt>Return Value:</dt><dd><p>A <span class="green">Object</span> - the handle representing the connection to the Redis
server as well as containing the functions/redis commands listed below.</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>
<div class="section" id="client-functions">
<h2>Client Functions<a class="headerlink" href="#client-functions" title="Permalink to this headline">¶</a></h2>
<p>The majority of the client functions provided by the <code class="docutils literal notranslate"><span class="pre">rampart-redis</span></code>
module are one-to-one mappings of the <a class="reference external" href="https://redis.io/commands">Published Redis Commands</a>.
There are also specialized and shortcut commands available.</p>
<div class="section" id="client-commands">
<h3>Client Commands<a class="headerlink" href="#client-commands" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The set of standard client commands includes <a class="reference internal" href="#supported-commands">Supported Commands</a> and <a class="reference internal" href="#unsupported-commands">Unsupported Commands</a>
as listed below.</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;rampart-redis&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">rcl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">redis</span><span class="p">.</span><span class="nx">init</span><span class="p">([</span><span class="nx">ip</span><span class="p">,</span> <span class="p">][</span><span class="nx">port</span><span class="p">,</span> <span class="p">][</span><span class="nx">timeout</span><span class="p">]);</span>

<span class="nx">rcl</span><span class="p">.</span><span class="nx">command_name</span><span class="p">([</span><span class="nx">options</span> <span class="p">][,</span> <span class="nx">param1</span><span class="p">][,</span> <span class="nx">param2</span><span class="p">][,</span> <span class="p">...][,</span> <span class="nx">callback_function</span><span class="p">]);</span>
</pre></div>
</div>
<p>Where:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">command_name</span></code> is the name of one of the functions listed below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">paramX</span></code> is one or more parameters, required or optional for the given Redis command.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">callback_function</span></code> is an optional (if synchronous) or required (if
asynchronous) function which takes a single parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code> is an optional <span class="green">Object</span> with the following optional
properties:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code> - the <span class="green">Number</span> of seconds to wait for a response from the redis
server when using a syncronous command. It overrides the timeout set
in <code class="docutils literal notranslate"><span class="pre">redis.init</span></code> for the single command.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span></code> - a <span class="green">Boolean</span>, which if <code class="docutils literal notranslate"><span class="pre">true</span></code>, the client will
send the command to server and wait for reply in the
Rampart event loop.  If <code class="docutils literal notranslate"><span class="pre">true</span></code>, a callback function must be provided.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">returnBuffer</span></code> - a <span class="green">Boolean</span>, which if true,  Redis
<code class="docutils literal notranslate"><span class="pre">strings</span></code> and <code class="docutils literal notranslate"><span class="pre">bulk</span> <span class="pre">strings</span></code> will be returned in <span class="green">Buffers</span>.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<dl>
<dt>Return Value:</dt><dd><p>See below.</p>
</dd>
<dt>Note:</dt><dd><p>All commands are by default syncronous commands, except
for shortcut commands which end in <code class="docutils literal notranslate"><span class="pre">*_async</span></code> and for the
<code class="docutils literal notranslate"><span class="pre">subscribe</span></code>/<code class="docutils literal notranslate"><span class="pre">psubscribe</span></code> commands.</p>
<p>Only one <code class="docutils literal notranslate"><span class="pre">async</span></code> command may be active at any given time.
Additional concurrent asynchronous requests require that multiple
handles be opened.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">rcl</span></code> handle opens separate connections for synchronous and
asynchronous commands.</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>
<div class="section" id="shortcut-commands">
<h2>Shortcut Commands<a class="headerlink" href="#shortcut-commands" title="Permalink to this headline">¶</a></h2>
<p>The following commands do not map one-to-one to the
<a class="reference external" href="https://redis.io/commands">Published Redis Commands</a>.</p>
<div class="section" id="async-commands">
<h3>_async Commands<a class="headerlink" href="#async-commands" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">blmove_async</span></code>, <code class="docutils literal notranslate"><span class="pre">brpop_async</span></code>, <code class="docutils literal notranslate"><span class="pre">bzpopmax_async</span></code>,
<code class="docutils literal notranslate"><span class="pre">bzpopmin_async</span></code> and <code class="docutils literal notranslate"><span class="pre">format_async</span></code> are equivalent to
their non-async counterparts with the <code class="docutils literal notranslate"><span class="pre">options</span></code> <span class="green">Object</span> set to
<code class="docutils literal notranslate"><span class="pre">{async:true}</span></code>.</p>
</div></blockquote>
</div>
<div class="section" id="format">
<h3>format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Send a formatted command.  Return value is not specially reformatted
(returns the same as format <code class="docutils literal notranslate"><span class="pre">2</span></code> below).</p>
<p>Usage:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;rampart-redis&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">rcl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">redis</span><span class="p">.</span><span class="nx">init</span><span class="p">([</span><span class="nx">ip</span><span class="p">,</span> <span class="p">][</span><span class="nx">port</span><span class="p">,</span> <span class="p">][</span><span class="nx">timeout</span><span class="p">]);</span>

<span class="nx">rcl</span><span class="p">.</span><span class="nx">format</span><span class="p">([</span><span class="nx">options</span><span class="p">,]</span> <span class="nx">format_string</span> <span class="p">[,</span> <span class="nx">param2</span><span class="p">][,</span> <span class="p">...][,</span> <span class="nx">callback_function</span><span class="p">]);</span>
</pre></div>
</div>
<p>Where:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code> is the same as above.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format_string</span></code> is a <span class="green">String</span> with format codes
corresponding to the parameters that follow (much in the same way
as <a class="reference internal" href="rampart-utils.html#printf"><span class="std std-ref">printf</span></a>).  However only a limited number
of format codes are available:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">%s</span></code> - the corresponding parameter is and will be send as a
<span class="green">String</span></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%c</span></code> - the corresponding parameter is a <span class="green">String</span>, the
first character of which will be send as a single character.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%i</span></code> - the corresponding parameter is a <span class="green">Number</span> and
will be converted and sent as an integer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%d</span></code>  the corresponding parameter is a <span class="green">Number</span> and
will be sent as a double float.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%b</span></code>  the corresponding parameter is a <span class="green">Buffer</span> or a
<span class="green">String</span> and will be sent as buffer data.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>Return Value:</dt><dd><p>An <span class="green">Array</span>, the return values from the server.  Note that
unlike commands below, <code class="docutils literal notranslate"><span class="pre">format</span></code> does not attempt to organize return
values into <span class="green">Objects</span> based on the command given.  Instead the raw
values returned from redis are each members of the <span class="green">Array</span>.</p>
</dd>
</dl>
<p>Example:</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;rampart-redis&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">rcl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">redis</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span> <span class="c1">//localhost and default port</span>

<span class="nx">rcl</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;HMSET %s %s %d %s %d&quot;</span><span class="p">,</span> <span class="s2">&quot;myset&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;%3J\n&quot;</span><span class="p">,</span> <span class="nx">rcl</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;HGETALL myset&quot;</span><span class="p">)</span> <span class="p">);</span>

<span class="cm">/* expected output (generic array)</span>
<span class="cm">    [</span>
<span class="cm">       &quot;one&quot;,</span>
<span class="cm">       1,</span>
<span class="cm">       &quot;two&quot;,</span>
<span class="cm">       2</span>
<span class="cm">    ]</span>
<span class="cm">*/</span>

<span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;%3J\n&quot;</span><span class="p">,</span> <span class="nx">rcl</span><span class="p">.</span><span class="nx">hgetall</span><span class="p">(</span><span class="s2">&quot;myset&quot;</span><span class="p">));</span>

<span class="cm">/* expected output (formatted for the HGETALL command)</span>
<span class="cm">    {</span>
<span class="cm">       &quot;one&quot;: 1,</span>
<span class="cm">       &quot;two&quot;: 2</span>
<span class="cm">    }</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="xread-block-async">
<h3>xread_block_async<a class="headerlink" href="#xread-block-async" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>This is equivalent to <code class="docutils literal notranslate"><span class="pre">xread({async:true},</span> <span class="pre">&quot;BLOCK&quot;,</span> <span class="pre">...)</span></code>.</p>
</div></blockquote>
</div>
<div class="section" id="xread-auto-async">
<h3>xread_auto_async<a class="headerlink" href="#xread-auto-async" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>This is equivalent to <code class="docutils literal notranslate"><span class="pre">xread_block_async</span></code> above, except that the
returned IDs are tracked and the <code class="docutils literal notranslate"><span class="pre">XREAD</span> <span class="pre">BLOCK</span></code> command is reissued
with the proper IDs each time a new Stream Message is received.  In this
way it acts more like <code class="docutils literal notranslate"><span class="pre">subscribe</span></code> and continually accepts new streamed
messages similar to a PUB/SUB model.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="supported-commands">
<h2>Supported Commands<a class="headerlink" href="#supported-commands" title="Permalink to this headline">¶</a></h2>
<p>The following commands have been tested and return values formatted
appropriately for the given command (number in parantheses is the format of
the <a class="reference internal" href="#return-values-from-supported-commands"><span class="std std-ref">return value</span></a>):</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">bitcount</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">bitfield</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">bitop</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">bitpos</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">blmove</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">blmove_async</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">blpop</span></code>→(13),
<code class="docutils literal notranslate"><span class="pre">blpop_async</span></code>→(13), <code class="docutils literal notranslate"><span class="pre">brpop</span></code>→(13), <code class="docutils literal notranslate"><span class="pre">brpop_async</span></code>→(13),
<code class="docutils literal notranslate"><span class="pre">brpoplpush</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">bzpopmax</span></code>→(14), <code class="docutils literal notranslate"><span class="pre">bzpopmax_async</span></code>→(14),
<code class="docutils literal notranslate"><span class="pre">bzpopmin</span></code>→(14), <code class="docutils literal notranslate"><span class="pre">bzpopmin_async</span></code>→(14), <code class="docutils literal notranslate"><span class="pre">decr</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">decrby</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">del</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">discard</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">dump</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">echo</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">exists</span></code>→(6), <code class="docutils literal notranslate"><span class="pre">expire</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">expireat</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">flushall</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">flushdb</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">format</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">format_async</span></code>→(2),
<code class="docutils literal notranslate"><span class="pre">get</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">getbit</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">getdel</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">getex</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">getrange</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">getset</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">hdel</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">hexists</span></code>→(6),
<code class="docutils literal notranslate"><span class="pre">hget</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">hgetall</span></code>→(4), <code class="docutils literal notranslate"><span class="pre">hincrby</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">hincrbyfloat</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">hkeys</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">hlen</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">hmget</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">hmset</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">hrandfield</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">hscan</span></code>→(7), <code class="docutils literal notranslate"><span class="pre">hset</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">hsetnx</span></code>→(6),
<code class="docutils literal notranslate"><span class="pre">hstrlen</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">hvals</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">incr</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">incrby</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">incrbyfloat</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">info</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">keys</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">lindex</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">linsert</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">llen</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">lmove</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">lpop</span></code>→(2),
<code class="docutils literal notranslate"><span class="pre">lpos</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">lpush</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">lpushx</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">lrange</span></code>→(2),
<code class="docutils literal notranslate"><span class="pre">lrem</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">lset</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">ltrim</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">mget</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">move</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">mset</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">msetnx</span></code>→(6), <code class="docutils literal notranslate"><span class="pre">object</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">persist</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">pexpire</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">pexpireat</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">psetex</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">psubscribe</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">pttl</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">publish</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">pubsub</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">punsubscribe</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">rpop</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">rpoplpush</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">rpush</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">rpushx</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">sadd</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">save</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">scan</span></code>→(8), <code class="docutils literal notranslate"><span class="pre">scard</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">sdiff</span></code>→(2),
<code class="docutils literal notranslate"><span class="pre">sdiffstore</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">set</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">setbit</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">setex</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">setnx</span></code>→(6), <code class="docutils literal notranslate"><span class="pre">setrange</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">sinter</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">sinterstore</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">sismember</span></code>→(6), <code class="docutils literal notranslate"><span class="pre">smembers</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">smismember</span></code>→(9), <code class="docutils literal notranslate"><span class="pre">smove</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">sort</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">spop</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">srandmember</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">srem</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">sscan</span></code>→(8), <code class="docutils literal notranslate"><span class="pre">stralgo</span></code>→(4), <code class="docutils literal notranslate"><span class="pre">strlen</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">subscribe</span></code>→(3),
<code class="docutils literal notranslate"><span class="pre">sunion</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">sunionstore</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">time</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">touch</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">ttl</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">type</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">unlink</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">unsubscribe</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">xadd</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">xdel</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">xinfo</span></code>→(4), <code class="docutils literal notranslate"><span class="pre">xlen</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">xrange</span></code>→(5),
<code class="docutils literal notranslate"><span class="pre">xread</span></code>→(12), <code class="docutils literal notranslate"><span class="pre">xread_auto_async</span></code>→(12), <code class="docutils literal notranslate"><span class="pre">xread_block_async</span></code>→(12),
<code class="docutils literal notranslate"><span class="pre">xrevrange</span></code>→(5), <code class="docutils literal notranslate"><span class="pre">xtrim</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">zadd</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">zcard</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">zcount</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">zdiff</span></code>→(10), <code class="docutils literal notranslate"><span class="pre">zdiffstore</span></code>→(10), <code class="docutils literal notranslate"><span class="pre">zincrby</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">zinter</span></code>→(10), <code class="docutils literal notranslate"><span class="pre">zinterstore</span></code>→(10), <code class="docutils literal notranslate"><span class="pre">zlexcount</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">zmscore</span></code>→(2), <code class="docutils literal notranslate"><span class="pre">zpopmax</span></code>→(10), <code class="docutils literal notranslate"><span class="pre">zpopmin</span></code>→(10),
<code class="docutils literal notranslate"><span class="pre">zrandmember</span></code>→(10), <code class="docutils literal notranslate"><span class="pre">zrange</span></code>→(10), <code class="docutils literal notranslate"><span class="pre">zrangebylex</span></code>→(2),
<code class="docutils literal notranslate"><span class="pre">zrangebyscore</span></code>→(10), <code class="docutils literal notranslate"><span class="pre">zrangestore</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">zrank</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">zrem</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">zremrangebylex</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">zremrangebyrank</span></code>→(1),
<code class="docutils literal notranslate"><span class="pre">zremrangebyscore</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">zrevrange</span></code>→(10), <code class="docutils literal notranslate"><span class="pre">zrevrangebylex</span></code>→(10),
<code class="docutils literal notranslate"><span class="pre">zrevrangebyscore</span></code>→(10), <code class="docutils literal notranslate"><span class="pre">zrevrank</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">zscan</span></code>→(11),
<code class="docutils literal notranslate"><span class="pre">zscore</span></code>→(1), <code class="docutils literal notranslate"><span class="pre">zunion</span></code>→(10), <code class="docutils literal notranslate"><span class="pre">zunionstore</span></code>→(10)</p>
</div></blockquote>
<div class="section" id="return-values-from-supported-commands">
<h3>Return Values from Supported Commands<a class="headerlink" href="#return-values-from-supported-commands" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ol class="arabic">
<li><p>Single Value - return is a <span class="green">String</span>, <span class="green">Buffer</span>,
<span class="green">Number</span> or <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p></li>
<li><p>Multi-Value - return is an <span class="green">Array</span>.  When used with a callback,
the callback will be called once for each member of the
<span class="green">Array</span>.</p></li>
<li><p>Multi-Value - return is an <span class="green">Array</span> of <span class="green">Arrays</span>. When used
with a callback, the callback will be called once for each member of
the outer <span class="green">Array</span> and have its sole parameter one of each of the
inner <span class="green">Arrays</span>.</p></li>
<li><p>Associative - return is an <span class="green">Object</span> with one or more key:value
pairs.</p></li>
<li><p>Associative - for <code class="docutils literal notranslate"><span class="pre">xrange</span></code> and <code class="docutils literal notranslate"><span class="pre">xrevrange</span></code> only.  Format is as
follow:</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;1620437646452-0&quot;</span><span class="p">,</span>
      <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
         <span class="s2">&quot;key1&quot;</span><span class="o">:</span> <span class="s2">&quot;val1&quot;</span><span class="p">,</span>
         <span class="s2">&quot;key2&quot;</span><span class="o">:</span> <span class="s2">&quot;val2&quot;</span>
      <span class="p">}</span>
   <span class="p">},</span>
   <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;1620437646452-1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
         <span class="s2">&quot;key3&quot;</span><span class="o">:</span> <span class="s2">&quot;val3&quot;</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Boolean - return is a <span class="green">Boolean</span>.</p></li>
<li><p>Associative - for <code class="docutils literal notranslate"><span class="pre">hscan</span></code> only.  Format is as follows:</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;cursor&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s2">&quot;values&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;key1&quot;</span><span class="o">:</span> <span class="mi">99</span><span class="p">,</span>
      <span class="s2">&quot;key2&quot;</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
      <span class="s2">&quot;key3&quot;</span><span class="o">:</span> <span class="mi">101</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With a callback, the return value is set to cursor and the callback
function is called for each key:value pair in its own
<span class="green">Object</span>.</p>
</div></blockquote>
</li>
<li><p>Multi-Value - for <code class="docutils literal notranslate"><span class="pre">scan</span></code> and <code class="docutils literal notranslate"><span class="pre">sscan</span></code> only.
Format is as follows:</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;cursor&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s2">&quot;values&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="s2">&quot;one&quot;</span><span class="p">,</span>
      <span class="s2">&quot;three&quot;</span><span class="p">,</span>
      <span class="s2">&quot;four&quot;</span><span class="p">,</span>
      <span class="s2">&quot;two&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With a callback, the return value is set to cursor and the callback
function is called for each value.</p>
</div></blockquote>
</li>
<li><p>Boolean - for <code class="docutils literal notranslate"><span class="pre">sismember</span></code> only.  An <span class="green">Array</span> of
<span class="green">Booleans</span>.</p></li>
<li><p>Multi-Value - for <code class="docutils literal notranslate"><span class="pre">zset</span></code> commands which specify <code class="docutils literal notranslate"><span class="pre">WITHSCORES</span></code>.
Values are returned in an object along with the score.  With a
callback, a single <span class="green">Object</span> with value and score passed to the
function.  Example:</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span>
      <span class="s2">&quot;score&quot;</span><span class="o">:</span> <span class="mi">0</span>
   <span class="p">},</span>
   <span class="p">{</span>
      <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span>
      <span class="s2">&quot;score&quot;</span><span class="o">:</span> <span class="mi">1</span>
   <span class="p">},</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>If <code class="docutils literal notranslate"><span class="pre">WITHSCORES</span></code> is not specified, the format is the same as <code class="docutils literal notranslate"><span class="pre">2</span></code>
above.</p>
</li>
<li><p>Multi-Value - for <code class="docutils literal notranslate"><span class="pre">zscan</span></code> only.  Combination of <code class="docutils literal notranslate"><span class="pre">10</span></code> and <code class="docutils literal notranslate"><span class="pre">8</span></code>
above. Example:</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;cursor&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="s2">&quot;values&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
         <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span>
         <span class="s2">&quot;score&quot;</span><span class="o">:</span> <span class="mi">0</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span>
         <span class="s2">&quot;score&quot;</span><span class="o">:</span> <span class="mi">1</span>
      <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Associative - for <code class="docutils literal notranslate"><span class="pre">xread</span></code> commands only.  Format is as follows:</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">&quot;stream&quot;</span><span class="o">:</span> <span class="s2">&quot;mystream1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="p">[</span>
         <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;1620441129127-1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
               <span class="s2">&quot;key1&quot;</span><span class="o">:</span> <span class="s2">&quot;val1&quot;</span><span class="p">,</span>
               <span class="s2">&quot;key2&quot;</span><span class="o">:</span> <span class="s2">&quot;val2&quot;</span>
            <span class="p">}</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;1620441129127-2&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
               <span class="s2">&quot;key3&quot;</span><span class="o">:</span> <span class="s2">&quot;val3&quot;</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">},</span>
   <span class="p">{</span>
      <span class="s2">&quot;stream&quot;</span><span class="o">:</span> <span class="s2">&quot;mystream2&quot;</span><span class="p">,</span>
      <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="p">[</span>
         <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;1620441129127-0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
               <span class="s2">&quot;key4&quot;</span><span class="o">:</span> <span class="s2">&quot;val4&quot;</span><span class="p">,</span>
               <span class="s2">&quot;key5&quot;</span><span class="o">:</span> <span class="s2">&quot;val5&quot;</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>With a callback function, one member of the outer <span class="green">Array</span> is
passed for each iteration of the callback.</p>
</li>
<li><p>Single Value - returns a value along with the Redis key name in an
<span class="green">Object</span> (e.g. <code class="docutils literal notranslate"><span class="pre">{key:&quot;mylist&quot;,value:&quot;three&quot;}</span></code>).</p></li>
<li><p>Single Value - for blocking <code class="docutils literal notranslate"><span class="pre">zset</span></code> commands. Same as <code class="docutils literal notranslate"><span class="pre">13</span></code> above
with the addition of a score (e.g. <code class="docutils literal notranslate"><span class="pre">{key:&quot;mylist&quot;,value:&quot;three&quot;,score:1}</span></code>).</p></li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="unsupported-commands">
<h2>Unsupported Commands<a class="headerlink" href="#unsupported-commands" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The following functions will send the appropriate commands.  However
they have not (yet) been tested for the format of their return value:</p>
<p><code class="docutils literal notranslate"><span class="pre">acl_cat</span></code>, <code class="docutils literal notranslate"><span class="pre">acl_deluser</span></code>, <code class="docutils literal notranslate"><span class="pre">acl_genpass</span></code>, <code class="docutils literal notranslate"><span class="pre">acl_getuser</span></code>,
<code class="docutils literal notranslate"><span class="pre">acl_help</span></code>, <code class="docutils literal notranslate"><span class="pre">acl_list</span></code>, <code class="docutils literal notranslate"><span class="pre">acl_load</span></code>, <code class="docutils literal notranslate"><span class="pre">acl_log</span></code>, <code class="docutils literal notranslate"><span class="pre">acl_save</span></code>,
<code class="docutils literal notranslate"><span class="pre">acl_setuser</span></code>, <code class="docutils literal notranslate"><span class="pre">acl_users</span></code>, <code class="docutils literal notranslate"><span class="pre">acl_whoami</span></code>, <code class="docutils literal notranslate"><span class="pre">append</span></code>, <code class="docutils literal notranslate"><span class="pre">auth</span></code>,
<code class="docutils literal notranslate"><span class="pre">bgrewriteaof</span></code>, <code class="docutils literal notranslate"><span class="pre">bgsave</span></code>, <code class="docutils literal notranslate"><span class="pre">client_caching</span></code>, <code class="docutils literal notranslate"><span class="pre">client_getname</span></code>,
<code class="docutils literal notranslate"><span class="pre">client_getredir</span></code>, <code class="docutils literal notranslate"><span class="pre">client_id</span></code>, <code class="docutils literal notranslate"><span class="pre">client_kill</span></code>, <code class="docutils literal notranslate"><span class="pre">client_list</span></code>,
<code class="docutils literal notranslate"><span class="pre">client_pause</span></code>, <code class="docutils literal notranslate"><span class="pre">client_reply</span></code>, <code class="docutils literal notranslate"><span class="pre">client_setname</span></code>,
<code class="docutils literal notranslate"><span class="pre">client_tracking</span></code>, <code class="docutils literal notranslate"><span class="pre">client_unblock</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_addslots</span></code>,
<code class="docutils literal notranslate"><span class="pre">cluster_bumpepoch</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_count-failure-reports</span></code>,
<code class="docutils literal notranslate"><span class="pre">cluster_countkeysinslot</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_delslots</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_failover</span></code>,
<code class="docutils literal notranslate"><span class="pre">cluster_flushslots</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_forget</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_getkeysinslot</span></code>,
<code class="docutils literal notranslate"><span class="pre">cluster_info</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_keyslot</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_meet</span></code>,
<code class="docutils literal notranslate"><span class="pre">cluster_myid</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_nodes</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_replicas</span></code>,
<code class="docutils literal notranslate"><span class="pre">cluster_replicate</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_reset</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_saveconfig</span></code>,
<code class="docutils literal notranslate"><span class="pre">cluster_set-config-epoch</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_setslot</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_slaves</span></code>,
<code class="docutils literal notranslate"><span class="pre">cluster_slots</span></code>, <code class="docutils literal notranslate"><span class="pre">command</span></code>, <code class="docutils literal notranslate"><span class="pre">command_count</span></code>, <code class="docutils literal notranslate"><span class="pre">command_getkeys</span></code>,
<code class="docutils literal notranslate"><span class="pre">command_info</span></code>, <code class="docutils literal notranslate"><span class="pre">config_get</span></code>, <code class="docutils literal notranslate"><span class="pre">config_resetstat</span></code>,
<code class="docutils literal notranslate"><span class="pre">config_rewrite</span></code>, <code class="docutils literal notranslate"><span class="pre">config_set</span></code>, <code class="docutils literal notranslate"><span class="pre">dbsize</span></code>, <code class="docutils literal notranslate"><span class="pre">debug_object</span></code>,
<code class="docutils literal notranslate"><span class="pre">debug_segfault</span></code>, <code class="docutils literal notranslate"><span class="pre">eval</span></code>, <code class="docutils literal notranslate"><span class="pre">evalsha</span></code>, <code class="docutils literal notranslate"><span class="pre">exec</span></code>, <code class="docutils literal notranslate"><span class="pre">geoadd</span></code>,
<code class="docutils literal notranslate"><span class="pre">geodist</span></code>, <code class="docutils literal notranslate"><span class="pre">geohash</span></code>, <code class="docutils literal notranslate"><span class="pre">geopos</span></code>, <code class="docutils literal notranslate"><span class="pre">georadius</span></code>,
<code class="docutils literal notranslate"><span class="pre">georadiusbymember</span></code>, <code class="docutils literal notranslate"><span class="pre">hello</span></code>, <code class="docutils literal notranslate"><span class="pre">lastsave</span></code>, <code class="docutils literal notranslate"><span class="pre">latency_doctor</span></code>,
<code class="docutils literal notranslate"><span class="pre">latency_graph</span></code>, <code class="docutils literal notranslate"><span class="pre">latency_help</span></code>, <code class="docutils literal notranslate"><span class="pre">latency_history</span></code>,
<code class="docutils literal notranslate"><span class="pre">latency_latest</span></code>, <code class="docutils literal notranslate"><span class="pre">latency_reset</span></code>, <code class="docutils literal notranslate"><span class="pre">lolwut</span></code>, <code class="docutils literal notranslate"><span class="pre">memory_doctor</span></code>,
<code class="docutils literal notranslate"><span class="pre">memory_help</span></code>, <code class="docutils literal notranslate"><span class="pre">memory_malloc-stats</span></code>, <code class="docutils literal notranslate"><span class="pre">memory_purge</span></code>,
<code class="docutils literal notranslate"><span class="pre">memory_stats</span></code>, <code class="docutils literal notranslate"><span class="pre">memory_usage</span></code>, <code class="docutils literal notranslate"><span class="pre">migrate</span></code>, <code class="docutils literal notranslate"><span class="pre">module_list</span></code>,
<code class="docutils literal notranslate"><span class="pre">module_load</span></code>, <code class="docutils literal notranslate"><span class="pre">module_unload</span></code>, <code class="docutils literal notranslate"><span class="pre">monitor</span></code>, <code class="docutils literal notranslate"><span class="pre">multi</span></code>, <code class="docutils literal notranslate"><span class="pre">pfadd</span></code>,
<code class="docutils literal notranslate"><span class="pre">pfcount</span></code>, <code class="docutils literal notranslate"><span class="pre">pfmerge</span></code>, <code class="docutils literal notranslate"><span class="pre">ping</span></code>, <code class="docutils literal notranslate"><span class="pre">psync</span></code>, <code class="docutils literal notranslate"><span class="pre">psync</span></code>, <code class="docutils literal notranslate"><span class="pre">quit</span></code>,
<code class="docutils literal notranslate"><span class="pre">randomkey</span></code>, <code class="docutils literal notranslate"><span class="pre">readonly</span></code>, <code class="docutils literal notranslate"><span class="pre">readwrite</span></code>, <code class="docutils literal notranslate"><span class="pre">rename</span></code>, <code class="docutils literal notranslate"><span class="pre">renamenx</span></code>,
<code class="docutils literal notranslate"><span class="pre">replicaof</span></code>, <code class="docutils literal notranslate"><span class="pre">reset</span></code>, <code class="docutils literal notranslate"><span class="pre">restore</span></code>, <code class="docutils literal notranslate"><span class="pre">role</span></code>, <code class="docutils literal notranslate"><span class="pre">script_debug</span></code>,
<code class="docutils literal notranslate"><span class="pre">script_exists</span></code>, <code class="docutils literal notranslate"><span class="pre">script_flush</span></code>, <code class="docutils literal notranslate"><span class="pre">script_kill</span></code>, <code class="docutils literal notranslate"><span class="pre">script_load</span></code>,
<code class="docutils literal notranslate"><span class="pre">select</span></code>, <code class="docutils literal notranslate"><span class="pre">shutdown</span></code>, <code class="docutils literal notranslate"><span class="pre">slaveof</span></code>, <code class="docutils literal notranslate"><span class="pre">slowlog</span></code>, <code class="docutils literal notranslate"><span class="pre">swapdb</span></code>,
<code class="docutils literal notranslate"><span class="pre">swapdb</span></code>, <code class="docutils literal notranslate"><span class="pre">sync</span></code>, <code class="docutils literal notranslate"><span class="pre">sync</span></code>, <code class="docutils literal notranslate"><span class="pre">unwatch</span></code>, <code class="docutils literal notranslate"><span class="pre">wait</span></code>, <code class="docutils literal notranslate"><span class="pre">watch</span></code>,
<code class="docutils literal notranslate"><span class="pre">xack</span></code>, <code class="docutils literal notranslate"><span class="pre">xclaim</span></code>, <code class="docutils literal notranslate"><span class="pre">xgroup</span></code>, <code class="docutils literal notranslate"><span class="pre">xpending</span></code> and <code class="docutils literal notranslate"><span class="pre">xreadgroup</span></code></p>
<p>If any of the above commands returns values in an unsuitable format, the
<a class="reference internal" href="#format">format</a> command above may be used to get a generic response.</p>
</div></blockquote>
</div>
<div class="section" id="proxy-objects">
<h2>Proxy Objects<a class="headerlink" href="#proxy-objects" title="Permalink to this headline">¶</a></h2>
<p>A Rampart Redis Proxy Object is an JavaScript <span class="green">Object</span> whose
properties are backed by a <a class="reference external" href="https://redis.io/topics/data-types-intro#redis-hashes">Redis Hash</a>
and for which operations on the <span class="green">Object</span> serves as a shortcut for the
<code class="docutils literal notranslate"><span class="pre">hset</span></code>, <code class="docutils literal notranslate"><span class="pre">hget</span></code>, <code class="docutils literal notranslate"><span class="pre">hgetall</span></code> and <code class="docutils literal notranslate"><span class="pre">hdel</span></code> commands.  They are intended as
a quick and easy storage system for occassionally used variables that are
shared between scripts or threads.  They should not be used as a robust
databasing solution.</p>
<div class="section" id="creation">
<h3>Creation<a class="headerlink" href="#creation" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>A proxy object is created as follows:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;rampart-redis&quot;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">rcl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">redis</span><span class="p">.</span><span class="nx">init</span><span class="p">([</span><span class="nx">ip</span><span class="p">,</span> <span class="p">][</span><span class="nx">port</span><span class="p">,</span> <span class="p">][</span><span class="nx">timeout</span><span class="p">]);</span>

<span class="kd">var</span> <span class="nx">myProxyObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">rcl</span><span class="p">.</span><span class="nx">proxyObj</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">name</span></code> is the name of the Redis key that will store the Redis
Hash.</p>
</div></blockquote>
</div>
<div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Setting and reading the property keys of the returned proxy object will automatically
set and retrieve the keys in the specified Hash Key.  These values will then
be available in any other thread or script which connects to the same Redis
Server instance using the identical proxy object.</p>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span> <span class="cm">/* script 1 - insert new data */</span>

 <span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;rampart-redis&quot;</span><span class="p">);</span>

 <span class="kd">var</span> <span class="nx">rcl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">redis</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span> <span class="c1">//localhost and default port</span>

 <span class="kd">var</span> <span class="nx">users</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">rcl</span><span class="p">.</span><span class="nx">proxyObj</span><span class="p">(</span><span class="s2">&quot;Users&quot;</span><span class="p">);</span>

<span class="cm">/* populate variables for insertion */</span>
<span class="kd">var</span> <span class="nx">cl</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;principal&quot;</span><span class="p">,</span> <span class="s2">&quot;principal&quot;</span><span class="p">,</span> <span class="s2">&quot;salary&quot;</span><span class="p">,</span>
    <span class="s2">&quot;salary&quot;</span><span class="p">,</span> <span class="s2">&quot;hourly&quot;</span><span class="p">,</span> <span class="s2">&quot;intern&quot;</span>
<span class="p">];</span>
<span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Debbie Dreamer&quot;</span><span class="p">,</span> <span class="s2">&quot;Rusty Grump&quot;</span><span class="p">,</span><span class="s2">&quot;Georgia Geek&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Sydney Slacker&quot;</span><span class="p">,</span> <span class="s2">&quot;Pat Particular&quot;</span><span class="p">,</span> <span class="s2">&quot;Billie Barista&quot;</span>
<span class="p">];</span>
<span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;dd&quot;</span><span class="p">,</span> <span class="s2">&quot;rg&quot;</span><span class="p">,</span> <span class="s2">&quot;gg&quot;</span><span class="p">,</span> <span class="s2">&quot;ss&quot;</span><span class="p">,</span> <span class="s2">&quot;pp&quot;</span><span class="p">,</span> <span class="s2">&quot;bb&quot;</span> <span class="p">];</span>
<span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">22</span> <span class="p">];</span>
<span class="kd">var</span> <span class="nx">salary</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">250000</span><span class="p">,</span> <span class="mi">250000</span><span class="p">,</span> <span class="mi">100000</span><span class="p">,</span> <span class="mi">100000</span><span class="p">,</span> <span class="mi">80000</span><span class="p">,</span> <span class="mi">0</span> <span class="p">];</span>
<span class="kd">var</span> <span class="nx">title</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Chief Executive Officer&quot;</span><span class="p">,</span> <span class="s2">&quot;Chief Financial Officer&quot;</span><span class="p">,</span> <span class="s2">&quot;Lead Programmer&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Programmer&quot;</span><span class="p">,</span> <span class="s2">&quot;Systems Administrator&quot;</span><span class="p">,</span> <span class="s2">&quot;Intern&quot;</span>
<span class="p">];</span>

<span class="kd">var</span> <span class="nx">startDate</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;1999-12-31&#39;</span><span class="p">,</span>
    <span class="s1">&#39;1999-12-31&#39;</span><span class="p">,</span>
    <span class="s1">&#39;2001-3-15&#39;</span><span class="p">,</span>
    <span class="s1">&#39;2002-5-12&#39;</span><span class="p">,</span>
    <span class="s1">&#39;2003-7-14&#39;</span><span class="p">,</span>
    <span class="s1">&#39;2020-3-18&#39;</span>
<span class="p">];</span>

<span class="cm">/* insert rows */</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="mi">6</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
     <span class="nx">users</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
         <span class="nx">employeeClass</span><span class="o">:</span> <span class="nx">cl</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
         <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
         <span class="nx">age</span><span class="o">:</span> <span class="nx">age</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
         <span class="nx">salary</span><span class="o">:</span> <span class="nx">salary</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
         <span class="nx">title</span><span class="o">:</span> <span class="nx">title</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
         <span class="nx">startDate</span><span class="o">:</span> <span class="nx">startDate</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
     <span class="p">}</span>
<span class="p">}</span>
<span class="cm">/* end script 1 */</span>

 <span class="cm">/* script 2 - access data */</span>

 <span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;rampart-redis&quot;</span><span class="p">);</span>

 <span class="kd">var</span> <span class="nx">rcl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">redis</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span> <span class="c1">//localhost and default port</span>

 <span class="kd">var</span> <span class="nx">users</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">rcl</span><span class="p">.</span><span class="nx">proxyObj</span><span class="p">(</span><span class="s2">&quot;Users&quot;</span><span class="p">);</span>

 <span class="k">delete</span> <span class="nx">users</span><span class="p">.</span><span class="nx">bb</span><span class="p">;</span> <span class="c1">//Billie&#39;s internship is finished.</span>

 <span class="nx">rampart</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">printf</span><span class="p">(</span><span class="s2">&quot;%3J\n&quot;</span><span class="p">,</span> <span class="nx">users</span><span class="p">);</span>

 <span class="cm">/* expected output:</span>
<span class="cm">     {</span>
<span class="cm">        &quot;rg&quot;: {</span>
<span class="cm">           &quot;employeeClass&quot;: &quot;principal&quot;,</span>
<span class="cm">           &quot;name&quot;: &quot;Rusty Grump&quot;,</span>
<span class="cm">           &quot;age&quot;: 58,</span>
<span class="cm">           &quot;salary&quot;: 250000,</span>
<span class="cm">           &quot;title&quot;: &quot;Chief Financial Officer&quot;,</span>
<span class="cm">           &quot;startDate&quot;: &quot;1999-12-31&quot;</span>
<span class="cm">        },</span>
<span class="cm">        &quot;ss&quot;: {</span>
<span class="cm">           &quot;employeeClass&quot;: &quot;salary&quot;,</span>
<span class="cm">           &quot;name&quot;: &quot;Sydney Slacker&quot;,</span>
<span class="cm">           &quot;age&quot;: 44,</span>
<span class="cm">           &quot;salary&quot;: 100000,</span>
<span class="cm">           &quot;title&quot;: &quot;Programmer&quot;,</span>
<span class="cm">           &quot;startDate&quot;: &quot;2002-5-12&quot;</span>
<span class="cm">        },</span>
<span class="cm">        &quot;dd&quot;: {</span>
<span class="cm">           &quot;employeeClass&quot;: &quot;principal&quot;,</span>
<span class="cm">           &quot;name&quot;: &quot;Debbie Dreamer&quot;,</span>
<span class="cm">           &quot;age&quot;: 63,</span>
<span class="cm">           &quot;salary&quot;: 250000,</span>
<span class="cm">           &quot;title&quot;: &quot;Chief Executive Officer&quot;,</span>
<span class="cm">           &quot;startDate&quot;: &quot;1999-12-31&quot;</span>
<span class="cm">        },</span>
<span class="cm">        &quot;pp&quot;: {</span>
<span class="cm">           &quot;employeeClass&quot;: &quot;hourly&quot;,</span>
<span class="cm">           &quot;name&quot;: &quot;Pat Particular&quot;,</span>
<span class="cm">           &quot;age&quot;: 32,</span>
<span class="cm">           &quot;salary&quot;: 80000,</span>
<span class="cm">           &quot;title&quot;: &quot;Systems Administrator&quot;,</span>
<span class="cm">           &quot;startDate&quot;: &quot;2003-7-14&quot;</span>
<span class="cm">        },</span>
<span class="cm">        &quot;gg&quot;: {</span>
<span class="cm">           &quot;employeeClass&quot;: &quot;salary&quot;,</span>
<span class="cm">           &quot;name&quot;: &quot;Georgia Geek&quot;,</span>
<span class="cm">           &quot;age&quot;: 44,</span>
<span class="cm">           &quot;salary&quot;: 100000,</span>
<span class="cm">           &quot;title&quot;: &quot;Lead Programmer&quot;,</span>
<span class="cm">           &quot;startDate&quot;: &quot;2001-3-15&quot;</span>
<span class="cm">        }</span>
<span class="cm">     }</span>
<span class="cm"> */</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="caveats">
<h3>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul>
<li><p>JavaScript primitives and <span class="green">Objects</span> are stored and retrieved by converting
to and from <a class="reference external" href="https://duktape.org/guide.html#builtin-cbor">CBOR</a>
which limits what can be stored (no <span class="green">Dates</span> or
<span class="green">Functions</span>);</p></li>
<li><p>Proxy Objects are saved to the Redis Key specified when the object is
created (i.e. <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">rcl.proxyObj(redisKeyName)</span></code>).  If the Redis Key
already exists and is not a Redis Hash, an error will be thrown.</p></li>
<li><p>Any Proxy Object key that begins with <code class="docutils literal notranslate"><span class="pre">_</span></code> (underscore) will not be
saved to the Redis Hash and will only exist locally.  The following
are preset:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">_destroy</span></code> - A <span class="green">Function</span> which when called, deletes the
Redis Hash from the database. Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">rcl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">redis</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span> <span class="c1">//localhost and default port</span>

<span class="kd">var</span> <span class="nx">users</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">rcl</span><span class="p">.</span><span class="nx">proxyObj</span><span class="p">(</span><span class="s2">&quot;Users&quot;</span><span class="p">);</span>

<span class="nx">users</span><span class="p">.</span><span class="nx">_destroy</span><span class="p">();</span> <span class="c1">// same as rcl.del(&quot;Users&quot;);</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">_hname</span></code> - A <span class="green">String</span> set to the name of the Redis Key.
In the above example, it would be set to <code class="docutils literal notranslate"><span class="pre">&quot;Users&quot;</span></code>;</p></li>
</ul>
</li>
<li><p>A Proxy Object is a shallow proxy - meaning that only key/value pairs
of the <span class="green">Object</span> returned from <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">rcl.proxyObj()</span></code> will be stored
to the Redis database.  Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">rcl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">redis</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span> <span class="c1">//localhost and default port</span>

<span class="kd">var</span> <span class="nx">users</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">rcl</span><span class="p">.</span><span class="nx">proxyObj</span><span class="p">(</span><span class="s2">&quot;Users&quot;</span><span class="p">);</span>

<span class="nx">users</span><span class="p">.</span><span class="nx">myid</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;Joe&quot;</span><span class="p">};</span> <span class="c1">//myid.name is stored in Redis</span>

<span class="nx">users</span><span class="p">.</span><span class="nx">myid</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>       <span class="c1">// users.myid.age is not set;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">users</span><span class="p">.</span><span class="nx">myid</span><span class="p">)</span>    <span class="c1">// {name:&quot;Joe&quot;}</span>

<span class="kd">var</span> <span class="nx">myid</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nx">myid</span><span class="p">;</span>     <span class="c1">// var myid is created from the Redis Hash &quot;myid&quot;</span>
                           <span class="c1">// which is CBOR decoded into a JavaScript Object</span>
<span class="nx">myid</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="nx">users</span><span class="p">.</span><span class="nx">myid</span> <span class="o">=</span> <span class="nx">myid</span><span class="p">;</span>         <span class="c1">// myid.age and myid.name are now stored in Redis</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">users</span><span class="p">.</span><span class="nx">myid</span><span class="p">)</span>    <span class="c1">// {name:&quot;Joe&quot;, age: 42}</span>
</pre></div>
</div>
</li>
<li><p>Operations which may otherwise appear to be atomic will not work
properly with concurrency.  Example:  <code class="docutils literal notranslate"><span class="pre">users.count++</span></code> will indeed
increment the variable stored under the Hash key <code class="docutils literal notranslate"><span class="pre">count</span></code>.  However,
it will retrieve the value, add one, then set it again, during which
time another script may have retrieved the value to do the same.
Thus, doing this simultaneously in several scripts or threads will
not work as intended.</p></li>
</ul>
</div></blockquote>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rampart-robots.html" class="btn btn-neutral float-right" title="The rampart-robots module" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rampart-lmdb.html" class="btn btn-neutral" title="The rampart-lmdb module" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, Moat Crossing Systems.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> and ❤️  using a custom <a href="https://github.com/LinxiFan/Sphinx-theme">theme</a> based on <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>