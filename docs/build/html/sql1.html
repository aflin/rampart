

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction to Texis SQL &mdash; Rampart 0.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/hacks.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Rampart 0.1.0 documentation" href="index.html"/>
        <link rel="up" title="The rampart-sql module" href="sqltoc.html"/>
        <link rel="next" title="Queries Involving Calculated Values" href="sql2.html"/>
        <link rel="prev" title="Preface" href="rampart-sql.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Rampart
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="rampart-main.html">Rampart JavaScript</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="sqltoc.html">The rampart-sql module</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="rampart-sql.html">Preface</a></li>
<li class="toctree-l2"><a class="reference internal" href="rampart-sql.html#loading-the-javascript-module">Loading the Javascript Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="rampart-sql.html#database-functions">Database Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="rampart-sql.html#string-functions">String Functions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Introduction to Texis SQL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#texis-thunderstones-text-information-server">Texis: Thunderstone’s Text Information Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-is-it">What is it?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#why-is-that-different">Why is that different?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#what-can-it-do">What can it do?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#features-unique-to-texis">Features Unique to Texis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#zero-latency-insert">Zero Latency Insert</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variable-sized-records">Variable Sized Records</a></li>
<li class="toctree-l4"><a class="reference internal" href="#indirect-fields">Indirect Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variable-length-index-keys">Variable Length Index Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="#advantages-of-variable-length-fields-and-btrees">Advantages of Variable Length Fields and Btrees</a></li>
<li class="toctree-l4"><a class="reference internal" href="#specifications">Specifications</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#texis-as-a-relational-database-management-system">Texis as a Relational Database Management System</a></li>
<li class="toctree-l3"><a class="reference internal" href="#relational-database-background">Relational Database Background</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-database">Creating a Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-db-from-command-line">Creating DB from Command Line</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-db-from-javascript">Creating DB from JavaScript</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#table-definition">Table Definition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-the-resume-table">Creating the Resume Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inserting-data-into-the-resume-table">Inserting Data into the Resume Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#defining-a-table">Defining a Table</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#command-discussion">Command Discussion</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#removing-a-table">Removing a Table</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#a-first-look-at-queries">A First Look at Queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#first-look-command-discussion">First Look Command Discussion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieving-from-the-entire-table">Retrieving From the Entire Table</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#retrieving-all-the-columns">Retrieving All the Columns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#retrieving-a-subset-of-rows-simple-conditions">Retrieving a Subset of Rows: Simple Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieving-a-subset-of-rows-compound-conditions">Retrieving a Subset of Rows: Compound Conditions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#retrieval-using-the-and-operator">Retrieval Using the AND Operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#retrieval-using-the-or-operator">Retrieval Using the OR Operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#retrieval-using-both-and-and-or-operators">Retrieval Using Both AND and OR Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#retrieval-using-parentheses">Retrieval Using Parentheses</a></li>
<li class="toctree-l4"><a class="reference internal" href="#logical-operator-not">Logical Operator NOT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#additional-comparison-operators">Additional Comparison Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#range-and-geographical-searches-using-between">Range and Geographical Searches Using BETWEEN</a></li>
<li class="toctree-l4"><a class="reference internal" href="#geographical-searches-with-between">Geographical Searches with BETWEEN</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-like-searches-using-in-subset-and-intersect">Set-like Searches Using IN, SUBSET and INTERSECT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#searches-using-in">Searches Using IN</a></li>
<li class="toctree-l4"><a class="reference internal" href="#searches-using-subset">Searches Using SUBSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="#searches-using-intersect">Searches Using INTERSECT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#in-subset-intersect-commonality">IN, SUBSET, INTERSECT Commonality</a></li>
<li class="toctree-l4"><a class="reference internal" href="#search-condition-using-like">Search Condition Using LIKE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#like-command-discussion">LIKE Command Discussion</a></li>
<li class="toctree-l4"><a class="reference internal" href="#relevance-ranking-using-liker-and-likep">Relevance Ranking Using LIKER and LIKEP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#relevance-ranking-command-discussion">Relevance Ranking Command Discussion</a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-searching-using-likein">Query searching using LIKEIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="#search-condition-using-matches">Search Condition Using MATCHES</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sorting-your-results">Sorting Your Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql2.html">Queries Involving Calculated Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql2.html#advanced-queries">Advanced Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql3.html">Intelligent Text Search Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql-server-funcs.html">Server functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql4.html">Indexing for Increased Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql4.html#keeping-the-database-current">Keeping the Database Current</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql4.html#security">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql4.html#administration-of-the-database">Administration of the Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql-set.html">Server Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql.html">Tsql Command Line Utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="mm2.html">Metamorph: The Program Inside the Program</a></li>
<li class="toctree-l2"><a class="reference internal" href="mm2.html#hits-intersections-and-sets">Hits, Intersections and Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="mm3.html">Thesaurus Customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="mm4.html">Tailoring Metamorph’s Linguistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="mm5.html">Types of Searches in Metamorph</a></li>
<li class="toctree-l2"><a class="reference internal" href="mm6.html">REX On Its Own</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rampart-server.html">The rampart-server module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-html.html">The rampart-html module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-crypto.html">The rampart-crypto module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-curl.html">The rampart-curl module</a></li>
<li class="toctree-l1"><a class="reference internal" href="rampart-robots.html">The rampart-robots module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Rampart</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="sqltoc.html">The rampart-sql module</a> &raquo;</li>
        
      <li>Introduction to Texis SQL</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/sql1.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction-to-texis-sql">
<h1>Introduction to Texis SQL<a class="headerlink" href="#introduction-to-texis-sql" title="Permalink to this headline">¶</a></h1>
<div class="section" id="texis-thunderstones-text-information-server">
<h2>Texis: Thunderstone’s Text Information Server<a class="headerlink" href="#texis-thunderstones-text-information-server" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-is-it">
<h3>What is it?<a class="headerlink" href="#what-is-it" title="Permalink to this headline">¶</a></h3>
<p>Texis is a relational database server that specializes in managing
textual information. It has many of the same abilities as products like
mysql, sqlite3 and postgresql with one key difference: its primary purpose
is to intelligently search and manage databases that contain natural language
text.</p>
</div>
<div class="section" id="why-is-that-different">
<h3>Why is that different?<a class="headerlink" href="#why-is-that-different" title="Permalink to this headline">¶</a></h3>
<p>Most other products are optimized for sql queries for traditional sql
relational database functionality. Texis has been highly optimized to handle
Full Text Search functions. Where Full Text Search is an afterthought for
other sql database engines which support it, it is the primary focus of Texis.</p>
<p>Texis can store text of nearly any size, and the database can query that
information in natural language in a manner similar to any web based search.
Texis utilizes the powerful Metamorph concept based text engine and has a
specialized relational database server built around it so that both
relational models and Full Text Search are well supported.</p>
</div>
<div class="section" id="what-can-it-do">
<h3>What can it do?<a class="headerlink" href="#what-can-it-do" title="Permalink to this headline">¶</a></h3>
<p>Texis is designed to efficiently handle documents and data that
contains natural language information. This includes things like:
e-mail, personnel records, research reports, memos, product
descriptions, web pages, and general documents.  Texis allows one to
import, associate, organize  and perform natural language queries against these
items in a similar manner as traditional database, with the power of a fast,
memory efficient Full Text Search engine. It provides a single system to handle
relational data in combination with a natural language record retrieval system.</p>
</div>
<div class="section" id="features-unique-to-texis">
<h3>Features Unique to Texis<a class="headerlink" href="#features-unique-to-texis" title="Permalink to this headline">¶</a></h3>
<p>Before exploring the specifications, here are some features that are unique
to Texis.</p>
</div>
<div class="section" id="zero-latency-insert">
<h3>Zero Latency Insert<a class="headerlink" href="#zero-latency-insert" title="Permalink to this headline">¶</a></h3>
<p>When a record is added or updated within a Texis table it is available for
retrieval immediately.  This includes documents with fields that have a
full text index on them.  Optimization of full text documents is automatic, so
there is no need to write maintenance code.</p>
</div>
<div class="section" id="variable-sized-records">
<h3>Variable Sized Records<a class="headerlink" href="#variable-sized-records" title="Permalink to this headline">¶</a></h3>
<p>Like many databases, Texis allows fields with variable length text.  The
<code class="docutils literal notranslate"><span class="pre">varchar</span></code> field is set with a suggested size, but is efficiently managed
regardless of the amount of text added.  In Texis, any variable sized field
can contain up to one gigabyte.</p>
</div>
<div class="section" id="indirect-fields">
<h3>Indirect Fields<a class="headerlink" href="#indirect-fields" title="Permalink to this headline">¶</a></h3>
<p>Indirect fields are byte fields that exist as real files within the file
system.  This field type is usually used when to create a database
that is managing a collection of files on the server (like word processing
files for instance).  They can also be used when the one gigabyte limitation
of fields is too small.  Texis can use indirect fields that point to
files anywhere on the file system and optionally can manage them under the
database.  Since files may contain any amount of any kind of data, indirect
fields may be used to store arbitrarily large binary objects.  These Binary
Large OBjects are often called BLOBs in other RDBMSes.  However in Texis the
<code class="docutils literal notranslate"><span class="pre">indirect</span></code> type is distinct from <code class="docutils literal notranslate"><span class="pre">blob</span></code>/<code class="docutils literal notranslate"><span class="pre">blobz</span></code>.  While each
<code class="docutils literal notranslate"><span class="pre">indirect</span></code> field is a separate external file, all of a table’s
<code class="docutils literal notranslate"><span class="pre">blob</span></code>/<code class="docutils literal notranslate"><span class="pre">blobz</span></code> fields are stored together in one <code class="docutils literal notranslate"><span class="pre">.blb</span></code> file adjacent
to the <code class="docutils literal notranslate"><span class="pre">.tbl</span></code> file.  Thus, <code class="docutils literal notranslate"><span class="pre">indirect</span></code> is better suited to
externally-managed files, or data in which nearly every row’s field value is
very large.  The <code class="docutils literal notranslate"><span class="pre">blob</span></code> (or compressed <code class="docutils literal notranslate"><span class="pre">blobz</span></code>) type is better suited to
data that may often be either large or small, or which Texis can manage more
easily (e.g.  faster access, and automatically track changes for index
updates).  The <code class="docutils literal notranslate"><span class="pre">indirect</span></code>/<code class="docutils literal notranslate"><span class="pre">blob</span></code>/<code class="docutils literal notranslate"><span class="pre">blobz</span></code> type fields have the
additional benefit of storing data that is indexed, but not often retrieved,
which reduces the main table file size and improves file system caching.</p>
</div>
<div class="section" id="variable-length-index-keys">
<h3>Variable Length Index Keys<a class="headerlink" href="#variable-length-index-keys" title="Permalink to this headline">¶</a></h3>
<p>Typical English language contains words of extremely variant length.  Texis
minimizes the overhead of storing these words in an index.  Traditional
Btrees have fixed length keys, so Thunderstone invented a variable length
key Btree in order to minimize our overhead while not limiting the maximum
length of a key.</p>
</div>
<div class="section" id="advantages-of-variable-length-fields-and-btrees">
<h3>Advantages of Variable Length Fields and Btrees<a class="headerlink" href="#advantages-of-variable-length-fields-and-btrees" title="Permalink to this headline">¶</a></h3>
<p>Texis stands for Text Information Server, and text databases are fundamentally
different in nature to the content of most standard databases. Texis is
optimized to handle text data in the context of text retrieval. A mix of
large and small documents can be handled efficiently in the same table.
As such, Texis is optimized for two things: Query time and variable sized data.</p>
</div>
<div class="section" id="specifications">
<h3>Specifications<a class="headerlink" href="#specifications" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>Texis Specs</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Multiple Servers per machine</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>Multiple Databases per server</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>Tables per database</p></td>
<td><p>10,000</p></td>
</tr>
<tr class="row-odd"><td><p>Max table size</p></td>
<td><p>On 32-bit systems - varies with filesystem, 9 exabytes (<code class="docutils literal notranslate"><span class="pre">2^63</span></code>) on 64-bit systems</p></td>
</tr>
<tr class="row-even"><td><p>Rows per table</p></td>
<td><p>1 billion</p></td>
</tr>
<tr class="row-odd"><td><p>Columns per table</p></td>
<td><p>Unlimited</p></td>
</tr>
<tr class="row-even"><td><p>Indexes per table</p></td>
<td><p>Unlimited</p></td>
</tr>
<tr class="row-odd"><td><p>Max field size</p></td>
<td><p>1 gigabyte</p></td>
</tr>
<tr class="row-even"><td><p>Max field column name</p></td>
<td><p>32 characters</p></td>
</tr>
<tr class="row-odd"><td><p>Max tables per query</p></td>
<td><p>400</p></td>
</tr>
<tr class="row-even"><td><p>User password security</p></td>
<td><p>Yes (usable but unsupported in rampart)</p></td>
</tr>
<tr class="row-odd"><td><p>Group password security</p></td>
<td><p>Yes (usable but unsupported in rampart)</p></td>
</tr>
<tr class="row-even"><td><p>Index types</p></td>
<td><p>Btree, Inverted, Text, Text inverted</p></td>
</tr>
<tr class="row-odd"><td><p>Max index key size</p></td>
<td><p>8192</p></td>
</tr>
<tr class="row-even"><td><p>Standard Data Types</p></td>
<td><p>see <a class="reference internal" href="#datatypes"><span class="std std-ref">Datatypes</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>Max user defined data types</p></td>
<td><p>64</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="texis-as-a-relational-database-management-system">
<h2>Texis as a Relational Database Management System<a class="headerlink" href="#texis-as-a-relational-database-management-system" title="Permalink to this headline">¶</a></h2>
<p>Texis is a database management system (DBMS) which follows the relational
database model, while including methods for addressing the inclusion of
large quantities of narrative full text.  Texis provides a method for
managing and manipulating an organization’s shared data, where intelligent
text retrieval is harnessed as a qualifying action for selecting the desired
information.  Texis serves as an “intelligent agent” between the database
and the people seeking data from the database, providing an environment
where it is convenient and efficient to retrieve information from and store
data in the database.  Texis provides for the definition of the database and
for data storage.  At the same time Texis provides methods for integrating
advanced full text retrieval techniques and object manipulation with the
more traditional roles performed by the RDBMS (relational database
management system).</p>
</div>
<div class="section" id="relational-database-background">
<h2>Relational Database Background<a class="headerlink" href="#relational-database-background" title="Permalink to this headline">¶</a></h2>
<p>Texis, like all SQL based DBMSs, is based on the relational data model.  The
fundamental organizational structure for data in the relational model is the
relation.  A <em>relation</em> is a two-dimensional table made up of rows and
columns.  Each relation, also called a table, stores data about <em>entities</em>.
These entities are objects or events on which an application chooses to
collect data.  Patients, company information, products, services, metadata
descriptions of media, web pages, legal documents, documentation, personal
data and/or any grouping of text based documentation are examples of
entities. The columns in a relation represent characteristics (<em>attributes</em>,
<em>fields</em>, or <em>data items</em> of an entity, such as url, text, links, date,
address, names, descriptions, abstract, etc).  The rows (called <em>tuples</em> in
relational jargon) in the relation represent specific occurrences (or
records) of a patient, doctor, time-frame, description, location, web page,
products, customer id, url, document text, etc.  Each row consists of a
sequence of values, one for each column in the table.  In addition, each row
(or record) in a table must be unique.  The <em>primary key</em> of a relation is
the attribute or attributes whose value uniquely identifies a specific row
in a relation.  For example, a Patient identification number (ID) is
normally used as a primary key for accessing a patient’s hospital records.
A Customer ID number can be the primary key in a business.  Many different
sets of terms can be used interchangeably when discussing the relational
model.  The following table lists these terms and shows their relationship.</p>
<table class="docutils align-default" id="reldbterm">
<colgroup>
<col style="width: 40%" />
<col style="width: 36%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Relational Model Literature</p></th>
<th class="head"><p>Relational DBMS Products</p></th>
<th class="head"><p>File Processing</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Relation</p></td>
<td><p>Table</p></td>
<td><p>File</p></td>
</tr>
<tr class="row-odd"><td><p>Tuple</p></td>
<td><p>Row</p></td>
<td><p>Record</p></td>
</tr>
<tr class="row-even"><td><p>Attribute</p></td>
<td><p>Column</p></td>
<td><p>Field</p></td>
</tr>
</tbody>
</table>
<p>The following figure illustrates two relations. The first one depicts
patients and the second represents outstanding patient invoices. A row
in the PATIENT relation represents a particular patient, while a row in
the INVOICE relation represents a patient invoice. Thus, a relation
provides a structure for storing data about some entity within the
organization. In fact, a database in the relational model consists of
several relations, each representing a different entity.</p>
<ol class="loweralpha simple">
<li><p>PATIENT Relation</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>PATIENT ID  PATIENT NAME    ADDRESS            CITY         STATE
107         Pryor           1 Ninigret Ave     Quonsett     RI
111         Margolis        3 Chester Ave      Westerley    RI
112         Frazier         7 Conch Rd         New London   CT
123         Chen            163 Namcock Rd     Attleboro    MA
128         Steckert        14 Homestead       Norwich      CT
</pre></div>
</div>
<ol class="loweralpha simple" start="2">
<li><p>INVOICE Relation</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>INVOICE NO      DATE             AMOUNT             PATIENT ID
71115           11/01/92         255.00             112
71116           11/03/92         121.25             123
71117           11/08/92         325.00             111
71118           11/08/92          48.50             112
71119           11/10/92          88.00             107
71120           11/12/92         245.40             111
71121           11/15/92         150.00             112
71122           11/17/92         412.00             128
71123           11/22/92         150.00             112
</pre></div>
</div>
<p>An important characteristic of the relational model is that records stored
in one table can be related to records stored in other tables by matching
common data values from the different tables.  Thus data in different
relations can be tied together, or integrated.  For example, in the above
figure, invoice 71115 in the INVOICE relation is related to Patient 112,
Frazier, in the Patient relation because they both have the same patient ID.
Invoices 71118, 71121, and 71123 are also related to Patient 112.</p>
<p>A database in the relational model is made up of a collection of
interrelated relations.  Each relation represents data (to the users of the
database) as a two-dimensional table.  The terms <em>relation</em> and <em>table</em> are
interchangeable.  For the remainder of the text, the term <em>table</em> will be
used when referring to a relation.  Access to data in the database is
accomplished in two ways.  The first way is by writing application programs
written in procedural languages, such as Rampart JavaScript, that add,
modify, delete, and retrieve data from the database through the use of
added Texis functions.  These functions are used to issue requests to the DBMS.
The second method of accessing data is accomplished by issuing commands, or
queries using the <code class="docutils literal notranslate"><span class="pre">tsql</span></code> command line utility to find certain data.  In
both cases, the language used is called a <em>query language</em>, which is a
nonprocedural language characterized by high-level English-like commands
such as <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code>, <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>, <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>, etc.  Structured Query Language
(SQL, also pronounced “Sequel”) is an example of a nonprocedural query
language, and is the language used by Texis.</p>
</div>
</div>
<div class="section" id="creating-a-database">
<h1>Creating a Database<a class="headerlink" href="#creating-a-database" title="Permalink to this headline">¶</a></h1>
<p>In order to define a table and insert data, a new Texis database needs to be
created. This can be done from the command line or in JavaScript.</p>
<p>A database is a directory/folder on the filesystem that normally contains
all the files necessary to store and index the data belonging to the
database.  When Texis creates a new database, it also creates the specified
directory/folder and related system files automatically.  As such, the
directory/folder specified for Texis to use should not (yet) exist.</p>
<div class="section" id="creating-db-from-command-line">
<h2>Creating DB from Command Line<a class="headerlink" href="#creating-db-from-command-line" title="Permalink to this headline">¶</a></h2>
<p>Using the <code class="docutils literal notranslate"><span class="pre">tsql</span></code> utility, a new database can be created as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>tsql -m -d /path/to/my/db
</pre></div>
</div>
<p>In the above example:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/path/to/my</span></code> must exist and have the appropriate permissions for a new
directory/folder to be created by the current user.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/path/to/my/db</span></code> must <strong>not</strong> exist.  It will be created by Texis.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-m</span></code> option specifies that the database should be created.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-d</span></code> option specifies which database to use.</p></li>
</ul>
</div>
<div class="section" id="creating-db-from-javascript">
<h2>Creating DB from JavaScript<a class="headerlink" href="#creating-db-from-javascript" title="Permalink to this headline">¶</a></h2>
<p>A database can also be created from within Rampart JavaScript using the
<a class="reference internal" href="rampart-sql.html#initconst"><span class="std std-ref">init() constructor</span></a> <span class="green">Function</span>.  See the
<a class="reference internal" href="rampart-sql.html#database-functions"><span class="std std-ref">Database Functions</span></a> section for more information.</p>
</div>
</div>
<div class="section" id="table-definition">
<h1>Table Definition<a class="headerlink" href="#table-definition" title="Permalink to this headline">¶</a></h1>
<p>Texis permits users to define, access, and manipulate data stored in a
database. The following describes how a table is defined and deleted with
the example of a table holding resumes.</p>
<div class="section" id="creating-the-resume-table">
<h2>Creating the Resume Table<a class="headerlink" href="#creating-the-resume-table" title="Permalink to this headline">¶</a></h2>
<p>The example below shows a hypothetical resume database for current or
potential employees.  The first step is creating the RESUME table.  This
table is created by issuing the <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> command.</p>
<p>Note that the examples below show only the SQL statements.  Such statements
can be used in the sql.<a class="reference internal" href="rampart-sql.html#exec"><span class="std std-ref">exec()</span></a> function described above, or from the
command line using the <code class="docutils literal notranslate"><span class="pre">tsql</span></code> utility.</p>
<p>Consider the following:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span>  <span class="n">RESUME</span>
  <span class="p">(</span> <span class="n">RES_ID</span>  <span class="nb">CHAR</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="n">RNAME</span>   <span class="nb">CHAR</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
    <span class="n">JOB</span>     <span class="nb">CHAR</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
    <span class="n">EDUC</span>    <span class="nb">CHAR</span><span class="p">(</span><span class="mi">60</span><span class="p">),</span>
    <span class="n">EXP</span>     <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
  <span class="p">);</span>
</pre></div>
</div>
<p>SQL statements as passed to Texis can be entered on one or more lines.</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">tsql</span></code>, multiple statements may be entered and separated/terminated
with a <code class="docutils literal notranslate"><span class="pre">;</span></code> (semicolon).  Using sql.<a class="reference internal" href="rampart-sql.html#exec"><span class="std std-ref">exec()</span></a>, only one statement may be
given for each call, and the <code class="docutils literal notranslate"><span class="pre">;</span></code> (semicolon) is optional.</p>
<p>Indenting is recommended to improve readability, but it is not required.</p>
<p>Note that the list of column definitions is enclosed in parentheses and that
each column definition is separated from the next column definition by a
<code class="docutils literal notranslate"><span class="pre">,</span></code> (comma).  In all examples in this text, each SQL statement is shown in
uppercase letters to help identify what is to be entered.  However, in
most cases the statement can be in either upper or
lowercase.</p>
<p>The first line in the <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> statement identifies the name
of the table: RESUME.  The next five lines define the five columns that make
up the RESUME table.  The data types chosen to define each column are
explained further on in this chapter.</p>
<ol class="arabic">
<li><p>The first column, named <code class="docutils literal notranslate"><span class="pre">RES_ID</span></code>, stores the resume’s identification
number (ID). Five characters are allowed for a Resume ID (e.g. -
‘<code class="docutils literal notranslate"><span class="pre">R243</span></code>’ or ‘<code class="docutils literal notranslate"><span class="pre">R-376</span></code>’).</p></li>
<li><p>The second column, named <code class="docutils literal notranslate"><span class="pre">RNAME</span></code>, stores the name of the resume’s job
applicant. No name longer than 15 characters can be stored in this
column.</p></li>
<li><p>The third column, named <code class="docutils literal notranslate"><span class="pre">JOB</span></code>, stores the job or jobs the person is
applying for. A maximum of 15 characters is allowed for this column.</p></li>
<li><p>The fourth column, named <code class="docutils literal notranslate"><span class="pre">EDUC</span></code>, stores a brief description of the
applicant’s education. A maximum of 60 characters is allowed for this
column. Note: One could choose to define <code class="docutils literal notranslate"><span class="pre">EDUC</span></code> with <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> rather
than <code class="docutils literal notranslate"><span class="pre">CHAR</span></code>, so that a full educational description could be entered
without regard to waste of allocated space.</p></li>
<li><p>The fifth column, named <code class="docutils literal notranslate"><span class="pre">EXP</span></code>, stores the full text description of the
applicant’s job experience as included in the resume. You have two
choices for the text field:</p>
<ol class="arabic simple">
<li><p>You can store the entire description in the Texis table. This is
useful for short descriptive lines, for abstracts of one or more
paragraphs, or for short reports of one to two pages as depicts the
usual resume.  Data type would be defined as a variable length
character <code class="docutils literal notranslate"><span class="pre">VARCHAR(x)</span></code> where <code class="docutils literal notranslate"><span class="pre">x</span></code> indicates the suggested number of
characters.</p></li>
<li><p>You can store filenames in the Texis table. In this case Texis
would use the filename to direct it to the text of the actual
file. Data type would be defined as <code class="docutils literal notranslate"><span class="pre">INDIRECT</span></code> rather than
<code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code>.</p></li>
</ol>
<p>In our <code class="docutils literal notranslate"><span class="pre">EXP</span></code> text column for the RESUME table we have chosen to store
the full text in the Texis table, as concept searches of this column
are part of almost every resume search request. If we only
occasionally referred to the full text content, we might prefer to
store filenames which would point to the full text only when
necessary.</p>
</li>
</ol>
<p>Tables defined with the <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> command are referred to as <em>base
tables</em>.  The table definition is automatically stored in a data dictionary
referred to as the <a class="reference internal" href="sql4.html#system-catalog"><span class="std std-ref">System Catalog</span></a>.  This catalog is made up of
various tables that store descriptive and statistical information related to
the database.  The catalog can be accessed to retrieve information about the
contents and structure of the database.  The <a class="reference internal" href="sql4.html#system-catalog"><span class="std std-ref">System Catalog</span></a> is
discussed in more detail in Chapter <a class="reference internal" href="sql4.html#administration-of-the-database"><span class="std std-ref">Administration of the Database</span></a>.
As shown in the Figure below, the CREATE TABLE command results in an empty table.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>RES_ID RNAME            JOB            EDUC         EXP
(No data is stored in the table at the time it is created.)
</pre></div>
</div>
</div>
<div class="section" id="inserting-data-into-the-resume-table">
<h2>Inserting Data into the Resume Table<a class="headerlink" href="#inserting-data-into-the-resume-table" title="Permalink to this headline">¶</a></h2>
<p>Once the table has been created, and before any data can be retrieved,
data must be added to the table using the <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> command. The first
row is added to the RESUME table as follows:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">RESUME</span>
<span class="k">VALUES</span> <span class="p">(</span><span class="s1">&#39;R323&#39;</span><span class="p">,</span><span class="s1">&#39;Perkins, Alice&#39;</span><span class="p">,</span><span class="s1">&#39;Snr Engineer&#39;</span><span class="p">,</span>
        <span class="s1">&#39;M.B.A. 1984 George Washington Univ&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Presently employed at ...&#39;</span><span class="p">)</span> <span class="p">;</span>
</pre></div>
</div>
<p><strong>Syntax Notes:</strong></p>
<ul class="simple">
<li><p>Columns defined as <code class="docutils literal notranslate"><span class="pre">CHAR</span></code> (character) and <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> (variable length
character) have values enclosed in single quotes.</p></li>
<li><p>Parentheses must be placed around the set of data values.</p></li>
<li><p>Each data value is separated by a comma.</p></li>
<li><p>In Rampart, <a class="reference internal" href="rampart-sql.html#sql-params"><span class="std std-ref">SQL Parameters</span></a> may be used to insert
JavaScript variables into columns.</p></li>
</ul>
<p>In the above statement, one row of data was stored in the RESUME table.
The figure below shows the RESUME table after the first record has
been added.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>RES_ID RNAME          JOB          EDUC       EXP
R323   Perkins, Alice Snr Engineer M.B.A. ... Presently employed ...
</pre></div>
</div>
<p>To add the second row into the RESUME table, the <code class="docutils literal notranslate"><span class="pre">INSERT</span></code>
command can be used again.</p>
<p>Example:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">RESUME</span>
<span class="k">VALUES</span> <span class="p">(</span><span class="s1">&#39;R421&#39;</span><span class="p">,</span><span class="s1">&#39;Smith, James&#39;</span><span class="p">,</span><span class="s1">&#39;Jr Analyst&#39;</span><span class="p">,</span>
        <span class="s1">&#39;B.A. 1982 Radford University&#39;</span>
        <span class="s1">&#39;Experience has been in ...&#39;</span><span class="p">)</span> <span class="p">;</span>
</pre></div>
</div>
<p>The contents of the RESUME table would be as follows (after two
rows have been inserted):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>RES_ID RNAME          JOB          EDUC       EXP
R323   Perkins, Alice Snr Engineer M.B.A. ... Presently employed ...
R421   Smith, James   Jr Analyst   B.A. ...   Experience has been ...
</pre></div>
</div>
<p>Additional <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> commands are used to enter the RESUME data, as was
illustrated above. A more complete description of the
<code class="docutils literal notranslate"><span class="pre">INSERT</span></code> command appears in <a class="reference internal" href="sql4.html#keeping-the-database-current"><span class="std std-ref">Keeping the Database Current</span></a>.</p>
</div>
<div class="section" id="defining-a-table">
<h2>Defining a Table<a class="headerlink" href="#defining-a-table" title="Permalink to this headline">¶</a></h2>
<p>As illustrated in the creation of the RESUME table, tables are created
in Texis by specifying their structure and characteristics and
executing a CREATE TABLE command.</p>
<p>The form of this command is:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="p">[</span><span class="k">table</span><span class="o">-</span><span class="k">type</span><span class="p">]</span> <span class="k">table</span><span class="o">-</span><span class="n">name</span>
  <span class="p">(</span><span class="k">column</span><span class="o">-</span><span class="n">name1</span> <span class="k">data</span><span class="o">-</span><span class="k">type</span>
   <span class="p">[,</span> <span class="k">column</span><span class="o">-</span><span class="n">name2</span> <span class="k">data</span><span class="o">-</span><span class="k">type</span><span class="p">]</span> <span class="p">...)</span> <span class="p">;</span>
</pre></div>
</div>
<p><strong>Syntax Notes</strong>: A SQL statement may contain optional clauses or
keywords. These optional parts are included in the statement only if
needed. Any clause within brackets ‘<code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">xxx</span> <span class="pre">]</span></code>’ indicates an optional
clause.</p>
<div class="section" id="command-discussion">
<h3>Command Discussion<a class="headerlink" href="#command-discussion" title="Permalink to this headline">¶</a></h3>
<p>The CREATE TABLE command gives the name of the table, the name of each
column in the table, and the type of data placed in each column. It can
also indicate whether null values are permitted in columns.</p>
<dl>
<dt>Table Type:</dt><dd><p>When creating a table, a table type may be specified. A
standard database table will be created if no type is specified.
Specifying a <code class="docutils literal notranslate"><span class="pre">RAM</span></code> table will create a table that only exists in
memory for the current database connection. The table is not added
to the system catalog, and is not visible to other database
connections. It can be used as a temporary working table in an
application. Within Rampart, closing or switching
databases may remove the temporary table.
A <code class="docutils literal notranslate"><span class="pre">BTREE</span></code> table creates a table that is inherently indexed by the
fields in the order listed. You can not create other indexes on a
<code class="docutils literal notranslate"><span class="pre">BTREE</span></code> table. This can be useful for key-lookup tables that have
a lot of small rows.</p>
</dd>
<dt>Table Names:</dt><dd><p>Each table in Texis is assigned a name. A table name can have up to
18 characters (case is significant). The first character must be a
letter, but the remaining characters can include numbers, letters,
and the underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>) character. Table names may not be the
same as SQL keywords or data types. For example, <code class="docutils literal notranslate"><span class="pre">RESUME</span></code>,
<code class="docutils literal notranslate"><span class="pre">BUDGET93</span></code>, and <code class="docutils literal notranslate"><span class="pre">PROD_TEST</span></code> are all valid table names.</p>
</dd>
<dt>Column Names:</dt><dd><p>A column stores data on one attribute. In our example, we have
attributes such as Resume ID, job sought, education, and experience.
Each column within a table has a unique name and may consist of up
to 18 characters (case is significant). The first character must be
a letter and the remaining characters may consist of letters,
numbers, and the underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>) character. No blank spaces are
allowed in the column name. Table names may not be the same as SQL
keywords or data types. The table below shows examples of valid
and invalid column names.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 29%" />
<col style="width: 44%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Valid Column Names</p></th>
<th class="head"><p>Invalid Column Names</p></th>
<th class="head"><p>Reason Invalid</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">EMPNBR</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">EMP-NBR</span></code></p></td>
<td><p>Hyphen is not allowed.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">EMP_NBR</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">EMP.NBR</span></code></p></td>
<td><p>Period is not allowed.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">COST1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">COST_IN_$</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">$</span></code> is not allowed.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">COST_PER_MILE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">COST</span> <span class="pre">PER</span> <span class="pre">MILE</span></code></p></td>
<td><p>Spaces are not allowed.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SALES1991</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1991SALES</span></code></p></td>
<td><p>Name cannot start with a number.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Where</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">WHERE</span></code></p></td>
<td><p>Can not be SQL keyword.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Date</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td><p>Can not be SQL data type.</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p id="datatypes">Data Types:</p>
<blockquote>
<div><p>Each column within a table can store only one type of data. For
example, a column of names represents <em>character</em> data, a column
storing units sold represents <em>integer</em> data, and a column of file
dates represents <em>time</em> data. In Texis, each column name defined in
the CREATE TABLE statement has a data type declared with it. These
data types include <em>character</em>, <em>byte</em>, <em>integer</em>, <em>smallint</em>,
<em>float</em>, <em>double</em>, <em>date</em>, <em>varchar</em>, <em>counter</em>, <em>strlst</em>, and
<em>indirect</em>. The table below illustrates the general format for
each data type. A description of each of the Data Types listed in
the following Table.</p>
</div></blockquote>
<blockquote id="dtypes">
<div><table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 26%" />
<col style="width: 26%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type of Data</p></th>
<th class="head"><p>Texis Syntax</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Data Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Character</p></td>
<td><p>CHAR(length)</p></td>
<td><p>CHAR(10)</p></td>
<td><p>SMITH</p></td>
</tr>
<tr class="row-odd"><td><p>Character</p></td>
<td><p>CHARACTER(length)</p></td>
<td><p>CHARACTER(25)</p></td>
<td><p>10 Newman Rd</p></td>
</tr>
<tr class="row-even"><td><p>Byte</p></td>
<td><p>BYTE(length)</p></td>
<td><p>BYTE(2)</p></td>
<td><p>DE23</p></td>
</tr>
<tr class="row-odd"><td><p>Numeric</p></td>
<td><p>LONG</p></td>
<td><p>LONG</p></td>
<td><p>657899932</p></td>
</tr>
<tr class="row-even"><td><p>Numeric</p></td>
<td><p>INTEGER</p></td>
<td><p>INTEGER</p></td>
<td><p>657899932</p></td>
</tr>
<tr class="row-odd"><td><p>Numeric</p></td>
<td><p>SMALLINT</p></td>
<td><p>SMALLINT</p></td>
<td><p>-432</p></td>
</tr>
<tr class="row-even"><td><p>Numeric</p></td>
<td><p>FLOAT</p></td>
<td><p>FLOAT</p></td>
<td><p>8.413E-04</p></td>
</tr>
<tr class="row-odd"><td><p>Numeric</p></td>
<td><p>DOUBLE</p></td>
<td><p>DOUBLE</p></td>
<td><p>2.873654219543E+100</p></td>
</tr>
<tr class="row-even"><td><p>Numeric</p></td>
<td><p>UNSIGNED INTEGER</p></td>
<td><p>UNSIGNED INTEGER</p></td>
<td><p>4000000000</p></td>
</tr>
<tr class="row-odd"><td><p>Numeric</p></td>
<td><p>UNSIGNED SMALLINT</p></td>
<td><p>UNSIGNED SMALLINT</p></td>
<td><p>60000</p></td>
</tr>
<tr class="row-even"><td><p>Date/Time</p></td>
<td><p>DATE</p></td>
<td><p>DATE</p></td>
<td><p>719283474</p></td>
</tr>
<tr class="row-odd"><td><p>Bytes</p></td>
<td><p>VARBYTE(length)</p></td>
<td><p>VARBYTE(16)</p></td>
<td><p>DE23..</p></td>
</tr>
<tr class="row-even"><td><p>Text</p></td>
<td><p>VARCHAR(length)</p></td>
<td><p>VARCHAR(200)</p></td>
<td><p>“The subject of …”</p></td>
</tr>
<tr class="row-odd"><td><p>Text</p></td>
<td><p>INDIRECT</p></td>
<td><p>INDIRECT</p></td>
<td><p>“/path/to/my/file.ext”</p></td>
</tr>
<tr class="row-even"><td><p>Counter</p></td>
<td><p>COUNTER</p></td>
<td><p>COUNTER</p></td>
<td><p>2e6cb55800000019</p></td>
</tr>
<tr class="row-odd"><td><p>String list</p></td>
<td><p>STRLST</p></td>
<td><p>STRLST</p></td>
<td><p>apple,orange,peach,</p></td>
</tr>
</tbody>
</table>
<dl>
<dt>CHAR(length):</dt><dd><p>Used to store character data, such as names, job titles, addresses,
etc.  Length represents the maximum number of characters that can be
stored in this column.  CHAR can hold the value of any ASCII
characters 1-127, as well as UTF-8 characters.  The size of the field
is limited absolutely to the length specified.  Note that VARCHAR will
be, in most cases, prefered as it is more flexible.</p>
</dd>
<dt>CHARACTER(length):</dt><dd><p>Same as CHAR, used to store character data, an alternate
supported syntax. As with CHAR, length represents the maximum
number of characters that can be stored in this column.</p>
</dd>
<dt>BYTE:</dt><dd><p>Similar to CHAR but with significant differences, BYTE is used
to store any unsigned (non-negative) ASCII values from 0-255.
Specifying BYTE indicates each is a one byte quantity. A byte
would be used to store a small number less than
255 such as age, or perhaps a flag. A VARBYTE can also be used
where the length of specified characters is variable rather than
fixed (e.g. storing arbitrary binary data).</p>
</dd>
<dt>LONG:</dt><dd><p>Used to store large whole numbers; i.e., those without a
fractional part, such as population, units sold, sales in
dollars. The range of long values will depend on the platform
being used. For most platforms it is identical to INTEGER.</p>
</dd>
<dt>INTEGER:</dt><dd><p>Used to store large whole numbers to ensure a
32-bit storage unit. The largest integer value is +2147483647.
The smallest integer value is -2147483648.</p>
</dd>
<dt>UNSIGNED INTEGER:</dt><dd><p>Used for similar purposes as INTEGER when the number
will never be less than zero. It also extends the maximum value
from 2,147,483,647 to 4,294,967,295. This is synonymous with
DWORD.</p>
</dd>
<dt>SMALLINT:</dt><dd><p>Used to store small whole numbers that require few digits; for
example, age, weight, temperature. The largest value is +32,767.
The smallest value is -32,768.</p>
</dd>
<dt>UNSIGNED SMALLINT:</dt><dd><p>Can store positive numbers in the range from 0 to 65,535. Can be
used in many of the same places as SMALLINT.</p>
</dd>
<dt>INT64:</dt><dd><p>Used to store large whole numbers when a 64-bit quantity must be
assured (LONG size varies by platform). Value range is
-9,223,372,036,854,775,808 through +9,223,372,036,854,775,807.</p>
</dd>
<dt>UINT64:</dt><dd><p>Similar to INT64, but unsigned. Value range is 0 through
18,446,744,073,709,551,616.</p>
</dd>
<dt>FLOAT:</dt><dd><p>Used to store real numbers where numerical precision is
important. Very large or very small numbers expressed in
scientific notation (E notation).</p>
</dd>
<dt>DOUBLE:</dt><dd><p>Used to hold large floating point numbers. Having the
characteristics of a FLOAT, its precision is greater and would
be used where numerical precision is the most important
requirement.</p>
</dd>
<dt>DATE:</dt><dd><p>Used to store time measured in integer seconds since 00:00:00
Jan. 1 1970, GMT (Greenwich mean time). When entered in this
fashion the format is an integer representing an absolute number
of seconds; e.g., <code class="docutils literal notranslate"><span class="pre">719283474</span></code>. The DATE data type is used to
avoid confusions stemming from multi-sourced information
originating from different time zone notations. This data type
is entered by a program function rather than manually, and would
generally be converted to calendar time before being shown to
the user. DATEs may also be entered as strings representing a
date/time format such as <code class="docutils literal notranslate"><span class="pre">'1994-03-05</span> <span class="pre">3:00pm'</span></code></p>
</dd>
<dt>VARCHAR(length):</dt><dd><p>Used to store text field information of variable size in a Texis table.
The specified length is offered as a suggestion only, as this data
type can hold an unlimited number of characters. In the example
in <a class="reference internal" href="#dtypes"><span class="std std-ref">Datatypes Table</span></a>, there may be a short description of the
text, or a relatively small abstract which is stored in the
field of the column itself. However the field can handle text of any
size up to one gigabyte.</p>
</dd>
<dt>VARBYTE(length):</dt><dd><p>Similar to <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> Used to store a byte field information of
variable size. The specified length is offered as a suggestion only,
as this data type can hold an unlimited number of bytes up to one
gigabyte.</p>
</dd>
<dt>BLOB:</dt><dd><p>Used to store text, graphic images, audio, and so on, where the
object is not stored in the table itself, but is indirectly held
in a BLOB field. BLOB stands for Binary Large Object, and can be
used to store the content of many fields or small files at once,
eliminating the need for opening and closing many files while
performing a search. BLOB is used when having a specific
filename is not desired. The BLOB is created and managed at a
system level. The total data held for all BLOBs in a table is
limited by the filesystem. The BLOB file is not accessed unless
the data in it is needed. This will improve the performance of
queries that do not need to access the data. This can also be
useful for creating a <code class="docutils literal notranslate"><span class="pre">METAMORPH</span> <span class="pre">INVERTED</span></code> or <code class="docutils literal notranslate"><span class="pre">FULLTEXT</span></code>
index, and do not allow post processing, and do not display the actual
contents of the record, as the data will not be accessed at all,
and can be removed. This should only be done with extreme
caution.</p>
</dd>
<dt>BLOBZ:</dt><dd><p>Similar to BLOB fields, except that each BLOBZ’s data is
compressed before storing on disk, and is decompressed upon
reading from disk. The compression/decompression is done
internally. Alternatively, it can be handled externally via the
executables specified by the Blob Compress EXE and Blob
Uncompress EXE commands in the <code class="docutils literal notranslate"><span class="pre">[Texis]</span></code> section of the
<code class="docutils literal notranslate"><span class="pre">texis.ini</span></code> configuration file. External compression allows
custom compression types to be deployed – perhaps better than
the <code class="docutils literal notranslate"><span class="pre">gzip</span></code> format supported internally by Texis – but at a
speed penalty due to the overhead of running the executables.</p>
</dd>
<dt>INDIRECT:</dt><dd><p>Used to store filenames which point to data stored in some other
location. Most frequently an INDIRECT column would point to
files containing quantities of full text. Only one filename may
be stored in an INDIRECT field. The filenames can be inserted
with SQL by specifying the filename as a string, or through a
program, which might generate the files to store the data. The
choice of storing text or filenames only in Texis will depend on
how the files will be used as well as their sizes.
INDIRECT can be used to point to images or other objects as well
as text, although currently only text files can be
meaniningfully indexed.</p>
</dd>
<dt>COUNTER:</dt><dd><p>This field holds an 8 byte value, which can be made unique
across all tables in the database. To insert a counter value in
SQL, the <code class="docutils literal notranslate"><span class="pre">COUNTER</span></code> keyword is used in the insert clause. A
counter is made up of two fields, a time, and a sequence number.
This allows the field to be compared with times, e.g., to find all
records inserted before a particular time.</p>
</dd>
<dt>STRLST:</dt><dd><p>A string list is used to hold an arbitrary number of strings. The
strings are delimited by a user defined character in the input
string. The delimiter character is printed as the last character
in the result string when a <code class="docutils literal notranslate"><span class="pre">strlst</span></code> value is converted to a
<code class="docutils literal notranslate"><span class="pre">varchar</span></code> result string (this aids conversion back to
<code class="docutils literal notranslate"><span class="pre">strlst</span></code> when the <a class="reference internal" href="sql-set.html#varchartostrlstmode"><span class="std std-ref">varcharToStrlstMode</span></a> setting is
“<code class="docutils literal notranslate"><span class="pre">lastchar</span></code>”). This type is most useful when combined with an
application which needs lists of strings, and set-like operators
such as <code class="docutils literal notranslate"><span class="pre">IN</span></code>, <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code> or <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code>. Other operators are generally
undefined for strlst, though
equality (“<code class="docutils literal notranslate"><span class="pre">=</span></code>” comparison etc.) is defined to be monolithic
string-compare of the entire list; equality of strlst and
varchar is the same, treating the varchar as a one-item strlst
(if non-empty) or empty strlst (if empty).</p>
<p>In Rampart JavaScript, <a class="reference internal" href="sql-set.html#varchartostrlstmode"><span class="std std-ref">varcharToStrlstMode</span></a> defaults to
“<code class="docutils literal notranslate"><span class="pre">json</span></code>” so that a JavaScript or JSON <span class="green">Array</span> of
<span class="green">Strings</span> may be specified.</p>
<p>Example using JavaScript variable:</p>
<p><code class="docutils literal notranslate"><span class="pre">sql.exec(&quot;insert</span> <span class="pre">into</span> <span class="pre">mytable</span> <span class="pre">values</span> <span class="pre">(?)&quot;,</span> <span class="pre">[</span> <span class="pre">[&quot;a&quot;,</span> <span class="pre">&quot;b&quot;,</span> <span class="pre">&quot;c&quot;]</span> <span class="pre">]);</span></code></p>
<p>Example using JSON:</p>
<p><code class="docutils literal notranslate"><span class="pre">sql.exec(&quot;insert</span> <span class="pre">into</span> <span class="pre">mytable</span> <span class="pre">values</span> <span class="pre">(?)&quot;,</span> <span class="pre">[</span> <span class="pre">'[&quot;a&quot;,</span> <span class="pre">&quot;b&quot;,</span> <span class="pre">&quot;c&quot;]'</span> <span class="pre">]);</span></code></p>
<p>In these examples, “mytable” is a table with a single STRLST column.</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">tsql</span></code> the same can be accomplished as such:</p>
<p><code class="docutils literal notranslate"><span class="pre">tsql</span> <span class="pre">&quot;insert</span> <span class="pre">into</span> <span class="pre">mytable</span> <span class="pre">values(convert(</span> <span class="pre">'a,b,c,',</span> <span class="pre">'strlst',</span> <span class="pre">'lastchar'</span> <span class="pre">))&quot;</span></code></p>
<p>See Server Function <a class="reference internal" href="sql-server-funcs.html#convert"><span class="std std-ref">convert</span></a>() for more information.</p>
</dd>
</dl>
<p>Note that the order in which the columns are listed in the <code class="docutils literal notranslate"><span class="pre">CREATE</span>
<span class="pre">TABLE</span></code> command is the order in which the column names will appear in
the table.</p>
<p>Note also that in addition to supporting fixed length forms of <code class="docutils literal notranslate"><span class="pre">CHAR</span></code>,
<code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code> and so on, there are corresponding variable
length data types which can be used when appropriate, such as
<code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> or <code class="docutils literal notranslate"><span class="pre">VARBYTE</span></code>.  The length following
<code class="docutils literal notranslate"><span class="pre">CHAR</span></code>, as in <code class="docutils literal notranslate"><span class="pre">CHAR(100)</span></code>, indicates that 100 is the maximum number
of allowed characters.  Each record with such a data type defined will
have a size of 100 characters, regardless of whether 3 characters, 57
characters, or even a NULL value is entered.  The length following
<code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code>, as in <code class="docutils literal notranslate"><span class="pre">VARCHAR(100)</span></code>, indicates that 100 characters is a
suggested length.  If an entry of 350 characters is required in this
field, <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> will make allowances to handle it.  The 100 character
suggestion in this case is used for memory allocation, rather than field
length limitation.  Therefore a <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code>/<code class="docutils literal notranslate"><span class="pre">VARBYTE</span></code> length should be
entered as the average, rather than the largest size for that field.
Entering an extremely large length to accommodate one or two unusual
entries would impair the handling of memory for normal operations.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="removing-a-table">
<h2>Removing a Table<a class="headerlink" href="#removing-a-table" title="Permalink to this headline">¶</a></h2>
<p>When a table is no longer needed, it is deleted with the DROP TABLE
command. The format of this command is:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DROP</span> <span class="k">TABLE</span>  <span class="k">table</span><span class="o">-</span><span class="n">name</span> <span class="p">;</span>
</pre></div>
</div>
<p>The information about the indicated table is removed from the system
catalog tables that Texis maintains on all tables in the database. In
effect, the table can no longer be accessed, added to, modified, or have data
deleted. From the user’s viewpoint, the table definition and the data
stored in the table have been eliminated.
Indirect files referenced within the dropped table are not deleted
unless they are Texis managed indirects under the database. Thus
having indirects pointing to externally managed files, they won’t be
lost when the table is dropped. For example, if the RESUME table becomes
no longer needed, you can delete this table. If you enter the following:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">RESUME</span><span class="p">;</span>
</pre></div>
</div>
<p>This chapter has covered the creation and dropping of tables in Texis.
You were also shown how to insert data into a table. In the next
chapter, you will begin to learn how to query the database, the most
important feature of Texis in differentiating its operation from other
database management systems.</p>
</div>
</div>
<div class="section" id="a-first-look-at-queries">
<h1>A First Look at Queries<a class="headerlink" href="#a-first-look-at-queries" title="Permalink to this headline">¶</a></h1>
<p>Texis uses Structured Query Language to give users access to data stored in
a relational database.  The data manipulation component of this language
enables a user to:</p>
<ul class="simple">
<li><p>Write queries to retrieve information from the database.</p></li>
<li><p>Modify existing data in the database.</p></li>
<li><p>Add new data to the database.</p></li>
<li><p>Delete data from the database.</p></li>
</ul>
<p>This and the next two sections will explore the query capabilities
of Texis. In <a class="reference internal" href="sql4.html#dbcurr"><span class="std std-ref">Keeping the Database Current</span></a>, an explanation of the update, insert, and
delete features of the language can be found.</p>
<p>In Texis, data is retrieved from tables using the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> statement,
which consists of one or more <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>-<code class="docutils literal notranslate"><span class="pre">FROM</span></code>-<code class="docutils literal notranslate"><span class="pre">WHERE</span></code>
blocks. The structure of this statement, in its simplest form, consists
of one block containing three clauses: <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>, <code class="docutils literal notranslate"><span class="pre">FROM</span></code>, and
<code class="docutils literal notranslate"><span class="pre">WHERE</span></code>. The form of this statement follows:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="k">column</span><span class="o">-</span><span class="n">name1</span> <span class="p">[,</span> <span class="k">column</span><span class="o">-</span><span class="n">name2</span><span class="p">]</span> <span class="p">...</span>
<span class="k">FROM</span>    <span class="k">table</span><span class="o">-</span><span class="n">name</span>
<span class="p">[</span><span class="k">WHERE</span>  <span class="k">search</span><span class="o">-</span><span class="n">condition</span><span class="p">]</span> <span class="p">;</span>
</pre></div>
</div>
<p><strong>Syntax Notes:</strong>
-  The “…” above indicates additional column names can be added.
-  Brackets ‘<code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code>’ surrounding a clause means the clause is optional.</p>
<div class="section" id="first-look-command-discussion">
<h2>First Look Command Discussion<a class="headerlink" href="#first-look-command-discussion" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">SELECT</span></code>:</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> clause lists the column names to be displayed
or returned in answer to the query.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FROM</span></code>:</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">FROM</span></code> clause indicates the database table “FROM” which
to retrieve the requested information.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">WHERE</span></code>:</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause is used to filter the rows to be
retrieved, based on some criteria, or search condition that is
specified. This clause is optional, and, if omitted, all rows from the
table are retrieved.</p>
</dd>
</dl>
</div>
<div class="section" id="retrieving-from-the-entire-table">
<h2>Retrieving From the Entire Table<a class="headerlink" href="#retrieving-from-the-entire-table" title="Permalink to this headline">¶</a></h2>
<p>For this example, we will use a REPORT table, into which has been loaded
reports submitted by all departments, by title, author, and reference
filename. A three character department code is used, defined in long
form in another DEPARTMENT table.</p>
<p>To retrieve the columns, indicate the column names
after the keyword <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>. Using <code class="docutils literal notranslate"><span class="pre">tsql</span></code>, the order in which the column names appear
after the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> clause is the order in which these columns will be
displayed.</p>
<p>Note, the examples below show results as displayed using the <code class="docutils literal notranslate"><span class="pre">tsql</span></code> command line utility.
See sql.<a class="reference internal" href="rampart-sql.html#exec"><span class="std std-ref">exec()</span></a> for usage in Rampart JavaScript.</p>
<p><strong>Example:</strong> To retrieve a list of all report titles, the following statement may be used:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">TITLE</span>
<span class="k">FROM</span>    <span class="n">REPORT</span> <span class="p">;</span>
</pre></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">tsql</span></code>, the result will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>TITLE
Innovations in Disappearing Ink
Disappearing Ink Promotional Campaign
Advertising Budget for 4Q 92
Improvements in Round Widgets
Target Market for Colored Paperclips
Ink Color Panorama
Departmental Meeting Schedule
</pre></div>
</div>
<p>The column name is automatically used as the column heading.
The first line in the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> statement indicates the column name
TITLE is to be displayed. The second line indicates that TITLE is found
in the REPORT table.</p>
<p><strong>Example:</strong> To display report titles, authors, and department, that
information must be specified in the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> clause.  Consider this
statement:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">TITLE</span><span class="p">,</span> <span class="n">AUTHOR</span><span class="p">,</span> <span class="n">DEPT</span>
<span class="k">FROM</span>    <span class="n">REPORT</span> <span class="p">;</span>
</pre></div>
</div>
<p>In the above statement, each column name is separated from the next by a comma, and
columns are displayed in the order you specify in the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> clause.</p>
<p>The results returned will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>TITLE                                  AUTHOR            DEPT
Innovations in Disappearing Ink        Jackson, Herbert  RND
Disappearing Ink Promotional Campaign  Sanchez, Carla    MKT
Advertising Budget for 4Q 92           Price, Stella     FIN
Improvements in Round Widgets          Smith, Roberta    RND
Target Market for Colored Paperclips   Aster, John A.    MKT
Ink Color Panorama                     Jackson, Herbert  RND
Departmental Meeting Schedule          Barrington, Kyle  MGT
</pre></div>
</div>
<div class="section" id="retrieving-all-the-columns">
<h3>Retrieving All the Columns<a class="headerlink" href="#retrieving-all-the-columns" title="Permalink to this headline">¶</a></h3>
<p>All the column names can be selected from a table by placing an <code class="docutils literal notranslate"><span class="pre">*</span></code>
(asterisk) in the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> clause.  Using this syntax, all columns of the
table identified in the <code class="docutils literal notranslate"><span class="pre">FROM</span></code> clause will be returned.  This is an
alternative to listing all the column names in the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> clause.</p>
<p><strong>Example:</strong> Using the REPORT table example, all columns and rows
can be retrieved with the following statement:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="o">*</span>
<span class="k">FROM</span>    <span class="n">REPORT</span> <span class="p">;</span>
</pre></div>
</div>
<p>The results returned will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>TITLE                        AUTHOR           DEPT FILENAME
... Disappearing Ink         Jackson, Herbert RND  /docs/rnd/ink.txt
... Ink Promotional Campaign Sanchez, Carla   MKT  /docs/mkt/promo.rpt
... Budget for 4Q 92         Price, Stella    FIN  /docs/ad/4q.rpt
... Round Widgets            Smith, Roberta   RND  /docs/rnd/widg.txt
... Paperclips               Aster, John A.   MKT  /docs/mkt/clip.rpt
... Color Panorama           Jackson, Herbert RND  /docs/rnd/color.txt
... Meeting Schedule         Barrington, Kyle MGT  /docs/mgt/when.rpt
</pre></div>
</div>
</div>
</div>
<div class="section" id="retrieving-a-subset-of-rows-simple-conditions">
<h2>Retrieving a Subset of Rows: Simple Conditions<a class="headerlink" href="#retrieving-a-subset-of-rows-simple-conditions" title="Permalink to this headline">¶</a></h2>
<p>It is also possible to filter the results to include only
the rows that satisfy one or more conditions. This is acheived by
including the <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause in the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> statement to retrieve a
portion, or subset, of the rows in a table.
A <em>search condition</em> expresses the logic by which Texis
determines which rows of the table are retrieved and which are ignored.
The search condition has many variations. A simple search condition is
formed with a <em>conditional expression</em>, which specifies a comparison
between two values. It has the following format:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>expression    comparison operator    expression
</pre></div>
</div>
<p>The expressions in the conditional expression are usually a column name
or a constant. The comparison operator indicates a mathematical
comparison such as less than, greater than, equal to, etc.
The following table shows the comparison operators allowed in Texis.</p>
<table class="docutils align-default" id="compop">
<colgroup>
<col style="width: 58%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type of Comparison</p></th>
<th class="head"><p>Texis Symbol</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Equal to</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">=</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Less than</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Less than or equal to</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;=</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Greater than</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Greater than or equal to</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Not equal to</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">!=</span></code></p></td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong> The following example assume a DEPARTMENT table which has
listed in it the department code, the long form department name, the
department head, the division to which the department belongs, and the
annual department budget.  The conditional expression to find departments
with a budget above $25,000 can be written:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>BUDGET &gt; 25000
</pre></div>
</div>
<p>In this case BUDGET is being compared to a numeric constant.
The conditional expression to find all departments in the Product
Division is written:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DIV = &#39;PROD&#39;
</pre></div>
</div>
<p>Character constants, sometimes called character strings, are enclosed in
single quotes. In Rampart JavaScript, they may also be specified using
a variable set to a <span class="green">String</span> and a <code class="docutils literal notranslate"><span class="pre">?</span></code> (see <span class="xref std std-ref">sql_params</span>).</p>
<p>The conditional expression can compare numeric values to
one another or string values to one another as just shown.
Each row in the indicated table is evaluated, or tested, separately
based on the condition in the <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause. For each row, the
evaluation of the conditional expression is either true or false. When a
condition is true, a row is retrieved; when the condition is false, the
row is not retrieved. For example, if a department has a $35,000 budget,
then the conditional expression “<code class="docutils literal notranslate"><span class="pre">BUDGET</span> <span class="pre">&gt;</span> <span class="pre">25000</span></code>” is true and the row
is included in the query result. However, if the department had a budget
of $15,000, then the result of the conditional expression
“<code class="docutils literal notranslate"><span class="pre">BUDGET</span> <span class="pre">&gt;</span> <span class="pre">25000</span></code>” is false and the row is not retrieved.</p>
<p><strong>Example:</strong> This statment generates a list of all departments, in long form,
in the Product Division.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">DNAME</span>
<span class="k">FROM</span>    <span class="n">DEPARTMENT</span>
<span class="k">WHERE</span>   <span class="n">DIV</span> <span class="o">=</span> <span class="s1">&#39;PROD&#39;</span> <span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">'PROD'</span></code> is the search condition, and as a character string must be
enclosed in quotes.</p>
<p>The equivalent in Rampart Javascript is as follows:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">sql</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="s2">&quot;select DNAME from DEPARTMENT where DIV = &#39;PROD&#39;;&quot;</span><span class="p">);</span>

<span class="cm">/* or */</span>

<span class="kd">var</span> <span class="nx">division</span><span class="o">=</span><span class="s2">&quot;PROD&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">sql</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="s2">&quot;select DNAME from DEPARTMENT where DIV = ?&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">division</span> <span class="p">]</span> <span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Note that the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>, <code class="docutils literal notranslate"><span class="pre">FROM</span></code> and <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> terms are case insensitive.
However the Column and Table names are <strong>case sensitive</strong>.</p></li>
<li><p>See sql.<a class="reference internal" href="rampart-sql.html#exec"><span class="std std-ref">exec()</span></a> for the structure of the returned <code class="docutils literal notranslate"><span class="pre">res</span></code> variable
in the above example.</p></li>
</ul>
<p>The results returned will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DNAME
Research and Development
Manufacturing
Customer Support and Service
Product Marketing and Sales
</pre></div>
</div>
<p>In the <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause, the condition “DIV must equal PROD” results in
the retrieval of the name of each department in the Product Division. As
only DNAME, the long form departmental name, was requested in the
<code class="docutils literal notranslate"><span class="pre">SELECT</span></code> statement, a list of department names is all that is shown.</p>
<p><strong>Example:</strong> The following statement may be used to develop a list of all
departments with a budget above $25,000.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">DNAME</span><span class="p">,</span> <span class="n">BUDGET</span>
<span class="k">FROM</span>    <span class="n">DEPARTMENT</span>
<span class="k">WHERE</span>   <span class="n">BUDGET</span> <span class="o">&gt;</span> <span class="mi">25000</span> <span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Note that numeric values, such as <code class="docutils literal notranslate"><span class="pre">25000</span></code>, are not enclosed in quotes.</p></li>
</ul>
<p>The results returned will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DNAME                                BUDGET
Finance and Accounting               26000
Corporate Legal Support              28000
Research and Development             27500
Manufacturing                        32000
Strategic Planning and Intelligence  28500
</pre></div>
</div>
</div>
<div class="section" id="retrieving-a-subset-of-rows-compound-conditions">
<h2>Retrieving a Subset of Rows: Compound Conditions<a class="headerlink" href="#retrieving-a-subset-of-rows-compound-conditions" title="Permalink to this headline">¶</a></h2>
<p>The conditions illustrated in the previous section are called simple
conditions because each involves a single comparison. It is also
possible to develop more complex conditions involving two or more
conditional expressions. You combine conditions using the logical
operators AND, OR, or NOT to connect conditional expressions. When two
or more conditions are combined by logical operators, the conditional
expression is called a <em>compound condition</em>. For example, you may want a
list of departments from the Product Division only with budgets under
$20,000.
The form of the compound condition is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>conditional   logical    conditional   logical    conditional
expression1   operator   expression2   operator   expression3
</pre></div>
</div>
<p>As with simple conditional expressions, the evaluation of a compound
condition is either true or false, with true resulting in retrieval of a
row and false resulting in no retrieval.</p>
<div class="section" id="retrieval-using-the-and-operator">
<h3>Retrieval Using the AND Operator<a class="headerlink" href="#retrieval-using-the-and-operator" title="Permalink to this headline">¶</a></h3>
<p>When <code class="docutils literal notranslate"><span class="pre">AND</span></code> is used to connect two conditions, both conditional expression
must be true for the condition to be true and the row retrieved. If any
condition within a compound condition is false, the compound condition
is false and the row is not selected.
For example, if you want to retrieve the records of Corporate Division
Departments with a budget under $10,000 you can write the following
compound condition:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DIV = &#39;CORP&#39;  AND  BUDGET &lt; 12000
</pre></div>
</div>
<p>In this example, <code class="docutils literal notranslate"><span class="pre">AND</span></code> is the logical operator.
The Table below illustrates the four possible cases that can occur
with the logical operator <code class="docutils literal notranslate"><span class="pre">AND</span></code> for the compound condition just described.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 5%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 18%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 17%" />
</colgroup>
<tbody>
<tr class="row-odd"><td></td>
<td><p>Values for</p></td>
<td><p>Values for</p></td>
<td><p>Condition1</p></td>
<td><p>Condition2</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DIV</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BUDGET</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DIV='CORP'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BUDGET&lt;12000</span></code></p></td>
<td><p>Yields</p></td>
<td><p>Row Result</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10500</span></code></p></td>
<td><p>True</p></td>
<td><p>True</p></td>
<td><p>True</p></td>
<td><p>Retrieved</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">28000</span></code></p></td>
<td><p>True</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>Not retrieved</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PROD</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">11000</span></code></p></td>
<td><p>False</p></td>
<td><p>True</p></td>
<td><p>False</p></td>
<td><p>Not retrieved</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PROD</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">27500</span></code></p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>Not retrieved</p></td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong> Based on the above, a list of departments in the Corporate
Division with a budget under $12,000 may be retrieved with the following
statement:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">DNAME</span><span class="p">,</span> <span class="n">DIV</span><span class="p">,</span> <span class="n">BUDGET</span>
<span class="k">FROM</span>    <span class="n">DEPARTMENT</span>
<span class="k">WHERE</span>   <span class="n">DIV</span> <span class="o">=</span> <span class="s1">&#39;CORP&#39;</span> <span class="k">AND</span> <span class="n">BUDGET</span> <span class="o">&lt;</span> <span class="mi">12000</span> <span class="p">;</span>
</pre></div>
</div>
<p>the result displayed will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DNAME                         DIV     BUDGET
Supplies and Procurement      CORP    10500
</pre></div>
</div>
</div>
<div class="section" id="retrieval-using-the-or-operator">
<h3>Retrieval Using the OR Operator<a class="headerlink" href="#retrieval-using-the-or-operator" title="Permalink to this headline">¶</a></h3>
<p>When OR is used to connect two or more conditions, the compound
condition is true if any condition is true, and the row is then
retireved. However, if all of the conditional expressions are false,
then the row is not selected.
For example, suppose management is interested in any Product Division
department OR any department with a budget of $28,000 or greater. This
compound condition can be written as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DIV = &#39;PROD&#39;  OR  BUDGET &gt;= 28000
</pre></div>
</div>
<p>In this case OR is the logical operator used.</p>
<p>The Table below illustrates the four possible cases that can occur
with the logical operator OR for the example just given.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 5%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 18%" />
<col style="width: 21%" />
<col style="width: 10%" />
<col style="width: 17%" />
</colgroup>
<tbody>
<tr class="row-odd"><td></td>
<td><p>Values for</p></td>
<td><p>Values for</p></td>
<td><p>Condition1</p></td>
<td><p>Condition2</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DIV</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BUDGET</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DIV='PROD'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BUDGET&gt;=28000</span></code></p></td>
<td><p>Yields</p></td>
<td><p>Row Result</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PROD</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">32000</span></code></p></td>
<td><p>True</p></td>
<td><p>True</p></td>
<td><p>True</p></td>
<td><p>Retrieved</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PROD</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">27500</span></code></p></td>
<td><p>True</p></td>
<td><p>False</p></td>
<td><p>True</p></td>
<td><p>Retrieved</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">28000</span></code></p></td>
<td><p>False</p></td>
<td><p>True</p></td>
<td><p>True</p></td>
<td><p>Retrieved</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10500</span></code></p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>Not retrieved</p></td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong> Based on the above, to return a list of departments for
management review, which are either in the Product Division or which
have budgets of $28,000 or greater, the following statement may be used:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">DNAME</span><span class="p">,</span> <span class="n">DIV</span><span class="p">,</span> <span class="n">BUDGET</span>
<span class="k">FROM</span>    <span class="n">DEPARTMENT</span>
<span class="k">WHERE</span>   <span class="n">DIV</span> <span class="o">=</span> <span class="s1">&#39;PROD&#39;</span> <span class="k">OR</span> <span class="n">BUDGET</span> <span class="o">&gt;=</span> <span class="mi">28000</span> <span class="p">;</span>
</pre></div>
</div>
<p>the result returned will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DNAME                                DIV     BUDGET
Corporate Legal Support              CORP    28000
Research and Development             PROD    27500
Manufacturing                        PROD    32000
Customer Support and Service         PROD    11000
Product Marketing and Sales          PROD    25000
Strategic Planning and Intelligence  INFO    28500
</pre></div>
</div>
</div>
<div class="section" id="retrieval-using-both-and-and-or-operators">
<h3>Retrieval Using Both AND and OR Operators<a class="headerlink" href="#retrieval-using-both-and-and-or-operators" title="Permalink to this headline">¶</a></h3>
<p>Compound conditions can include both <code class="docutils literal notranslate"><span class="pre">AND</span></code> and <code class="docutils literal notranslate"><span class="pre">OR</span></code> logical operators.
<strong>Example:</strong> If you enter the query:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">DNAME</span><span class="p">,</span> <span class="n">DIV</span><span class="p">,</span> <span class="n">BUDGET</span>
<span class="k">FROM</span>    <span class="n">DEPARTMENT</span>
<span class="k">WHERE</span>   <span class="n">DIV</span> <span class="o">=</span> <span class="s1">&#39;CORP&#39;</span>  <span class="k">AND</span>  <span class="n">BUDGET</span> <span class="o">&lt;</span> <span class="mi">12000</span>  <span class="k">OR</span>  <span class="n">DIV</span> <span class="o">=</span> <span class="s1">&#39;PROD&#39;</span> <span class="p">;</span>
</pre></div>
</div>
<p>the result displayed will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DNAME                         DIV     BUDGET
Supplies and Procurement      CORP    10500
Research and Development      PROD    27500
Manufacturing                 PROD    32000
Customer Support and Service  PROD    11000
Product Marketing and Sales   PROD    25000
</pre></div>
</div>
<p>When you have a combination of <code class="docutils literal notranslate"><span class="pre">AND</span></code> and <code class="docutils literal notranslate"><span class="pre">OR</span></code> operators, the <code class="docutils literal notranslate"><span class="pre">AND</span></code>
operators are evaluated first; then the <code class="docutils literal notranslate"><span class="pre">OR</span></code> operators are evaluated.
Therefore, in the above query, rows from the DEPARTMENT table are retrieved
if they satisfy at least one of the folloiwng conditions:</p>
<ol class="arabic simple">
<li><p>The department is in the Corporate Division with a budget under $12,000.</p></li>
<li><p>The department is in the Product Division.</p></li>
</ol>
</div>
<div class="section" id="retrieval-using-parentheses">
<h3>Retrieval Using Parentheses<a class="headerlink" href="#retrieval-using-parentheses" title="Permalink to this headline">¶</a></h3>
<p>Parentheses may be used within a compound condition to clarify or change
the order in which the condition is evaluated. A condition within
parentheses is evaluted before conditions outside the parentheses.</p>
<p><strong>Example:</strong> Retrieve the department name, division name, and budget of
all departments who have a budget of less than $12,000, and who are
either in the Corporate or the Product Division.</p>
<p>In the following statment:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">DNAME</span><span class="p">,</span> <span class="n">DIV</span><span class="p">,</span> <span class="n">BUDGET</span>
<span class="k">FROM</span>    <span class="n">DEPARTMENT</span>
<span class="k">WHERE</span>   <span class="n">BUDGET</span> <span class="o">&lt;</span> <span class="mi">12000</span>
  <span class="k">AND</span>   <span class="p">(</span><span class="n">DIV</span> <span class="o">=</span> <span class="s1">&#39;CORP&#39;</span> <span class="k">OR</span> <span class="n">DIV</span> <span class="o">=</span> <span class="s1">&#39;PROD&#39;</span><span class="p">)</span> <span class="p">;</span>
</pre></div>
</div>
<p>The results returned will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DNAME                         DIV     BUDGET
Supplies and Procurement      CORP    10500
Customer Support and Service  PROD    11000
</pre></div>
</div>
<p>This query retrieves rows from the DEPARTMENT table that satisfy both of
the following conditions:</p>
<ol class="arabic simple">
<li><p>The department has a budget of under $12,000.</p></li>
<li><p>The department is in either the Corporate Division or the Product Division.</p></li>
</ol>
</div>
<div class="section" id="logical-operator-not">
<h3>Logical Operator NOT<a class="headerlink" href="#logical-operator-not" title="Permalink to this headline">¶</a></h3>
<p>The logical operator <code class="docutils literal notranslate"><span class="pre">NOT</span></code> allows the user to express conditions that are
best expressed in a negative way. In essence, it reverses the logical
value of a condition on which it operates. That is, it accepts all rows
except those that satisfy the condition. The conditional
expression is written with the keyword NOT preceding the condition:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>WHERE  NOT  condition
</pre></div>
</div>
<p>The condition can be a simple condition or a condition containing <code class="docutils literal notranslate"><span class="pre">AND``s</span>
<span class="pre">and</span> <span class="pre">``OR``s.</span> <span class="pre">The</span> <span class="pre">compound</span> <span class="pre">condition</span> <span class="pre">using</span> <span class="pre">``NOT</span></code> is true if the condition
following <code class="docutils literal notranslate"><span class="pre">NOT</span></code> is false; and the compound condition is false if the
condition following <code class="docutils literal notranslate"><span class="pre">NOT</span></code> is true.</p>
<p>The followin example returns all departments who are not in
the Corporate Division:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NOT (DIV = &#39;CORP&#39;)
</pre></div>
</div>
<p>Parentheses are optional but are included to improve readability of the condition.
If a department is in the Product Division, the program evaluates the
condition in the following manner:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 66%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Evaluation Process</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Step 1: <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">(DIV</span> <span class="pre">=</span> <span class="pre">'CORP')</span></code></p></td>
<td><p>Original condition.</p></td>
</tr>
<tr class="row-odd"><td><p>Step 2: <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">('PROD'</span> <span class="pre">=</span> <span class="pre">'CORP')</span></code></p></td>
<td><p>Substitute <code class="docutils literal notranslate"><span class="pre">PROD</span></code> for <code class="docutils literal notranslate"><span class="pre">DIV</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>Step 3: <code class="docutils literal notranslate"><span class="pre">NOT</span></code> (false)‘ - Since <code class="docutils literal notranslate"><span class="pre">PROD</span></code> does not equal <code class="docutils literal notranslate"><span class="pre">CORP</span></code>,
and the condition <code class="docutils literal notranslate"><span class="pre">DIV</span> <span class="pre">=</span> <span class="pre">'CORP'</span></code> is false.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Step 4: true - NOT changes false to true,
and the row is retrieved.</p></td>
<td></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">NOT</span></code> is typically used with logical operators such as <code class="docutils literal notranslate"><span class="pre">IN</span></code>, <code class="docutils literal notranslate"><span class="pre">BETWEEN</span></code>,
<code class="docutils literal notranslate"><span class="pre">LIKE</span></code>, etc., which will be covered in a later section.
In the query condition <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">(DIV</span> <span class="pre">=</span> <span class="pre">'CORP')</span></code>, the condition can be more
direcly written as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>WHERE DIV != &#39;CORP&#39;
</pre></div>
</div>
<p>In this query the ‘<code class="docutils literal notranslate"><span class="pre">!=</span></code>’ operator is used to show that <code class="docutils literal notranslate"><span class="pre">DIV</span></code> must
not be equal to <code class="docutils literal notranslate"><span class="pre">CORP</span></code>.</p>
<p><strong>Example:</strong> The <code class="docutils literal notranslate"><span class="pre">NOT</span></code> operator can be used with more than one expression.
The following statement lists all departments except those in the Corporate
Division or those in the Product Divison:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">DNAME</span><span class="p">,</span> <span class="n">DIV</span>
<span class="k">FROM</span>    <span class="n">DEPARTMENT</span>
<span class="k">WHERE</span>   <span class="k">NOT</span> <span class="p">(</span><span class="n">DIV</span> <span class="o">=</span> <span class="s1">&#39;CORP&#39;</span> <span class="k">OR</span> <span class="n">DIV</span> <span class="o">=</span> <span class="s1">&#39;PROD&#39;</span><span class="p">)</span> <span class="p">;</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">NOT</span></code> precedes the entire condition.</p>
<p>The results returned will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DNAME                                  DIV
Information Systems Management         INFO
Corporate Library                      INFO
Strategic Planning and Intelligence    INFO
</pre></div>
</div>
<p>This statement retrieves the department and division name for all
departments which are not Corporate or Product, revealing a division not
yet retrieved in the previous searches, the Information Division.</p>
</div>
</div>
<div class="section" id="additional-comparison-operators">
<h2>Additional Comparison Operators<a class="headerlink" href="#additional-comparison-operators" title="Permalink to this headline">¶</a></h2>
<p>Texis has several special comparison operators for use with search
conditions. These operators are indicated by the keywords <code class="docutils literal notranslate"><span class="pre">BETWEEN</span></code>, <code class="docutils literal notranslate"><span class="pre">IN</span></code>,
<code class="docutils literal notranslate"><span class="pre">SUBSET</span></code>, <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code>, <code class="docutils literal notranslate"><span class="pre">LIKE</span></code>, <code class="docutils literal notranslate"><span class="pre">LIKER</span></code>, <code class="docutils literal notranslate"><span class="pre">LIKEP</span></code> and <code class="docutils literal notranslate"><span class="pre">LIKE3</span></code>,
<code class="docutils literal notranslate"><span class="pre">LIKEIN</span></code>.</p>
<div class="section" id="range-and-geographical-searches-using-between">
<h3>Range and Geographical Searches Using BETWEEN<a class="headerlink" href="#range-and-geographical-searches-using-between" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">BETWEEN</span></code> operator is used to select rows of data in a given column if
data in a given column contain values within a range.  The general form of
this operator is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>expression  [NOT]  BETWEEN  lower value  AND  upper value
</pre></div>
</div>
<p>The condition is true if the expression is greater than or equal to the
lower value and less than or equal to the upper value. If the NOT
operator is used, the row is retrieved if the expression is less than
the lower value or greater than the upper value.</p>
<p><strong>Example:</strong> The following statement will find all departments whose budgets
are between $15,000 and $25,000:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">DNAME</span><span class="p">,</span> <span class="n">BUDGET</span>
<span class="k">FROM</span>    <span class="n">DEPARTMENT</span>
<span class="k">WHERE</span>   <span class="n">BUDGET</span>  <span class="k">BETWEEN</span>  <span class="mi">15000</span>  <span class="k">AND</span>  <span class="mi">25000</span> <span class="p">;</span>
</pre></div>
</div>
<p>The results returned will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DNAME                              BUDGET
Product Marketing and Sales        25000
Corporate Library                  18500
Information Systems Management     22500
</pre></div>
</div>
<p>The name of each department whose budget is between $15,000 and $25,000
is retrieved. The limits include any budget of $15,000 and of $25,000;
thus the Product Marketing and Sales Department with a budget matching
the upper limit has been included.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">AND</span></code> logical operator can also be used to form a query that selects
values from a range. A query similar to the last example would look like
the following:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">DNAME</span><span class="p">,</span> <span class="n">BUDGET</span>
<span class="k">FROM</span>    <span class="n">DEPARTMENT</span>
<span class="k">WHERE</span>   <span class="n">BUDGET</span> <span class="o">&gt;=</span> <span class="mi">15000</span>  <span class="k">AND</span>  <span class="n">BUDGET</span> <span class="o">&lt;=</span> <span class="mi">25000</span> <span class="p">;</span>
</pre></div>
</div>
<p>The results returned will still be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DNAME                              BUDGET
Product Marketing and Sales        25000
Corporate Library                  18500
Information Systems Management     22500
</pre></div>
</div>
<p>Notice that the results are identical to the output in example where
<code class="docutils literal notranslate"><span class="pre">BETWEEN</span></code> was used in the <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause.
The <code class="docutils literal notranslate"><span class="pre">BETWEEN</span></code> operator can be modified with the logical operator <code class="docutils literal notranslate"><span class="pre">NOT</span></code> so
that rows outside a range will be selected.</p>
<p><strong>Example:</strong> The following statement lists the names of all departments who
do not have a budget in the range of $15,000 to $25,000.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">DNAME</span><span class="p">,</span> <span class="n">BUDGET</span>
<span class="k">FROM</span>    <span class="n">DEPARTMENT</span>
<span class="k">WHERE</span>   <span class="n">BUDGET</span>  <span class="k">NOT</span>  <span class="k">BETWEEN</span>  <span class="mi">15000</span>  <span class="k">AND</span>  <span class="mi">25000</span> <span class="p">;</span>
</pre></div>
</div>
<p>The results returned will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DNAME                                BUDGET
Corporate Legal Support              28000
Supplies and Procurement             10500
Customer Support and Service         11000
Manufacturing                        32000
Research and Development             27500
Strategic Planning and Intelligence  28500
</pre></div>
</div>
<p>This statement retrieves the names of all departments with budgets lower
than $15,000 or higher than $25,000.</p>
</div>
<div class="section" id="geographical-searches-with-between">
<h3>Geographical Searches with BETWEEN<a class="headerlink" href="#geographical-searches-with-between" title="Permalink to this headline">¶</a></h3>
<p>A second form of <code class="docutils literal notranslate"><span class="pre">BETWEEN</span></code> is used for doing geographical searches. In
this form the operator is used as:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>location [NOT] BETWEEN (corner1, corner2)
</pre></div>
</div>
<p>Usage notes:</p>
<ul class="simple">
<li><p>The parentheses are significant, and distinguish the special
two-dimensional geographical form of <code class="docutils literal notranslate"><span class="pre">BETWEEN</span></code> from the normal
one-dimensional range search.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">location</span></code>, <code class="docutils literal notranslate"><span class="pre">corner1</span></code> and <code class="docutils literal notranslate"><span class="pre">corner2</span></code> values all represent single geographical
(latitude/longitude) points – “geocode” values.  This form of the
<code class="docutils literal notranslate"><span class="pre">BETWEEN</span></code> operator will be true for all <code class="docutils literal notranslate"><span class="pre">location</span></code> points that are
within (or on) the rectangular box defined by diagonally-opposite corners
<code class="docutils literal notranslate"><span class="pre">corner1</span></code> and <code class="docutils literal notranslate"><span class="pre">corner2</span></code>.</p></li>
<li><p>The left-side <code class="docutils literal notranslate"><span class="pre">location</span></code> must be a <code class="docutils literal notranslate"><span class="pre">long</span></code> value. It is a
geographically-encoded (“geocode”) value, returned from the SQL function
<a class="reference internal" href="sql-server-funcs.html#latlon2geocode-latlon2geocodearea"><span class="std std-ref">latlon2geocode</span></a>
and corresponds to the physical location of a row’s data.</p></li>
<li><p>The right-side <code class="docutils literal notranslate"><span class="pre">corner1</span></code> and <code class="docutils literal notranslate"><span class="pre">corner2</span></code> points define
diagonally-opposite corners of the bounding box. They are typically
also <code class="docutils literal notranslate"><span class="pre">long</span></code> geocode values. However,
they may each be a single <code class="docutils literal notranslate"><span class="pre">varchar</span></code> (text) value
containing a space- or comma-separated latitude/longitude pair, which
will automatically be converted to geocode format.
E.g.:  <code class="docutils literal notranslate"><span class="pre">location</span> <span class="pre">BETWEEN</span> <span class="pre">('40N</span> <span class="pre">80W',</span> <span class="pre">'41N</span> <span class="pre">81W')</span></code>.</p></li>
<li><p>The bounding box may be computed inline from coordinates with
<a class="reference internal" href="sql-server-funcs.html#latlon2geocode-latlon2geocodearea"><span class="std std-ref">latlon2geocodearea</span></a>;
e.g.  for a 0.5-degree “radius” bounding box centered on 40.5N, 80.5W:
<code class="docutils literal notranslate"><span class="pre">location</span> <span class="pre">BETWEEN</span> <span class="pre">(select</span> <span class="pre">latlon2geocodearea(40.5,</span> <span class="pre">-80.5,</span> <span class="pre">0.5))</span></code></p></li>
<li><p>When used in conjunction with a regular index on the <code class="docutils literal notranslate"><span class="pre">expression</span></code>
column, the <code class="docutils literal notranslate"><span class="pre">BETWEEN</span></code> operator can greatly speed up geographical
searches, as it reduces a two-dimensional AND search (with its
potentially large merge or post-process) into a single-dimensional,
all-index operation.</p></li>
</ul>
</div>
<div class="section" id="set-like-searches-using-in-subset-and-intersect">
<h3>Set-like Searches Using IN, SUBSET and INTERSECT<a class="headerlink" href="#set-like-searches-using-in-subset-and-intersect" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">IN</span></code>, <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code> and <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> operators can be used for set-like
searches on multi-value type fields such as <code class="docutils literal notranslate"><span class="pre">strlst</span></code>.  For example, to
find rows where a query term is present in a strlst column, use <code class="docutils literal notranslate"><span class="pre">IN</span></code>.  To
find rows where a <code class="docutils literal notranslate"><span class="pre">strlst</span></code> column contains <em>any</em> of a list of query terms,
use <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> to find the set intersection of the row and the query set.
To find rows where <em>all</em> query terms must be present in the row, use
<code class="docutils literal notranslate"><span class="pre">SUBSET</span></code>.</p>
</div>
<div class="section" id="searches-using-in">
<h3>Searches Using IN<a class="headerlink" href="#searches-using-in" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">IN</span></code> operator is used to select rows that match one of several listed
values. It behaves similar to the <a class="reference internal" href="#searches-using-subset"><span class="std std-ref">SUBSET</span></a>
operator, i.e. it is true if all left-side value(s) are also
present on the right-side.
The format of this operator is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>expression [NOT] IN (value1, value2, value3 ...)
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">value1</span></code>, <code class="docutils literal notranslate"><span class="pre">value2</span></code>, and so on indicates a list of values. Enclose the entire
list in parentheses. Separate items in the list by commas.</p>
<p><strong>Example:</strong> The following statement lists all departments in either the Corporate,
Product, or Information divisions:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">DNAME</span><span class="p">,</span> <span class="n">DIV</span>
<span class="k">FROM</span>    <span class="n">DEPARTMENT</span>
<span class="k">WHERE</span>   <span class="n">DIV</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">&#39;CORP&#39;</span><span class="p">,</span> <span class="s1">&#39;PROD&#39;</span><span class="p">,</span> <span class="s1">&#39;INFO&#39;</span><span class="p">)</span> <span class="p">;</span>
</pre></div>
</div>
<p>The row is retrieved if a department’s division is in the set of
divisions.</p>
<p>The results returned will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DNAME                                DIV
Management and Administration        CORP
Finance and Accounting               CORP
Corporate Legal Support              CORP
Supplies and Procurement             CORP
Recruitment and Personnel            CORP
Research and Development             PROD
Manufacturing                        PROD
Customer Support and Service         PROD
Product Marketing and Sales          PROD
Information Systems Management       INFO
Corporate Library                    INFO
Strategic Planning and Intelligence  INFO
</pre></div>
</div>
<p>A semantically equivalent (but usually less efficient) query can be
formed using the logical operator <code class="docutils literal notranslate"><span class="pre">OR</span></code>. It looks like the following:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">DNAME</span><span class="p">,</span> <span class="n">DIV</span>
<span class="k">FROM</span>    <span class="n">DEPARTMENT</span>
<span class="k">WHERE</span>   <span class="n">DIV</span> <span class="o">=</span> <span class="s1">&#39;CORP&#39;</span>  <span class="k">OR</span>  <span class="n">DIV</span> <span class="o">=</span> <span class="s1">&#39;PROD&#39;</span>  <span class="k">OR</span>  <span class="n">DIV</span> <span class="o">=</span> <span class="s1">&#39;INFO&#39;</span> <span class="p">;</span>
</pre></div>
</div>
<p>The right-side of the <code class="docutils literal notranslate"><span class="pre">IN</span></code> operator may also be a <code class="docutils literal notranslate"><span class="pre">strlst</span></code> table column,
in which case for each row, the left-side value is compared against each
individual <code class="docutils literal notranslate"><span class="pre">strlst</span></code> item for that row. Parentheses are not needed in
this case:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT UserName
FROM   Users
WHERE  &#39;Administrator&#39; IN GroupMembership;
</pre></div>
</div>
<p>In the above example, the <code class="docutils literal notranslate"><span class="pre">GroupMembership</span></code> column is of type <code class="docutils literal notranslate"><span class="pre">strlst</span></code>,
and contains the list of groups that each user (row) is a member of. The
query will thus return all UserNames that are members of the
“<code class="docutils literal notranslate"><span class="pre">Administrator</span></code>” group.</p>
<p>The left-side of an <code class="docutils literal notranslate"><span class="pre">IN</span></code> operator may also be multi-value (e.g. a
<code class="docutils literal notranslate"><span class="pre">strlst</span></code> parameter), in which case <strong>all</strong> the left-side values must be
present on the right-side (if <a class="reference internal" href="sql-set.html#inmode"><span class="std std-ref">inMode</span></a> is “<code class="docutils literal notranslate"><span class="pre">subset</span></code>”). The behavior
of multi-value types other than <code class="docutils literal notranslate"><span class="pre">strlst</span></code> (on either side of IN) is
currently undefined and thus such types should not be used.
The <code class="docutils literal notranslate"><span class="pre">IN</span></code> operator can be modified with the logical operator <code class="docutils literal notranslate"><span class="pre">NOT</span></code> (note
however that an index cannot be used to optimize such a query).</p>
<p><strong>Example:</strong> The following statement lists all departments which are not in
either the Corporate or the Information divisions:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">DNAME</span><span class="p">,</span> <span class="n">DIV</span>
<span class="k">FROM</span>    <span class="n">DEPARTMENT</span>
<span class="k">WHERE</span>   <span class="n">DIV</span> <span class="k">NOT</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">&#39;CORP&#39;</span><span class="p">,</span><span class="s1">&#39;INFO&#39;</span><span class="p">)</span> <span class="p">;</span>
</pre></div>
</div>
<p>The result displayed will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DNAME                                DIV
Research and Development             PROD
Manufacturing                        PROD
Customer Support and Service         PROD
Product Marketing and Sales          PROD
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">IN</span></code> differs from <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code> and <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> in the
interpretation of empty varchar values: for IN they are single-item
empty-string sets.  See <a class="reference internal" href="#in-subset-intersect-commonality">IN, SUBSET, INTERSECT Commonality</a>
for details, as well as for other behaviors that
<code class="docutils literal notranslate"><span class="pre">IN</span></code>, <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code> and <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> share in common.</p>
<p>See also: <a class="reference internal" href="sql-set.html#inmode"><span class="std std-ref">inMode</span></a></p>
</div>
<div class="section" id="searches-using-subset">
<span id="id1"></span><h3>Searches Using SUBSET<a class="headerlink" href="#searches-using-subset" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code> operator allows subset queries, and is typically used with
multi-value (i.e. <code class="docutils literal notranslate"><span class="pre">strlst</span></code>) fields that are treated as sets. It is
true if the left-side is a subset of the right-side, i.e. if there are
no values on the left-side that are missing from the right-side.
Duplicates count, i.e. they must match one-to-one from left side to
right.</p>
<p>For example, suppose the table <code class="docutils literal notranslate"><span class="pre">Users</span></code> contains one row per user
(<code class="docutils literal notranslate"><span class="pre">UserName</span></code>), and has a <code class="docutils literal notranslate"><span class="pre">strlst</span></code> column <code class="docutils literal notranslate"><span class="pre">GroupMembership</span></code> that
lists all the groups that row’s user is a member of. To find all users
that are members of groups “<code class="docutils literal notranslate"><span class="pre">Management</span></code>”, “<code class="docutils literal notranslate"><span class="pre">Sales</span></code>” <em>and</em>
“<code class="docutils literal notranslate"><span class="pre">Marketing</span></code>”, a <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code> query can be used:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">UserName</span>
<span class="k">FROM</span>   <span class="n">Users</span>
<span class="k">WHERE</span>  <span class="p">(</span><span class="s1">&#39;Management&#39;</span><span class="p">,</span> <span class="s1">&#39;Sales&#39;</span><span class="p">,</span> <span class="s1">&#39;Marketing&#39;</span><span class="p">)</span>
     <span class="k">IS</span> <span class="n">SUBSET</span> <span class="k">OF</span> <span class="n">GroupMembership</span><span class="p">;</span>
</pre></div>
</div>
<p>Note: Syntactically, <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code> is always used as part of the phrase
<code class="docutils literal notranslate"><span class="pre">IS</span> <span class="pre">SUBSET</span> <span class="pre">OF</span></code>, as it is only valid in <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clauses.</p>
<p>The above query will return
the users that are members of all three groups – including any users
that may also be members of additional groups.
Note that <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code> is not commutative, i.e. if the left- and right-sides
are reversed, the meaning is changed (unlike e.g. <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code>). If <code class="docutils literal notranslate"><span class="pre">A</span></code>
is a subset of <code class="docutils literal notranslate"><span class="pre">B</span></code>, then <code class="docutils literal notranslate"><span class="pre">B</span></code> is <em>not</em> necessarily a subset of <code class="docutils literal notranslate"><span class="pre">A</span></code>;
<code class="docutils literal notranslate"><span class="pre">B</span></code> is a subset of <code class="docutils literal notranslate"><span class="pre">A</span></code> if and only if both sets contain the same
values. E.g. this query:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">UserName</span>
<span class="k">FROM</span>   <span class="n">Users</span>
<span class="k">WHERE</span>  <span class="n">GroupMembership</span>
     <span class="k">IS</span> <span class="n">SUBSET</span> <span class="k">OF</span> <span class="p">(</span><span class="s1">&#39;Management&#39;</span><span class="p">,</span> <span class="s1">&#39;Sales&#39;</span><span class="p">,</span> <span class="s1">&#39;Marketing&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>while merely the reversed version of the earlier query, behaves
differently: it would list the users whose are in zero or more of the
Management, Sales or Marketing groups – <em>and</em> are not in any other
groups.</p>
<p>In set logic the empty set is a subset of any set; thus if there are
<em>no</em> values on the left-side, SUBSET is true no matter what the
right-side value(s) are. Note that SUBSET interprets an empty varchar
value as empty-set, not single-item empty-string set set (as IN does).
See <a class="reference internal" href="#in-subset-intersect-commonality">IN, SUBSET, INTERSECT Commonality</a>
for details, as well as for other behaviors that
<code class="docutils literal notranslate"><span class="pre">IN</span></code>, <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code> and <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> share in common.</p>
<div class="section" id="index-usage-by-subset">
<h4>Index Usage by SUBSET<a class="headerlink" href="#index-usage-by-subset" title="Permalink to this headline">¶</a></h4>
<p>A SUBSET query can often utilize a regular (B-tree) index to increase
performance.  Generally the index should be created with
<a class="reference internal" href="sql-set.html#indexvalues"><span class="std std-ref">indexValues</span></a> set to <code class="docutils literal notranslate"><span class="pre">splitstrlst</span></code> (the default), as this
enables individual values of <code class="docutils literal notranslate"><span class="pre">strlst</span></code>s to be accessed as needed.  There
are some limitations and caveats for SUBSET and indexes however:</p>
<ul>
<li><p><strong>Empty parameter, ``strlst`` column (either side):</strong></p>
<blockquote>
<div><p>Queries with empty-set parameters (i.e. zero-item <code class="docutils literal notranslate"><span class="pre">strlst</span></code>, or
empty <code class="docutils literal notranslate"><span class="pre">varchar</span></code>) and a <code class="docutils literal notranslate"><span class="pre">strlst</span></code> column cannot use an
<code class="docutils literal notranslate"><span class="pre">indexvalues=splitstrlst</span></code> index, regardless of which side of
SUBSET the parameter and column are on. An index with
<code class="docutils literal notranslate"><span class="pre">indexvalues=all</span></code> can be used however. It may be created in
addition to the normal <code class="docutils literal notranslate"><span class="pre">indexvalues=splitstrlst</span></code> index, and the
Texis optimizer will choose the appropriate one at search time.</p>
</div></blockquote>
</li>
<li><p><strong>Empty ``strlst`` column left-side, non-empty parameter right-side:</strong></p>
<blockquote>
<div><p>With a <code class="docutils literal notranslate"><span class="pre">strlst</span></code> column on the left-side, and a non-empty
parameter on the right, empty rows will not be returned if an index
is used – even though they properly match (as empty set is a subset
of any set).</p>
</div></blockquote>
</li>
</ul>
<p>These caveats are due to limitations in <code class="docutils literal notranslate"><span class="pre">indexvalues=strlst</span></code> indexes;
see <a class="reference internal" href="sql-set.html#indexvalues"><span class="std std-ref">indexValues</span></a> for more information.</p>
</div>
</div>
<div class="section" id="searches-using-intersect">
<h3>Searches Using INTERSECT<a class="headerlink" href="#searches-using-intersect" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> operator allows set-intersection queries, typically on
multi-value (i.e. <code class="docutils literal notranslate"><span class="pre">strlst</span></code>) values. It returns the intersection of the
left and right sides, i.e. the “set” (<code class="docutils literal notranslate"><span class="pre">strlst</span></code>) of all values that are
present on both sides. Duplicates are significant, i.e. they must match
one-to-one to be included in the intersection.
For example, suppose the table <code class="docutils literal notranslate"><span class="pre">Users</span></code> contains one row per user
(<code class="docutils literal notranslate"><span class="pre">UserName</span></code>), and has a <code class="docutils literal notranslate"><span class="pre">strlst</span></code> column <code class="docutils literal notranslate"><span class="pre">GroupMembership</span></code> that
lists all the membership groups of that row’s user. To find all users
that are members of groups “<code class="docutils literal notranslate"><span class="pre">Management</span></code>”, “<code class="docutils literal notranslate"><span class="pre">Sales</span></code>” <em>or</em>
“<code class="docutils literal notranslate"><span class="pre">Marketing</span></code>”, an <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> query can be used:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">UserName</span>
<span class="k">FROM</span>   <span class="n">Users</span>
<span class="k">WHERE</span>  <span class="n">GroupMembership</span> <span class="k">INTERSECT</span>
     <span class="p">(</span><span class="s1">&#39;Management&#39;</span><span class="p">,</span> <span class="s1">&#39;Sales&#39;</span><span class="p">,</span> <span class="s1">&#39;Marketing&#39;</span><span class="p">)</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="n">EMPTY</span><span class="p">;</span>
</pre></div>
</div>
<p>This will return users where the intersection of a user’s
GroupMembership with the three named groups is not empty (i.e. contains
at least one value). Thus, users that are members of any of the three
named groups are returned. The phrase <code class="docutils literal notranslate"><span class="pre">IS</span> <span class="pre">NOT</span> <span class="pre">EMPTY</span></code> must be added
immediately after, both to turn the expression into a true/false
condition suitable for a <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause, and to allow an index to be used
to resolve the query. (The phrase <code class="docutils literal notranslate"><span class="pre">IS</span> <span class="pre">EMPTY</span></code> is also permitted, for
negation. However indexes cannot be used to resolve such queries.)</p>
<p><code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> may also be used in a <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> clause, to return the actual
intersection set itself, rather than be used as a true/false condition.
For example, given the same Users table above, to find each user’s
membership amongst just the three named groups, this query may be used:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">UserName</span><span class="p">,</span> <span class="n">GroupMembership</span> <span class="k">INTERSECT</span>
     <span class="p">(</span><span class="s1">&#39;Management&#39;</span><span class="p">,</span> <span class="s1">&#39;Sales&#39;</span><span class="p">,</span> <span class="s1">&#39;Marketing&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="n">SubMembership</span>
<span class="k">FROM</span>   <span class="n">Users</span><span class="p">;</span>
</pre></div>
</div>
<p>This will return the membership of each user (<code class="docutils literal notranslate"><span class="pre">SubMembership</span></code>) in just the
three named groups, as a <code class="docutils literal notranslate"><span class="pre">strlst</span></code>. If a user is not a member of any of
the three groups, <code class="docutils literal notranslate"><span class="pre">SubMembership</span></code> will be empty. If a user is a member of
some other group(s), they will not be named in <code class="docutils literal notranslate"><span class="pre">SubMembership</span></code>.</p>
<p>Note that unlike <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code>, <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> is commutative, i.e. reversing the
left- and right-sides does not change its meaning. (The “<code class="docutils literal notranslate"><span class="pre">=</span></code>” equals
operator is also commutative, for example: x = y has the same meaning as
y = x.) Also note that <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> interprets an empty <code class="docutils literal notranslate"><span class="pre">varchar</span></code> value as
empty-set, not single-item empty-string set (as <code class="docutils literal notranslate"><span class="pre">IN</span></code> does).
See <a class="reference internal" href="#in-subset-intersect-commonality">IN, SUBSET, INTERSECT Commonality</a>
for details, as well as for other behaviors that
<code class="docutils literal notranslate"><span class="pre">IN</span></code>, <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code> and <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> share in common.</p>
<div class="section" id="index-usage-by-intersect">
<h4>Index Usage by INTERSECT<a class="headerlink" href="#index-usage-by-intersect" title="Permalink to this headline">¶</a></h4>
<p>An INTERSECT query can utilize a regular (B-tree) index to increase
performance.  The index should be created with <a class="reference internal" href="sql-set.html#indexvalues"><span class="std std-ref">indexValues</span></a>
set to <code class="docutils literal notranslate"><span class="pre">splitstrlst</span></code> (the default), as this enables individual values of
<code class="docutils literal notranslate"><span class="pre">strlst</span></code>s to be accessed as needed.</p>
</div>
</div>
<div class="section" id="in-subset-intersect-commonality">
<h3>IN, SUBSET, INTERSECT Commonality<a class="headerlink" href="#in-subset-intersect-commonality" title="Permalink to this headline">¶</a></h3>
<p>The IN, SUBSET and INTERSECT operators, being set-like, share certain
behaviors in common:</p>
<p>A <code class="docutils literal notranslate"><span class="pre">varchar</span></code> value on either side of these operators is treated as a
single-item <code class="docutils literal notranslate"><span class="pre">strlst</span></code> set – regardless of the current
<code class="docutils literal notranslate"><span class="pre">varchartostrlstsep</span></code> setting. This aids usage of <code class="docutils literal notranslate"><span class="pre">IN</span></code>/<code class="docutils literal notranslate"><span class="pre">SUBSET</span></code>/<code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code>
in that a single <code class="docutils literal notranslate"><span class="pre">varchar</span></code> value will not be unexpectedly (and
incorrectly) split into multiple values using its last character as a
separator.</p>
<p>However, the operators differ on interpretation of <em>empty</em> varchar
values. With <code class="docutils literal notranslate"><span class="pre">IN</span></code>, an empty varchar value is considered a single-item
empty-string set, because <code class="docutils literal notranslate"><span class="pre">IN</span></code> is most often used with single-value (i.e.
non-set-like) parameters. This makes the clause “WHERE myVarcharColumn IN
(’red’, ’green’, ’blue’)” only return “<code class="docutils literal notranslate"><span class="pre">red</span></code>”, “<code class="docutils literal notranslate"><span class="pre">green</span></code>” or
“<code class="docutils literal notranslate"><span class="pre">blue</span></code>” <code class="docutils literal notranslate"><span class="pre">myVarcharColumn</span></code> values – not empty-string values too, as SUBSET
would. This empty-string interpretation difference is the one way in
which <code class="docutils literal notranslate"><span class="pre">IN</span></code> differs from <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code> (and <code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code>, if <a class="reference internal" href="sql-set.html#inmode"><span class="std std-ref">inMode</span></a>
is set to <code class="docutils literal notranslate"><span class="pre">intersect</span></code>).</p>
<p>With <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code>/<code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> however, an empty <code class="docutils literal notranslate"><span class="pre">varchar</span></code> value is considered an
empty set, because <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code>/<code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> are more clearly set-like operators
where both operands are sets, and an empty string is more likely to be
intended to mean “empty set”. This is also more consistent with
<a class="reference internal" href="sql-server-funcs.html#convert"><span class="std std-ref">convert</span></a>() and <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> behavior: an empty string converted
or inserted into a strlst value becomes an empty strlst, not a one-item
(empty-string) <code class="docutils literal notranslate"><span class="pre">strlst</span></code>.</p>
<p>The current (or indexed) <a class="reference internal" href="sql-set.html#stringcomparemode"><span class="std std-ref">stringCompareMode</span></a> setting value is used
during <code class="docutils literal notranslate"><span class="pre">IN</span></code>/<code class="docutils literal notranslate"><span class="pre">SUBSET</span></code>/<code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> operations; thus case-insensitive
comparisions can be accomplished by modifying the setting. At search
time, the Texis optimizer will choose the index whose
<a class="reference internal" href="sql-set.html#stringcomparemode"><span class="std std-ref">stringCompareMode</span></a> setting is closest to the current value.
<strong>Caveat:</strong> <code class="docutils literal notranslate"><span class="pre">IN</span></code>/<code class="docutils literal notranslate"><span class="pre">SUBSET</span></code>/<code class="docutils literal notranslate"><span class="pre">INTERSECT</span></code> behavior with multi-value types other
than <code class="docutils literal notranslate"><span class="pre">strlst</span></code> is currently undefined and should be avoided.
Single-value types other than <code class="docutils literal notranslate"><span class="pre">varchar</span></code> currently have limited support;
it is recommended that only <code class="docutils literal notranslate"><span class="pre">varchar</span></code> (and <code class="docutils literal notranslate"><span class="pre">strlst</span></code>)
types be used.</p>
</div>
<div class="section" id="search-condition-using-like">
<h3>Search Condition Using LIKE<a class="headerlink" href="#search-condition-using-like" title="Permalink to this headline">¶</a></h3>
<p>In most SQL applications, a column value that contains character values
can be matched to a pattern of characters for the purpose of retrieving
one or more rows from a table. This is often referred to as <em>pattern
matching</em>. Pattern matching is useful when a user cannot be specific
about the data to be retrieved. For instance:</p>
<ul class="simple">
<li><p>The user is not sure if someone’s last name is Robinson, Robertson, or
Robbins. You search using the pattern “Rob”.</p></li>
<li><p>The user wants a list of all employees who live on Newman Avenue, Road or
Street. You search using the pattern “Newman”.</p></li>
<li><p>The user wants a list of all employees whose name ends in “man”, such as
Waterman, Spellman, or Herman. You search using the pattern “man”.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> operator is used in the <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause to enable you to
retrieve records that have a partial match with a column value. The
<code class="docutils literal notranslate"><span class="pre">LIKE</span></code> operator has the following format:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>WHERE  column-name  LIKE  &#39;pattern&#39;
</pre></div>
</div>
<p>In Texis the capabilities of the <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> clause have been exponentially
increased through implementation of all features of the Metamorph search
engine. Rather than the limited single item string search allowed in
traditional SQL applications, Texis allows any valid Metamorph query to
be substituted for the <code class="docutils literal notranslate"><span class="pre">'pattern'</span></code> following <code class="docutils literal notranslate"><span class="pre">LIKE</span></code>.
Therefore, in addition to traditional string searches, text fields can
be searched with all of Metamorph’s pattern matchers to find concepts,
phrases, variable expressions, approximations, and numeric quantities
expressed as text. These queries can contain multiple search items
combining calls to different Metamorph pattern matchers. Intersections
of such items can be located in proximity to one another within defined
text units such as sentences, paragraphs, or the whole record.
It is this integration of Metamorph through the <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> clause which
brings together intelligent full text searching with relational database
technology. For instance, within the confines of the Texis relational
database, you can also issue queries to find the following:</p>
<ul class="simple">
<li><p>All Research and Development reports covering conceptually similar
research done on a field of interest. For example, a request for all
research done concerning “red lenses” could discover a report about
“rose colored glasses”.</p></li>
<li><p>All strategic information reports concerning marketing campaigns over
a certain dollar amount. For example, such a request for marketing
information about wheels could reveal a “sales” campaign where
“twenty-five thousand dollars” was allocated to promote “tires”.</p></li>
<li><p>An employee whose name sounds like Shuler who helps fix computer
problems. For example, a query for approximately Shuler and computers
could find Elaine “Schuller” who works in “data processing”. And
since you are querying a relational database, you could also pull up
her phone extension and call for help.</p></li>
</ul>
<p>Full use of the Metamorph query language is discussed in depth in
the <a class="reference internal" href="sql3.html#intelligent-text-search-queries"><span class="std std-ref">Intelligent Text Search Queries</span></a> section.
This section will concentrate on simple
examples to illustrate how the <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> clause can be used to further
qualify <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>.</p>
</div>
<div class="section" id="like-command-discussion">
<h3>LIKE Command Discussion<a class="headerlink" href="#like-command-discussion" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The column name following the <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause must contain character
values; otherwise, the <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> operator cannot be used.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> operator compares the value in the specified column with
the pattern, as inserted in single quotes following <code class="docutils literal notranslate"><span class="pre">LIKE</span></code>. A row
is retrieved if a match occurs.</p></li>
<li><p>Any Metamorph query can be put in quotes (<code class="docutils literal notranslate"><span class="pre">'query'</span></code>) in place of a
fixed length string, although you would need to escape a literal
<code class="docutils literal notranslate"><span class="pre">'</span></code> with another <code class="docutils literal notranslate"><span class="pre">'</span></code> by typing <code class="docutils literal notranslate"><span class="pre">''</span></code>, if you want the character
<code class="docutils literal notranslate"><span class="pre">'</span></code> to be part of the query.</p></li>
<li><p>In Rampart, <a class="reference internal" href="rampart-sql.html#sql-params"><span class="std std-ref">SQL Parameters</span></a> may be used to insert
JavaScript variables into columns.  See the
<a class="reference internal" href="rampart-sql.html#exec-full-example"><span class="std std-ref">Full example here</span></a>.</p></li>
<li><p>The “pattern” inside single quotes following <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> will be
interpreted exactly as Metamorph would interpret such a query on its
query line, in any Metamorph application (with the only exception
being that a single quote or apostrophe must be escaped with another
<code class="docutils literal notranslate"><span class="pre">'</span></code> to be interpreted literally).</p></li>
<li><p>Concept searching is off by default for Metamorph queries following
<code class="docutils literal notranslate"><span class="pre">LIKE</span></code>, but can be selectively invoked on a word using the tilde
‘<code class="docutils literal notranslate"><span class="pre">~</span></code>’. See <a class="reference internal" href="sql-set.html#useequiv"><span class="std std-ref">useEquiv</span></a>.</p></li>
<li><p>Syntax for complete use of Metamorph query language is covered in
the <a class="reference internal" href="sql3.html#intelligent-text-search-queries"><span class="std std-ref">Intelligent Text Search Queries</span></a> section.</p></li>
<li><p>Queries using <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> can make use of any indexing which has been
done. An alternate form of <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> may also be used called
<code class="docutils literal notranslate"><span class="pre">LIKE3</span></code>, which uses indexing exclusively with no post search. See
the <a class="reference internal" href="sql3.html#intelligent-text-search-queries"><span class="std std-ref">Intelligent Text Search Queries</span></a> section
for a thorough explanation of all types of text
searches possible with <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> and <code class="docutils literal notranslate"><span class="pre">LIKE3</span></code>, and their relation to
indexed information.</p></li>
</ul>
<p><strong>Example:</strong> The following statement, as a simple example, will retrieve all
reports where “ink” is part of the title, without knowing the full
title.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">TITLE</span>
<span class="k">FROM</span>    <span class="n">REPORT</span>
<span class="k">WHERE</span>   <span class="n">TITLE</span>  <span class="k">LIKE</span>  <span class="s1">&#39;ink&#39;</span> <span class="p">;</span>
</pre></div>
</div>
<p>the result displayed will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>TITLE
Innovations in Disappearing Ink
Disappearing Ink Promotional Campaign
Ink Color Panorama
</pre></div>
</div>
<p>In this query, you are retrieving the titles of all reports whose title
is “like” the pattern “ink”.
In other cases you may not know the exact words you are looking for. A
simple example where a wildcard ’<code class="docutils literal notranslate"><span class="pre">*</span></code>’ is used follows.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">AUTHOR</span><span class="p">,</span> <span class="n">DEPT</span>
<span class="k">FROM</span>    <span class="n">REPORT</span>
<span class="k">WHERE</span>   <span class="n">AUTHOR</span>  <span class="k">LIKE</span>  <span class="s1">&#39;san*&#39;</span> <span class="p">;</span>
</pre></div>
</div>
<p>The result will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>AUTHOR                 DEPT
Sanchez, Carla         MKT
Sanders, George G.     FIN
Claus, Santa           MKT
</pre></div>
</div>
</div>
<div class="section" id="relevance-ranking-using-liker-and-likep">
<h3>Relevance Ranking Using LIKER and LIKEP<a class="headerlink" href="#relevance-ranking-using-liker-and-likep" title="Permalink to this headline">¶</a></h3>
<p>In addition to the Metamorph searches listed above there is another type
of search based on Metamorph. This will return rows in order of
relevance, with the most relevant record first (unless other clauses
alter this order, e.g. an <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code>). <code class="docutils literal notranslate"><span class="pre">LIKER</span></code> calculates a
relevance based solely on the presence or absence of the terms in the
document. <code class="docutils literal notranslate"><span class="pre">LIKEP</span></code> uses this same information, but also uses the
proximity of the terms to calculate relevance.</p>
<p>There are several restrictions and points to note about <code class="docutils literal notranslate"><span class="pre">LIKER</span></code> and
<code class="docutils literal notranslate"><span class="pre">LIKEP</span></code>. The conditions that must be met to obtain a relevancy search
are that a Metamorph index exists on the field in question. <code class="docutils literal notranslate"><span class="pre">LIKER</span></code>
can only work with an index; while <code class="docutils literal notranslate"><span class="pre">LIKEP</span></code> can work without such an
index, it performs best with one. The other condition is that the query
should consist of word terms only. None of the other pattern matchers
are available with <code class="docutils literal notranslate"><span class="pre">LIKER</span></code>; they are available with <code class="docutils literal notranslate"><span class="pre">LIKEP</span></code>, but at
a cost in performance (post-processing is required).</p>
<p>The query is a list of terms to be searched for. The words are weighted
by their uniqueness in the document set being searched. This means that
infrequent words are weighted more than common words.
The weight that was calculated for the record is available by selecting
the generated field <code class="docutils literal notranslate"><span class="pre">$rank</span></code>, which will contain the rank value. The
rank value for <code class="docutils literal notranslate"><span class="pre">LIKER</span></code> is unscaled. With <code class="docutils literal notranslate"><span class="pre">LIKEP</span></code> the number will
range between 0 and 1000, where greater values indicate greater computed
relevance to the query.</p>
<p>Normally no <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause is necessary to retrieve rows in relevance
ranked order.  However, the default ordering of <code class="docutils literal notranslate"><span class="pre">LIKER</span></code> and <code class="docutils literal notranslate"><span class="pre">LIKEP</span></code>
(rank-descending) may be changed (or augmented with further ordering
clauses) by the use of an <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause.  <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clauses
containing <code class="docutils literal notranslate"><span class="pre">$rank</span></code> will order consistently with other <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clauses
– i.e.  numerically ascending unless the <code class="docutils literal notranslate"><span class="pre">DESC</span></code> flag is given.  This means
that most <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span> <span class="pre">$rank</span></code> clauses should probably be ORDER BY $rank DESC,
to get rank-descending behavior.</p>
</div>
<div class="section" id="relevance-ranking-command-discussion">
<h3>Relevance Ranking Command Discussion<a class="headerlink" href="#relevance-ranking-command-discussion" title="Permalink to this headline">¶</a></h3>
<p>Result ranking is a useful feature, although due to the variety of cases
where you might want to use ranking, there are a number of variables
that control the ranking algorithm.
The first major choice will be whether proximity is important. This will
indicate if you want to use <code class="docutils literal notranslate"><span class="pre">LIKER</span></code> or <code class="docutils literal notranslate"><span class="pre">LIKEP</span></code>. <code class="docutils literal notranslate"><span class="pre">LIKER</span></code> uses the
index to determine the frequencies of the terms, and the presence of
absence of the terms in each document to determine the rank for each
document. Each term is assigned a weight between 0 and 1000, and the
rank value for the document is the sum of the weights for all the terms
that occur.
<code class="docutils literal notranslate"><span class="pre">LIKER</span></code> has a threshold value, such that documents with a lower rank
value than the threshold value will not be returned. This prevents a
large number of irrelevant documents from being returned. Initially the
threshold is set to the weight of the term with the highest weight. If
there are more than five terms then the threshold is doubled, and if
there are more than 10 terms the threshold is doubled again. This keeps
queries containing a lot of terms from returning irrelevant hits. It is
possible to force the threshold lower if desired to return more records.
This can be performed either by specifying the maximum number of records
a term should occur in, and still be returned by <code class="docutils literal notranslate"><span class="pre">LIKER</span></code>. This is the
<a class="reference internal" href="sql-set.html#likerrows"><span class="std std-ref">likerRows</span></a> property. For example, in a three term query, where the
terms occur in 400, 900 and 1400 records respectively, setting
<a class="reference internal" href="sql-set.html#likerrows"><span class="std std-ref">likerRows</span></a> to 1000 would allow records containing only the second
search term to be returned.
In general <code class="docutils literal notranslate"><span class="pre">LIKEP</span></code> will perform the same initial step as <code class="docutils literal notranslate"><span class="pre">LIKER</span></code> to
determine which documents to rank. <code class="docutils literal notranslate"><span class="pre">LIKEP</span></code> then looks at the
<a class="reference internal" href="sql-set.html#likeprows"><span class="std std-ref">likepRows</span></a> highest ranked documents from <code class="docutils literal notranslate"><span class="pre">LIKER</span></code>, and recalculates
the rank by actually looking inside the document to see where the
matching terms occur. Because of this it will be slower than <code class="docutils literal notranslate"><span class="pre">LIKER</span></code>,
although if you are using a Metamorph inverted index the ranks may still
be determinable from the index alone, saving actual table accesses.
There are a number of variables that can be set with <code class="docutils literal notranslate"><span class="pre">LIKEP</span></code>, which
affect both how documents are ranked, as well as how many documents are
returned. See the <a class="reference internal" href="sql-set.html#rank-knobs"><span class="std std-ref">Rank knobs</span></a> and <a class="reference internal" href="sql-set.html#other-ranking-properties"><span class="std std-ref">Other Ranking Properties</span></a>
discussions in the <a class="reference internal" href="sql-set.html#server-properties"><span class="std std-ref">Server Properties</span></a> section.</p>
</div>
<div class="section" id="query-searching-using-likein">
<h3>Query searching using LIKEIN<a class="headerlink" href="#query-searching-using-likein" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">LIKEIN</span></code> is used for doing profiling, where you have a lot of queries
and you want to find which queries match the given text. This is
typically used when the number of queries is large and relatively
constant, and there is a stream of new texts to match. <code class="docutils literal notranslate"><span class="pre">LIKEIN</span></code> will
find the queries that would match the text. To work efficiently you
should have a <code class="docutils literal notranslate"><span class="pre">METAMORPH</span> <span class="pre">COUNTER</span></code> index created on the field
containing the queries.</p>
</div>
<div class="section" id="search-condition-using-matches">
<h3>Search Condition Using MATCHES<a class="headerlink" href="#search-condition-using-matches" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">MATCHES</span></code> keyword allows you to match fields against expressions. This
is most useful when you have fields with a small amount of text and do
not need the full power of Metamorph. Typical uses would be names, part
numbers or addresses.
In the query an <code class="docutils literal notranslate"><span class="pre">_</span></code> (underscore) will match any single character, and a
<code class="docutils literal notranslate"><span class="pre">%</span></code> (percent sign) will match any number of characters. For example</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>  <span class="n">AUTHOR</span><span class="p">,</span> <span class="n">DEPT</span>
<span class="k">FROM</span>    <span class="n">REPORT</span>
<span class="k">WHERE</span>   <span class="n">AUTHOR</span>  <span class="n">MATCHES</span>  <span class="s1">&#39;San%&#39;</span> <span class="p">;</span>
</pre></div>
</div>
<p>The result will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>AUTHOR                 DEPT
Sanchez, Carla         MKT
Sanders, George G.     FIN
</pre></div>
</div>
<p>The special characters used with <code class="docutils literal notranslate"><span class="pre">MATCHES</span></code> can be changed by setting
<a class="reference internal" href="sql-set.html#matchmode"><span class="std std-ref">matchMode</span></a> Server Property. The default value of <code class="docutils literal notranslate"><span class="pre">0</span></code>/<code class="docutils literal notranslate"><span class="pre">false</span></code></p>
<blockquote>
<div><p>produces the behavior documented above which is standard in SQL.  Setting</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">matchMode</span></code> to <code class="docutils literal notranslate"><span class="pre">1</span></code>/<code class="docutils literal notranslate"><span class="pre">true</span></code> will change the special characters such that
<code class="docutils literal notranslate"><span class="pre">*</span></code> (asterix) will match any number of characters, and a <code class="docutils literal notranslate"><span class="pre">?</span></code> (question
mark) will match any single character, which is more familiar to many
people.  Comparing the results to the earlier example using <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> you
will see that <code class="docutils literal notranslate"><span class="pre">Claus,</span> <span class="pre">Santa</span></code> does not match, as the match has to occur at the
beginning of the field.  <code class="docutils literal notranslate"><span class="pre">MATCHES</span></code> can make use of a regular index on the
field.  It will not use a Metamorph index.</p>
</div>
</div>
<div class="section" id="sorting-your-results">
<h2>Sorting Your Results<a class="headerlink" href="#sorting-your-results" title="Permalink to this headline">¶</a></h2>
<p>The output from the above queries may not be in the desired order. For
example, you may want the list of departments arranged alphabetically.
Sorting is the process of rearranging data into some specific order. To
sort the output into a desired sequence, a field or fields are specified
that determine the order in which the results are arranged. These fields
are called <em>sort keys</em>.</p>
<p>For example, if the department data is sorted into alphabetical order by
department, the department name is the sort key. The budget field is the
sort key if the department table is sorted by amount of budget. Note
that the sort key can be numeric (budget) or character (department
name).</p>
<p>Results can be sorted into ascending or descending sequence by sort key.
Ascending means increasing order, and descending means decreasing order.
For example, sorting the department table in ascending order by budget
means the department data will be arranged so that the department with
the lowest budget is first and the department with the highest budget is
last. If we instead sorted in descending order, the department with the
highest budget would appear first, the department with the lowest budget
would appear last.</p>
<p>Sorting character data in ascending or descending order is based on a
coding, or collating, sequence assigned to numbers and letters by the
computer. For example, when department name is the sort key and you want
the data arranged alphabetically, that indicates ascending order. If you
want the data arranged in reverse alphabetical order, then specify
descending order.</p>
<p>To sort your results using Texis, add the <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause to the
<code class="docutils literal notranslate"><span class="pre">SELECT</span></code> statement. The form of this clause is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ORDER BY  column-name  [DESC]
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">DESC</span></code> indicates the rows are to be arranged in descending order. If
<code class="docutils literal notranslate"><span class="pre">DESC</span></code> is omitted, your output is sorted in ascending order.
This clause fits into the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> expression following the <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>
clause, as shown below:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>      <span class="k">column</span><span class="o">-</span><span class="n">name1</span> <span class="p">[,</span><span class="k">column</span><span class="o">-</span><span class="n">name2</span><span class="p">]</span> <span class="p">...</span>
<span class="k">FROM</span>        <span class="k">table</span><span class="o">-</span><span class="n">name</span>
<span class="p">[</span><span class="k">WHERE</span>      <span class="k">search</span><span class="o">-</span><span class="n">condition</span><span class="p">]</span>
<span class="p">[</span><span class="k">ORDER</span> <span class="k">BY</span>   <span class="k">column</span><span class="o">-</span><span class="n">name</span> <span class="p">[</span><span class="k">DESC</span><span class="p">]</span> <span class="p">]</span> <span class="p">;</span>
</pre></div>
</div>
<p><strong>Example:</strong> The following statement will retrieve a list of departments arranged by division, and
within that division, arranged by highest budget first:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>      <span class="n">DNAME</span><span class="p">,</span> <span class="n">DIV</span><span class="p">,</span> <span class="n">BUDGET</span>
<span class="k">FROM</span>        <span class="n">DEPARTMENT</span>
<span class="k">ORDER</span> <span class="k">BY</span>    <span class="n">DIV</span><span class="p">,</span> <span class="n">BUDGET</span> <span class="k">DESC</span> <span class="p">;</span>
</pre></div>
</div>
<p>Output will appear in ascending order automatically if DESC is omitted.
The results returned will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DNAME                                  DIV     BUDGET
Corporate Legal Support                CORP    28000
Finance and Accounting                 CORP    26000
Management and Administration          CORP    22000
Recruitment and Personnel              CORP    15000
Supplies and Procurement               CORP    10500
Strategic Planning and Intelligence    INFO    28500
Information Systems Management         INFO    22500
Corporate Library                      INFO    18500
Manufacturing                          PROD    32000
Research and Development               PROD    27500
Product Marketing and Sales            PROD    25000
Customer Support and Service           PROD    11000
</pre></div>
</div>
<p>Notice that all departments in the same division are listed together,
with the divisions listed in ascending order, as the default ordering
for <code class="docutils literal notranslate"><span class="pre">DIV</span></code>. Within each division, the department with the highest budget is
listed first, since descending order was specified for <code class="docutils literal notranslate"><span class="pre">BUDGET</span></code>.
It is possible to have as many as 50 sort keys. The order in which the
sort keys are listed is the order in which the data will be arranged.
This chapter has introduced several ways to retrieve rows and columns
from a table.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sql2.html" class="btn btn-neutral float-right" title="Queries Involving Calculated Values" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rampart-sql.html" class="btn btn-neutral" title="Preface" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Moat Crossing Systems.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> and ❤️  using a custom <a href="https://github.com/LinxiFan/Sphinx-theme">theme</a> based on <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>